/*! For license information please see main.cb29fa6f.js.LICENSE.txt */
(()=>{var e={497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),E=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var D,j=Object.assign;function U(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case E:return"Portal";case k:return"Profiler";case S:return"StrictMode";case L:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ce=null,Se=null;function ke(e){if(e=_i(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=bi(t),Ee(e.stateNode,e.type,t))}}function Ie(e){Ce?Se?Se.push(e):Se=[e]:Ce=e}function Te(){if(Ce){var e=Ce,t=Se;if(Se=Ce=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function xe(e,t){return e(t)}function Le(){}var Pe=!1;function Ne(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return xe(e,t,n)}finally{Pe=!1,(null!==Ce||null!==Se)&&(Le(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(c)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ce){Oe=!1}function Ae(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var De=!1,je=null,Ue=!1,Fe=null,Ve={onError:function(e){De=!0,je=e}};function ze(e,t,n,r,i,s,o,a,l){De=!1,je=null,Ae.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?$e(e):null}function $e(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$e(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,Et,Ct,St,kt,It=!1,Tt=[],xt=null,Lt=null,Pt=null,Nt=new Map,Rt=new Map,Ot=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function At(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Dt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void kt(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Vt(){It=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Lt&&Ut(Lt)&&(Lt=null),null!==Pt&&Ut(Pt)&&(Pt=null),Nt.forEach(Ft),Rt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==Lt&&zt(Lt,e),null!==Pt&&zt(Pt,e),Nt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)jt(n),null===n.blockedOn&&Ot.shift()}var qt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=1,Kt(e,t,n,r)}finally{_t=i,qt.transition=s}}function $t(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=4,Kt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Kt(e,t,n,r){if(Wt){var i=Qt(e,t,n,r);if(null===i)Wr(e,t,r,Gt,n),At(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Dt(xt,e,t,n,r,i),!0;case"dragenter":return Lt=Dt(Lt,e,t,n,r,i),!0;case"mouseover":return Pt=Dt(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nt.set(s,Dt(Nt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Dt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(At(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&bt(s),null===(s=Qt(e,t,n,r))&&Wr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=yi(e=be(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=j({},un,{view:0,detail:0}),dn=sn(hn),pn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=sn(pn),gn=sn(j({},pn,{dataTransfer:0})),mn=sn(j({},hn,{relatedTarget:0})),vn=sn(j({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(yn),wn=sn(j({},un,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function kn(){return Sn}var In=j({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(In),xn=sn(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ln=sn(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Pn=sn(j({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Nn),On=[9,13,27,32],Mn=c&&"CompositionEvent"in window,An=null;c&&"documentMode"in document&&(An=document.documentMode);var Dn=c&&"TextEvent"in window&&!An,jn=c&&(!Mn||An&&8<An&&11>=An),Un=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ie(r),0<(t=$r(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Kn=null;function Gn(e){Ur(e,0)}function Qn(e){if(K(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){$n&&($n.detachEvent("onpropertychange",nr),Kn=$n=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Hn(t,Kn,e,be(e)),Ne(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,($n=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,_r=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==G(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=$r(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Cr={},Sr={};function kr(e){if(Cr[e])return Cr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Cr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Ir=kr("animationend"),Tr=kr("animationiteration"),xr=kr("animationstart"),Lr=kr("transitionend"),Pr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Pr.set(e,t),l(t,[e])}for(var Or=0;Or<Nr.length;Or++){var Mr=Nr[Or];Rr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Rr(Ir,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(xr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Lr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ar));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(ze.apply(this,arguments),De){if(!De)throw Error(s(198));var c=je;De=!1,je=null,Ue||(Ue=!0,Fe=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;jr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;jr(i,a,u),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=$t;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ne((function(){var r=s,i=be(n),o=[];e:{var a=Pr.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ln;break;case Ir:case Tr:case xr:l=vn;break;case Lr:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var p,f=r;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==d&&(null!=(g=Re(f,d))&&c.push(Hr(f,g,p)))),h)break;f=f.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=Be(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,g="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=xn,g="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:wi(l),p=null==u?a:wi(u),(a=new c(g,f+"leave",l,n,i)).target=h,a.relatedTarget=p,g=null,yi(i)===r&&((c=new c(d,f+"enter",u,n,i)).target=p,c.relatedTarget=h,g=c),h=g,l&&u)e:{for(d=u,f=0,p=c=l;p;p=Kr(p))f++;for(p=0,g=d;g;g=Kr(g))p++;for(;0<f-p;)c=Kr(c),f--;for(;0<p-f;)d=Kr(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break e;c=Kr(c),d=Kr(d)}c=null}else c=null;null!==l&&Gr(o,a,l,c,!1),null!==u&&null!==h&&Gr(o,h,u,c,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Yn;else if(Wn(a))if(Xn)m=or;else{m=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?wi(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,wr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(o,n,i)}var y;if(Mn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(v=$r(r,_)).length&&(_=new wn(_,e,null,n,i),o.push({event:_,listeners:v}),y?_.data=y:null!==(y=zn(n))&&(_.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Mn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=$r(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $r(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Re(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Re(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function bi(e){return e[pi]||null}var Ei=[],Ci=-1;function Si(e){return{current:e}}function ki(e){0>Ci||(e.current=Ei[Ci],Ei[Ci]=null,Ci--)}function Ii(e,t){Ci++,Ei[Ci]=e.current,e.current=t}var Ti={},xi=Si(Ti),Li=Si(!1),Pi=Ti;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){ki(Li),ki(xi)}function Mi(e,t,n){if(xi.current!==Ti)throw Error(s(168));Ii(xi,t),Ii(Li,n)}function Ai(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return j({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Pi=xi.current,Ii(xi,e),Ii(Li,Li.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ai(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,ki(Li),ki(xi),Ii(xi,e)):ki(Li),Ii(Li,n)}var Ui=null,Fi=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke(Ze,Bi),i}finally{_t=t,Vi=!1}}return null}var qi=[],Wi=0,Hi=null,$i=0,Ki=[],Gi=0,Qi=null,Yi=1,Xi="";function Ji(e,t){qi[Wi++]=$i,qi[Wi++]=Hi,Hi=e,$i=t}function Zi(e,t,n){Ki[Gi++]=Yi,Ki[Gi++]=Xi,Ki[Gi++]=Qi,Qi=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else Yi=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=qi[--Wi],qi[Wi]=null,$i=qi[--Wi],qi[Wi]=null;for(;e===Qi;)Qi=Ki[--Gi],Ki[Gi]=null,Xi=Ki[--Gi],Ki[Gi]=null,Yi=Ki[--Gi],Ki[Gi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Nu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ui(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ui(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ui(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ui(e.nextSibling)}function ps(){rs=ns=null,is=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var gs=w.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function _s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ou(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=ju(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===C?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&ys(s)===t.type)?((r=i(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=Mu(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Au(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=ju(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Mu(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case E:return(t=Uu(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||A(t))return(t=Au(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?u(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null;case R:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||A(n))return null!==i?null:h(e,t,n,r,null);vs(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||A(r))return h(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function g(i,s,a,l){for(var u=null,c=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=p(i,h,a[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,g),null===c?u=v:c.sibling=v,c=v,h=m}if(g===a.length)return n(i,h),is&&Ji(i,g),u;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(s=o(h,s,g),null===c?u=h:c.sibling=h,c=h);return is&&Ji(i,g),u}for(h=r(i,h);g<a.length;g++)null!==(m=f(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),is&&Ji(i,g),u}function m(i,a,l,u){var c=A(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var _=p(i,g,y.value,u);if(null===_){null===g&&(g=v);break}e&&g&&null===_.alternate&&t(i,g),a=o(_,a,m),null===h?c=_:h.sibling=_,h=_,g=v}if(y.done)return n(i,g),is&&Ji(i,m),c;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,u))&&(a=o(y,a,m),null===h?c=y:h.sibling=y,h=y);return is&&Ji(i,m),c}for(g=r(i,g);!y.done;m++,y=l.next())null!==(y=f(g,i,m,y.value,u))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=o(y,a,m),null===h?c=y:h.sibling=y,h=y);return e&&g.forEach((function(e){return t(i,e)})),is&&Ji(i,m),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===C&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===C){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&ys(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=ms(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===C?((s=Au(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Mu(o.type,o.key,o.props,null,r.mode,l)).ref=ms(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uu(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return g(r,s,o,l);if(A(o))return m(r,s,o,l);vs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=ju(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var ws=_s(!0),bs=_s(!1),Es=Si(null),Cs=null,Ss=null,ks=null;function Is(){ks=Ss=Cs=null}function Ts(e){var t=Es.current;ki(Es),e._currentValue=t}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ls(e,t){Cs=e,ks=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(ks!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===Cs)throw Error(s(308));Ss=e,Cs.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Ns=null;function Rs(e){null===Ns?Ns=[e]:Ns.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Rs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ms(e,r)}function Ms(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function js(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&xl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ms(e,n)}return null===(i=r.interleaved)?(t.next=t,Rs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ms(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,p=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,g=a;switch(d=t,p=n,g.tag){case 1:if("function"===typeof(f=g.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=g.payload)?f.call(p,h,d):f)||void 0===d)break e;h=j({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=p,l=h):c=c.next=p,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Dl|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Ws={},Hs=Si(Ws),$s=Si(Ws),Ks=Si(Ws);function Gs(e){if(e===Ws)throw Error(s(174));return e}function Qs(e,t){switch(Ii(Ks,t),Ii($s,e),Ii(Hs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(Hs),Ii(Hs,t)}function Ys(){ki(Hs),ki($s),ki(Ks)}function Xs(e){Gs(Ks.current);var t=Gs(Hs.current),n=le(t,e.type);t!==n&&(Ii($s,e),Ii(Hs,n))}function Js(e){$s.current===e&&(ki(Hs),ki($s))}var Zs=Si(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=w.ReactCurrentDispatcher,io=w.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,uo=!1,co=!1,ho=0,po=0;function fo(){throw Error(s(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),co){o=0;do{if(co=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(co)}if(ro.current=Jo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,uo=!1,t)throw Error(s(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function _o(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function bo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((so&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,oo.lanes|=h,Dl|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Dl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Co(){}function So(e,t){var n=oo,r=_o(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,_a=!0),r=r.queue,Do(To.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,No(9,Io.bind(null,n,r,i,t),void 0,null),null===Ll)throw Error(s(349));0!==(30&so)||ko(n,t,i)}return i}function ko(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Io(e,t,n,r){t.value=n,t.getSnapshot=r,xo(t)&&Lo(e)}function To(e,t,n){return n((function(){xo(t)&&Lo(e)}))}function xo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Lo(e){var t=Ms(e,1);null!==t&&nu(t,e,1,-1)}function Po(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,oo,e),[t.memoizedState,e]}function No(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return _o().memoizedState}function Oo(e,t,n,r){var i=yo();oo.flags|=e,i.memoizedState=No(1|t,n,void 0,void 0===r?null:r)}function Mo(e,t,n,r){var i=_o();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&go(r,o.deps))return void(i.memoizedState=No(t,n,s,r))}oo.flags|=e,i.memoizedState=No(1|t,n,s,r)}function Ao(e,t){return Oo(8390656,8,e,t)}function Do(e,t){return Mo(2048,8,e,t)}function jo(e,t){return Mo(4,2,e,t)}function Uo(e,t){return Mo(4,4,e,t)}function Fo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4,4,Fo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),oo.lanes|=n,Dl|=n,e.baseState=!0),t)}function Ho(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{_t=n,io.transition=r}}function $o(){return _o().memoizedState}function Ko(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))Yo(t,n);else if(null!==(n=Os(e,t,n,r))){nu(n,e,r,eu()),Xo(n,t,r)}}function Go(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Yo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Rs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Os(e,t,i,r))&&(nu(n,e,r,i=eu()),Xo(n,t,r))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Yo(e,t){co=uo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Jo={readContext:Ps,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},Zo={readContext:Ps,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Ao,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,Fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Po,useDebugValue:zo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=Ho.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=yo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ll)throw Error(s(349));0!==(30&so)||ko(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ao(To.bind(null,r,o,e),[e]),r.flags|=2048,No(9,Io.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Ll.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ps,useCallback:Bo,useContext:Ps,useEffect:Do,useImperativeHandle:Vo,useInsertionEffect:jo,useLayoutEffect:Uo,useMemo:qo,useReducer:bo,useRef:Ro,useState:function(){return bo(wo)},useDebugValue:zo,useDeferredValue:function(e){return Wo(_o(),ao.memoizedState,e)},useTransition:function(){return[bo(wo)[0],_o().memoizedState]},useMutableSource:Co,useSyncExternalStore:So,useId:$o,unstable_isNewReconciler:!1},ta={readContext:Ps,useCallback:Bo,useContext:Ps,useEffect:Do,useImperativeHandle:Vo,useInsertionEffect:jo,useLayoutEffect:Uo,useMemo:qo,useReducer:Eo,useRef:Ro,useState:function(){return Eo(wo)},useDebugValue:zo,useDeferredValue:function(e){var t=_o();return null===ao?t.memoizedState=e:Wo(t,ao.memoizedState,e)},useTransition:function(){return[Eo(wo)[0],_o().memoizedState]},useMutableSource:Co,useSyncExternalStore:So,useId:$o,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),s=Us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(nu(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),s=Us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(nu(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fs(e,i,r))&&(nu(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(i=Ri(t)?Pi:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ps(s):(s=Ri(t)?Pi:xi.current,i.context=Ni(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ca(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=r),ha(0,t)},n}function fa(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===$l?$l=new Set([this]):$l.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ku.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,Fs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=w.ReactCurrentOwner,_a=!1;function wa(e,t,n,r){t.child=null===e?bs(t,null,n,r):ws(t,e.child,n,r)}function ba(e,t,n,r,i){n=n.render;var s=t.ref;return Ls(t,i),r=mo(e,t,n,r,s,i),n=vo(),null===e||_a?(is&&n&&es(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ru(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ca(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Ou(s,r)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return Ia(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ol,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Ol,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ii(Ol,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ii(Ol,Rl),Rl|=r;return wa(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ia(e,t,n,r,i){var s=Ri(n)?Pi:xi.current;return s=Ni(t,s),Ls(t,i),n=mo(e,t,n,r,s,i),r=vo(),null===e||_a?(is&&r&&es(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ta(e,t,n,r,i){if(Ri(n)){var s=!0;Di(t)}else s=!1;if(Ls(t,i),null===t.stateNode)qa(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ps(u):u=Ni(t,u=Ri(n)?Pi:xi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&aa(t,o,r,u),As=!1;var d=t.memoizedState;o.state=d,Bs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Li.current||As?("function"===typeof c&&(ra(t,n,c,r),l=t.memoizedState),(a=As||sa(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,js(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:na(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Ni(t,l=Ri(n)?Pi:xi.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),As=!1,d=t.memoizedState,o.state=d,Bs(t,r,o,i);var f=t.memoizedState;a!==h||d!==f||Li.current||As?("function"===typeof p&&(ra(t,n,p,r),f=t.memoizedState),(u=As||sa(t,n,u,r,d,f,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return xa(e,t,n,r,s,i)}function xa(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Wa(e,t,s);r=t.stateNode,ya.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function La(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),Qs(e,t.containerInfo)}function Pa(e,t,n,r,i){return ps(),fs(i),t.flags|=256,wa(e,t,n,r),t.child}var Na,Ra,Oa,Ma,Aa={dehydrated:null,treeContext:null,retryLane:0};function Da(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(Zs,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Du(l,i,0,null),e=Au(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Da(n),t.memoizedState=Aa,e):Ua(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Fa(e,t,a,r=ca(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Du({mode:"visible",children:r.children},i,0,null),(o=Au(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,a),t.child.memoizedState=Da(a),t.memoizedState=Aa,o);if(0===(1&t.mode))return Fa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fa(e,t,a,r=ca(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),_a||l){if(null!==(r=Ll)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ms(e,i),nu(r,e,i,-1))}return gu(),Fa(e,t,a,r=ca(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ui(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Gi++]=Yi,Ki[Gi++]=Xi,Ki[Gi++]=Qi,Yi=e.id,Xi=e.overflow,Qi=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Ou(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Ou(r,a):(a=Au(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Da(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Aa,i}return e=(a=e.child).sibling,i=Ou(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Du({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fa(e,t,n,r){return null!==r&&fs(r),ws(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ou(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ou(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $a(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $a(t),null;case 1:case 17:return Ri(t.type)&&Oi(),$a(t),null;case 3:return r=t.stateNode,Ys(),ki(Li),ki(xi),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ou(ss),ss=null))),Ra(e,t),$a(t),null;case 5:Js(t);var i=Gs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return $a(t),null}if(e=Gs(Hs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Ar.length;i++)Fr(Ar[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":$(r),Z(r,o,!0);break;case"textarea":$(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[pi]=r,Na(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ar.length;i++)Fr(Ar[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Fr("scroll",e):null!=c&&_(e,o,c,l))}switch(n){case"input":$(e),Z(e,r,!1);break;case"textarea":$(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return $a(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Gs(Ks.current),Gs(Hs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return $a(t),null;case 13:if(ki(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),ps(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;$a(t),o=!1}else null!==ss&&(ou(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ml&&(Ml=3):gu())),null!==t.updateQueue&&(t.flags|=4),$a(t),null);case 4:return Ys(),Ra(e,t),null===e&&Br(t.stateNode.containerInfo),$a(t),null;case 10:return Ts(t.type._context),$a(t),null;case 19:if(ki(Zs),null===(o=t.memoizedState))return $a(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bl&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return $a(t),null}else 2*Xe()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Ii(Zs,r?1&n|2:1&n),t):($a(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&($a(t),6&t.subtreeFlags&&(t.flags|=8192)):$a(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ga(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),ki(Li),ki(xi),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(ki(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(Zs),null;case 4:return Ys(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Na=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gs(Hs.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ya=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Su(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Su(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ya||Za(n,t);case 6:var r=cl,i=hl;cl=null,dl(e,t,n),hl=i,null!==(cl=r)&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,dl(e,t,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ya&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Su(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,dl(e,t,n),Ya=r):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=xu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(s(160));pl(o,a,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Su(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Su(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Su(e,e.return,m)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Su(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),_e(l,a);var c=_e(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,c)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(m){Su(e,e.return,m)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Su(e,e.return,m)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Su(e,e.return,m)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Xe())),4&r&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(c=Ya)||h,gl(t,e),Ya=c):gl(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Ja=e,h=e.child;null!==h;){for(d=Ja=h;null!==Ja;){switch(f=(p=Ja).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Za(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Su(r,n,m)}}break;case 5:Za(p,p.return);break;case 22:if(null!==p.memoizedState){bl(d);continue}}null!==f?(f.return=p,Ja=f):bl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ge("display",a))}catch(m){Su(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Su(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){Su(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Ja=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==Ja;){var i=Ja,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Qa;var u=Ya;if(Qa=o,(Ya=l)&&!u)for(Ja=i;null!==Ja;)l=(o=Ja).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Ja=l):El(i);for(;null!==s;)Ja=s,_l(s,t,n),s=s.sibling;Ja=i,Qa=a,Ya=u}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Ja=s):wl(e)}}function wl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Ya||512&t.flags&&il(t)}catch(p){Su(t,t.return,p)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function bl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function El(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Su(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Su(t,i,l)}}var s=t.return;try{il(t)}catch(l){Su(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Su(t,o,l)}}}catch(l){Su(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Cl,Sl=Math.ceil,kl=w.ReactCurrentDispatcher,Il=w.ReactCurrentOwner,Tl=w.ReactCurrentBatchConfig,xl=0,Ll=null,Pl=null,Nl=0,Rl=0,Ol=Si(0),Ml=0,Al=null,Dl=0,jl=0,Ul=0,Fl=null,Vl=null,zl=0,Bl=1/0,ql=null,Wl=!1,Hl=null,$l=null,Kl=!1,Gl=null,Ql=0,Yl=0,Xl=null,Jl=-1,Zl=0;function eu(){return 0!==(6&xl)?Xe():-1!==Jl?Jl:Jl=Xe()}function tu(e){return 0===(1&e.mode)?1:0!==(2&xl)&&0!==Nl?Nl&-Nl:null!==gs.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nu(e,t,n,r){if(50<Yl)throw Yl=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&xl)&&e===Ll||(e===Ll&&(0===(2&xl)&&(jl|=n),4===Ml&&au(e,Nl)),ru(e,r),1===n&&0===xl&&0===(1&t.mode)&&(Bl=Xe()+500,Fi&&Bi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=pt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Ll?Nl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Fi=!0,zi(e)}(lu.bind(null,e)):zi(lu.bind(null,e)),oi((function(){0===(6&xl)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Lu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Jl=-1,Zl=0,0!==(6&xl))throw Error(s(327));var n=e.callbackNode;if(Eu()&&e.callbackNode!==n)return null;var r=dt(e,e===Ll?Nl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mu(e,r);else{t=r;var i=xl;xl|=2;var o=fu();for(Ll===e&&Nl===t||(ql=null,Bl=Xe()+500,du(e,t));;)try{yu();break}catch(l){pu(e,l)}Is(),kl.current=o,xl=i,null!==Pl?t=0:(Ll=null,Nl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=su(e,i))),1===t)throw n=Al,du(e,0),au(e,r),ru(e,Xe()),n;if(6===t)au(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mu(e,r))&&(0!==(o=ft(e))&&(r=o,t=su(e,o))),1===t))throw n=Al,du(e,0),au(e,r),ru(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:bu(e,Vl,ql);break;case 3:if(au(e,r),(130023424&r)===r&&10<(t=zl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bu.bind(null,e,Vl,ql),t);break}bu(e,Vl,ql);break;case 4:if(au(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(bu.bind(null,e,Vl,ql),r);break}bu(e,Vl,ql);break;default:throw Error(s(329))}}}return ru(e,Xe()),e.callbackNode===n?iu.bind(null,e):null}function su(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=mu(e,t))&&(t=Vl,Vl=n,null!==t&&ou(t)),e}function ou(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function au(e,t){for(t&=~Ul,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&xl))throw Error(s(327));Eu();var t=dt(e,0);if(0===(1&t))return ru(e,Xe()),null;var n=mu(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=su(e,r))}if(1===n)throw n=Al,du(e,0),au(e,t),ru(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bu(e,Vl,ql),ru(e,Xe()),null}function uu(e,t){var n=xl;xl|=1;try{return e(t)}finally{0===(xl=n)&&(Bl=Xe()+500,Fi&&Bi())}}function cu(e){null!==Gl&&0===Gl.tag&&0===(6&xl)&&Eu();var t=xl;xl|=1;var n=Tl.transition,r=_t;try{if(Tl.transition=null,_t=1,e)return e()}finally{_t=r,Tl.transition=n,0===(6&(xl=t))&&Bi()}}function hu(){Rl=Ol.current,ki(Ol)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Ys(),ki(Li),ki(xi),no();break;case 5:Js(r);break;case 4:Ys();break;case 13:case 19:ki(Zs);break;case 10:Ts(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Ll=e,Pl=e=Ou(e.current,null),Nl=Rl=t,Ml=0,Al=null,Ul=jl=Dl=0,Vl=Fl=null,null!==Ns){for(t=0;t<Ns.length;t++)if(null!==(r=(n=Ns[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ns=null}return e}function pu(e,t){for(;;){var n=Pl;try{if(Is(),ro.current=Jo,uo){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}uo=!1}if(so=0,lo=ao=oo=null,co=!1,ho=0,Il.current=null,null===n||null===n.return){Ml=1,Al=t,Pl=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Nl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ma(a);if(null!==f){f.flags&=-257,va(f,a,l,0,t),1&f.mode&&ga(o,c,t),u=c;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(0===(1&t)){ga(o,c,t),gu();break e}u=Error(s(426))}else if(is&&1&l.mode){var v=ma(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),fs(ua(u,l));break e}}o=u=ua(u,l),4!==Ml&&(Ml=2),null===Fl?Fl=[o]:Fl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(0,u,t));break e;case 1:l=u;var y=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===$l||!$l.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(o,l,t));break e}}o=o.return}while(null!==o)}wu(n)}catch(w){t=w,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function fu(){var e=kl.current;return kl.current=Jo,null===e?Jo:e}function gu(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Ll||0===(268435455&Dl)&&0===(268435455&jl)||au(Ll,Nl)}function mu(e,t){var n=xl;xl|=2;var r=fu();for(Ll===e&&Nl===t||(ql=null,du(e,t));;)try{vu();break}catch(i){pu(e,i)}if(Is(),xl=n,kl.current=r,null!==Pl)throw Error(s(261));return Ll=null,Nl=0,Ml}function vu(){for(;null!==Pl;)_u(Pl)}function yu(){for(;null!==Pl&&!Qe();)_u(Pl)}function _u(e){var t=Cl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?wu(e):Pl=t,Il.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Rl)))return void(Pl=n)}else{if(null!==(n=Ga(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ml=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ml&&(Ml=5)}function bu(e,t,n){var r=_t,i=Tl.transition;try{Tl.transition=null,_t=1,function(e,t,n,r){do{Eu()}while(null!==Gl);if(0!==(6&xl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Ll&&(Pl=Ll=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Lu(tt,(function(){return Eu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var a=_t;_t=1;var l=xl;xl|=4,Il.current=null,function(e,t){if(ei=Wt,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++c===i&&(l=a),p===o&&++h===r&&(u=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(b){Su(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}g=tl,tl=!1}(e,n),ml(n,e),fr(ti),Wt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Ye(),xl=l,_t=a,Tl.transition=o}else e.current=n;if(Kl&&(Kl=!1,Gl=e,Ql=i),o=e.pendingLanes,0===o&&($l=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&Ql)&&0!==e.tag&&Eu(),o=e.pendingLanes,0!==(1&o)?e===Xl?Yl++:(Yl=0,Xl=e):Yl=0,Bi()}(e,t,n,r)}finally{Tl.transition=i,_t=r}return null}function Eu(){if(null!==Gl){var e=wt(Ql),t=Tl.transition,n=_t;try{if(Tl.transition=null,_t=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Ql=0,0!==(6&xl))throw Error(s(331));var i=xl;for(xl|=4,Ja=e.current;null!==Ja;){var o=Ja,a=o.child;if(0!==(16&Ja.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Ja=c;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ja=d;else for(;null!==Ja;){var p=(h=Ja).sibling,f=h.return;if(sl(h),h===c){Ja=null;break}if(null!==p){p.return=f,Ja=p;break}Ja=f}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Ja=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(o=Ja).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ja=y;break e}Ja=o.return}}var _=e.current;for(Ja=_;null!==Ja;){var w=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Ja=w;else e:for(a=_;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){Su(l,l.return,E)}if(l===a){Ja=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Ja=b;break e}Ja=l.return}}if(xl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{_t=n,Tl.transition=t}}return!1}function Cu(e,t,n){e=Fs(e,t=pa(0,t=ua(n,t),1),1),t=eu(),null!==e&&(vt(e,1,t),ru(e,t))}function Su(e,t,n){if(3===e.tag)Cu(e,e,n);else for(;null!==t;){if(3===t.tag){Cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$l||!$l.has(r))){t=Fs(t,e=fa(t,e=ua(n,e),1),1),e=eu(),null!==t&&(vt(t,1,e),ru(t,e));break}}t=t.return}}function ku(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Ll===e&&(Nl&n)===n&&(4===Ml||3===Ml&&(130023424&Nl)===Nl&&500>Xe()-zl?du(e,0):Ul|=n),ru(e,t)}function Iu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Ms(e,t))&&(vt(e,t,n),ru(e,n))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Iu(e,n)}function xu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Iu(e,n)}function Lu(e,t){return Ke(e,t)}function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nu(e,t,n,r){return new Pu(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ou(e,t){var n=e.alternate;return null===n?((n=Nu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mu(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Ru(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case C:return Au(n.children,i,o,t);case S:a=8,i|=8;break;case k:return(e=Nu(12,n,t,2|i)).elementType=k,e.lanes=o,e;case L:return(e=Nu(13,n,t,i)).elementType=L,e.lanes=o,e;case P:return(e=Nu(19,n,t,i)).elementType=P,e.lanes=o,e;case O:return Du(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case T:a=9;break e;case x:a=11;break e;case N:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Nu(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Au(e,t,n,r){return(e=Nu(7,e,r,t)).lanes=n,e}function Du(e,t,n,r){return(e=Nu(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function ju(e,t,n){return(e=Nu(6,e,null,t)).lanes=n,e}function Uu(e,t,n){return(t=Nu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vu(e,t,n,r,i,s,o,a,l){return e=new Fu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Nu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function zu(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Ai(e,n,t)}return t}function Bu(e,t,n,r,i,s,o,a,l){return(e=Vu(n,r,!0,e,0,s,0,a,l)).context=zu(null),n=e.current,(s=Us(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,Fs(n,s,i),e.current.lanes=i,vt(e,i,r),ru(e,r),e}function qu(e,t,n,r){var i=t.current,s=eu(),o=tu(i);return n=zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fs(i,t,o))&&(nu(e,i,o,s),Vs(e,i,o)),o}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $u(e,t){Hu(e,t),(e=e.alternate)&&Hu(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Li.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:La(t),ps();break;case 5:Xs(t);break;case 1:Ri(t.type)&&Di(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(Ii(Zs,1&Zs.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ii(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Wa(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,is&&0!==(1048576&t.flags)&&Zi(t,$i,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Ni(t,xi.current);Ls(t,n),i=mo(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Di(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ds(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=xa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ru(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===N)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ia(null,t,r,e,n);break e;case 1:t=Ta(null,t,r,e,n);break e;case 11:t=ba(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(La(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,js(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ui(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=bs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Wa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&us(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return ja(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ba(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ii(Es,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Li.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Us(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),xs(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),xs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ls(t,n),r=r(i=Ps(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ea(e,t,r,i=na(r.type,i),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Ri(r)?(e=!0,Di(t)):e=!1,Ls(t,n),oa(t,r,i),la(t,r,i,n),xa(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Sa(e,t,n)}throw Error(s(156,t.tag))};var Ku="function"===typeof reportError?reportError:function(e){console.error(e)};function Gu(e){this._internalRoot=e}function Qu(e){this._internalRoot=e}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function Zu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wu(o);a.call(e)}}qu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wu(o);s.call(e)}}var o=Bu(t,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=o,e[fi]=o.current,Br(8===e.nodeType?e.parentNode:e),cu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wu(l);a.call(e)}}var l=Vu(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[fi]=l.current,Br(8===e.nodeType?e.parentNode:e),cu((function(){qu(t,l,n,r)})),l}(n,t,e,i,r);return Wu(o)}Qu.prototype.render=Gu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qu(e,t,null,null)},Qu.prototype.unmount=Gu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){qu(null,e,null,null)})),t[fi]=null}},Qu.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&jt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ru(t,Xe()),0===(6&xl)&&(Bl=Xe()+500,Bi()))}break;case 13:cu((function(){var t=Ms(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),$u(e,1)}},Et=function(e){if(13===e.tag){var t=Ms(e,134217728);if(null!==t)nu(t,e,134217728,eu());$u(e,134217728)}},Ct=function(e){if(13===e.tag){var t=tu(e),n=Ms(e,t);if(null!==n)nu(n,e,t,eu());$u(e,t)}},St=function(){return _t},kt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Ee=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(s(90));K(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=uu,Le=cu;var ec={usingClientEntryPoint:!1,Events:[_i,wi,bi,Ie,Te,uu]},tc={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),st=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yu(e))throw Error(s(299));var n=!1,r="",i=Ku;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vu(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Gu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Xu(t))throw Error(s(200));return Zu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ku;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bu(t,null,e,1,null!=n?n:null,i,0,o,a),e[fi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qu(t)},t.render=function(e,t,n){if(!Xu(t))throw Error(s(200));return Zu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(s(40));return!!e._reactRootContainer&&(cu((function(){Zu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,s=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e){var t=(0,i.useState)(e.count),n=r(t,2),s=n[0],o=n[1],a=(0,i.useState)(e.size),l=r(a,2),u=l[0],c=l[1],h=(0,i.useState)(e.char),d=r(h,2),p=d[0],f=d[1],g=(0,i.useState)(e.color),m=r(g,2),v=m[0],y=m[1],_=(0,i.useState)(e.activeColor),w=r(_,2),b=w[0],E=w[1],C=(0,i.useState)(e.isHalf),S=r(C,2),k=S[0],I=S[1],T=(0,i.useState)(e.edit),x=r(T,2),L=x[0],P=x[1],N=(0,i.useState)(e.emptyIcon),R=r(N,2),O=R[0],M=R[1],A=(0,i.useState)(e.halfIcon),D=r(A,2),j=D[0],U=D[1],F=(0,i.useState)(e.filledIcon),V=r(F,2),z=V[0],B=V[1],q=(0,i.useState)(e.a11y),W=r(q,2),H=W[0],$=W[1];return[{count:s,size:u,char:p,color:v,activeColor:b,isHalf:k,edit:L,emptyIcon:O,halfIcon:j,filledIcon:z,a11y:H},function(e){o(e.count),c(e.size),f(e.char),y(e.color),E(e.activeColor),I(e.isHalf),P(e.edit),M(e.emptyIcon),U(e.halfIcon),B(e.filledIcon),$(e.a11y)}]};var i=n(43)},105:(e,t,n)=>{"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,s=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(43),s=u(i),o=u(n(173)),a=u(n(764)),l=u(n(992));function u(e){return e&&e.__esModule?e:{default:e}}var c={overflow:"hidden",position:"relative"};function h(e,t){return"\n    .react-stars-"+t+":before {\n      position: absolute;\n      overflow: hidden;\n      display: block;\n      z-index: 1;\n      top: 0; left: 0;\n      width: 50%;\n      content: attr(data-forhalf);\n      color: "+e+";\n  }"}function d(e){var t=(0,i.useState)(""),n=r(t,2),o=n[0],u=n[1],d=(0,i.useState)(0),p=r(d,2),f=p[0],g=p[1],m=(0,i.useState)([]),v=r(m,2),y=v[0],_=v[1],w=(0,i.useState)(!1),b=r(w,2),E=b[0],C=b[1],S=(0,a.default)(e),k=r(S,2),I=k[0],T=k[1],x=(0,i.useState)(0),L=r(x,2),P=L[0],N=L[1],R=(0,i.useState)(!1),O=r(R,2),M=O[0],A=O[1],D=(0,i.useState)(""),j=r(D,2),U=j[0],F=j[1];function V(e){"undefined"===typeof e&&(e=I.isHalf?Math.floor(f):Math.round(f));for(var t=[],n=0;n<I.count;n++)t.push({active:n<=e-1});return t}function z(e){if(I.edit){var t=Number(e.currentTarget.getAttribute("data-index"));if(I.isHalf){var n=B(e);A(n),n&&(t+=1),N(t)}else t+=1;!function(e){var t=y.filter((function(e){return e.active}));e!==t.length&&_(V(e))}(t)}}function B(e){var t=e.target.getBoundingClientRect(),n=e.clientX-t.left;return(n=Math.round(Math.abs(n)))>t.width/2}function q(){I.edit&&(W(f),_(V()))}function W(e){I.isHalf&&(A(function(e){return e%1===0}(e)),N(Math.floor(e)))}function H(e){if(I.edit){var t=Number(e.currentTarget.getAttribute("data-index")),n=void 0;if(I.isHalf){var r=B(e);A(r),r&&(t+=1),n=r?t:t+.5,N(t)}else n=t+=1;$(n)}}function $(t){t!==f&&(_(V(t)),g(t),e.onChange(t))}return(0,i.useEffect)((function(){var t,n;!function(){var t="react-stars";F(e.classNames+" "+t)}(),t=e.value,n=e.count,g(t<0||t>n?0:t),_(V(e.value)),T(e),u((Math.random()+"").replace(".","")),C(function(e){return!e.isHalf&&e.emptyIcon&&e.filledIcon||e.isHalf&&e.emptyIcon&&e.halfIcon&&e.filledIcon}(e)),N(Math.floor(e.value)),A(e.isHalf&&e.value%1<.5)}),[]),s.default.createElement("div",{className:"react-stars-wrapper-"+o,style:{display:"flex"}},s.default.createElement("div",{tabIndex:I.a11y&&I.edit?0:null,"aria-label":"add rating by typing an integer from 0 to 5 or pressing arrow keys",onKeyDown:function(e){if(I.a11y||I.edit){var t=e.key,n=f,r=Number(t);r?Number.isInteger(r)&&r>0&&r<=I.count&&(n=r):("ArrowUp"===t||"ArrowRight"===t)&&n<I.count?(e.preventDefault(),n+=I.isHalf?.5:1):("ArrowDown"===t||"ArrowLeft"===t)&&n>.5&&(e.preventDefault(),n-=I.isHalf?.5:1),W(n),$(n)}},className:U,style:c},I.isHalf&&function(){return s.default.createElement("style",{dangerouslySetInnerHTML:{__html:E?(e=I.activeColor,"\n          span.react-stars-half > * {\n          color: "+e+";\n      }"):h(I.activeColor,o)}});var e}(),y.map((function(e,t){return s.default.createElement(l.default,{key:t,index:t,active:e.active,config:I,onMouseOver:z,onMouseLeave:q,onClick:H,halfStarHidden:M,halfStarAt:P,isUsingIcons:E,uniqueness:o})})),s.default.createElement("p",{style:{position:"absolute",left:"-200rem"},role:"status"},f)))}d.propTypes={classNames:o.default.string,edit:o.default.bool,half:o.default.bool,value:o.default.number,count:o.default.number,char:o.default.string,size:o.default.number,color:o.default.string,activeColor:o.default.string,emptyIcon:o.default.element,halfIcon:o.default.element,filledIcon:o.default.element,a11y:o.default.bool},d.defaultProps={edit:!0,half:!1,value:0,count:5,char:"\u2605",size:15,color:"gray",activeColor:"#ffd700",a11y:!0,onChange:function(){}},t.A=d},992:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=e.index,n=e.active,i=e.config,s=e.onMouseOver,l=e.onMouseLeave,u=e.onClick,c=e.halfStarHidden,h=e.halfStarAt,d=e.isUsingIcons,p=e.uniqueness,f=i.color,g=i.activeColor,m=i.size,v=i.char,y=i.isHalf,_=i.edit,w=i.halfIcon,b=i.emptyIcon,E=i.filledIcon,C="",S=!1;y&&!c&&h===t&&(C=d?"react-stars-half":"react-stars-"+p,S=!0);var k=r({},a,{color:n?g:f,cursor:_?"pointer":"default",fontSize:m+"px"});return o.default.createElement("span",{className:C,style:k,key:t,"data-index":t,"data-forhalf":E?t:v,onMouseOver:s,onMouseMove:s,onMouseLeave:l,onClick:u},d?n?E:!n&&S?w:b:v)};var i,s=n(43),o=(i=s)&&i.__esModule?i:{default:i};var a={position:"relative",overflow:"hidden",cursor:"pointer",display:"block",float:"left"}},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=_.prototype=new y;w.constructor=_,g(w,v.prototype),w.isPureReactComponent=!0;var b=Array.isArray,E=Object.prototype.hasOwnProperty,C={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:C.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function L(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+x(l,0):s,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),L(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",b(e))for(var u=0;u<e.length;u++){var c=s+x(a=e[u],u);l+=L(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=L(a=a.value,t,i,c=s+x(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return L(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},M={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:C};function A(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=A,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=C.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)E.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=A,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,p=3,f=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function b(e){if(m=!1,w(e),!g)if(null!==r(u))g=!0,O(E);else{var t=r(c);null!==t&&M(b,t.startTime-e)}}function E(e,n){g=!1,m&&(m=!1,y(I),I=-1),f=!0;var s=p;try{for(w(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!L());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),w(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&M(b,h.startTime-n),l=!1}return l}finally{d=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,S=!1,k=null,I=-1,T=5,x=-1;function L(){return!(t.unstable_now()-x<T)}function P(){if(null!==k){var e=t.unstable_now();x=e;var n=!0;try{n=k(!0,e)}finally{n?C():(S=!1,k=null)}}else S=!1}if("function"===typeof _)C=function(){_(P)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,R=N.port2;N.port1.onmessage=P,C=function(){R.postMessage(null)}}else C=function(){v(P,0)};function O(e){k=e,S||(S=!0,C())}function M(e,n){I=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,O(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(m?(y(I),I=-1):m=!0,M(b,s-o))):(e.sortIndex=a,n(u,e),g||f||(g=!0,O(E))),e},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t=n(43),r=n.t(t,2),i=n(391),s=n(950),o=n.t(s,2);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(t,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,c=s.history,f=e.Pop,g=null,m=v();function v(){return(c.state||{idx:null}).idx}function y(){f=e.Pop;let t=v(),n=null==t?null:t-m;m=t,g&&g({action:f,location:w.location,delta:n})}function _(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,c.replaceState(a({},c.state,{idx:m}),""));let w={get action(){return f},get location(){return t(s,c)},listen(e){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(l,y),g=e,()=>{s.removeEventListener(l,y),g=null}},createHref:e=>n(s,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;let i=d(w.location,t,n);r&&r(i,t),m=v()+1;let a=h(i,m),l=w.createHref(i);try{c.pushState(a,"",l)}catch(Ky){if(Ky instanceof DOMException&&"DataCloneError"===Ky.name)throw Ky;s.location.assign(l)}o&&g&&g({action:f,location:w.location,delta:1})},replace:function(t,n){f=e.Replace;let i=d(w.location,t,n);r&&r(i,t),m=v();let s=h(i,m),a=w.createHref(i);c.replaceState(s,"",a),o&&g&&g({action:f,location:w.location,delta:0})},go:e=>c.go(e)};return w}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,r){let i=R(("string"===typeof t?f(t):t).pathname||"/",n);if(null==i)return null;let s=_(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=N(i);o=L(s[a],e,r)}return o}function _(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=j([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),_(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:x(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)})),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=w(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,E=3,C=2,S=1,k=10,I=-2,T=e=>"*"===e;function x(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=I),t&&(r+=C),n.filter((e=>!T(e))).reduce(((e,t)=>e+(b.test(t)?E:""===t?S:k)),r)}function L(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,u="/"===s?t:t.slice(s.length)||"/",c=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),h=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),o.push({params:i,pathname:j([s,c.pathname]),pathnameBase:U(j([s,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(s=j([s,c.pathnameBase]))}return o}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function N(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Ky){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Ky+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function O(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function A(e,t){let n=M(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function D(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=a({},e),u(!i.pathname||!i.pathname.includes("?"),O("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),O("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),O("#","search","hash",i)));let s,o=""===e||""===i.pathname,l=o?"/":i.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:F(r),hash:V(i)}}(i,s),h=l&&"/"!==l&&l.endsWith("/"),d=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const j=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const H=t.createContext(null);const $=t.createContext(null);const K=t.createContext(null);const G=t.createContext(null);const Q=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=t.createContext(null);function X(){return null!=t.useContext(G)}function J(){return X()||u(!1),t.useContext(G).location}function Z(e){t.useContext(K).static||t.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=t.useContext(Q);return e?function(){let{router:e}=ce(le.UseNavigateStable),n=de(ue.UseNavigateStable),r=t.useRef(!1);return Z((()=>{r.current=!0})),t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,W({fromRouteId:n},i)))}),[e,n])}():function(){X()||u(!1);let e=t.useContext(H),{basename:n,future:r,navigator:i}=t.useContext(K),{matches:s}=t.useContext(Q),{pathname:o}=J(),a=JSON.stringify(A(s,r.v7_relativeSplatPath)),l=t.useRef(!1);return Z((()=>{l.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void i.go(t);let s=D(t,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==n&&(s.pathname="/"===s.pathname?n:j([n,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[n,i,a,o,e])}()}function te(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(K),{matches:s}=t.useContext(Q),{pathname:o}=J(),a=JSON.stringify(A(s,i.v7_relativeSplatPath));return t.useMemo((()=>D(e,JSON.parse(a),o,"path"===r)),[e,a,o,r])}function ne(n,r,i,s){X()||u(!1);let{navigator:o}=t.useContext(K),{matches:a}=t.useContext(Q),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,p=J();if(r){var g;let e="string"===typeof r?f(r):r;"/"===h||(null==(g=e.pathname)?void 0:g.startsWith(h))||u(!1),d=e}else d=p;let m=d.pathname||"/",y=m;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=v(n,{pathname:y});let w=ae(_&&_.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:j([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:j([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return r&&w?t.createElement(G.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:e.Pop}},w):w}function re(){let e=function(){var e;let n=t.useContext(Y),r=he(ue.UseRouteError),i=de(ue.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,null)}const ie=t.createElement(re,null);class se extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(Q.Provider,{value:this.props.routeContext},t.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:n,match:r,children:i}=e,s=t.useContext(H);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Q.Provider,{value:n},i)}function ae(e,n,r,i){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var o;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(o=i)&&o.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let a=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,u=!1,d=null,p=null;var f;r&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||ie,c&&(h<0&&0===s?(f="route-fallback",!1||pe[f]||(pe[f]=!0),u=!0,p=null):h===s&&(u=!0,p=i.route.hydrateFallbackElement||null)));let g=n.concat(a.slice(0,s+1)),m=()=>{let n;return n=o?d:u?p:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(oe,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?t.createElement(se,{location:r.location,revalidation:r.revalidation,component:d,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function ce(e){let n=t.useContext(H);return n||u(!1),n}function he(e){let n=t.useContext($);return n||u(!1),n}function de(e){let n=function(){let e=t.useContext(Q);return e||u(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||u(!1),r.route.id}const pe={};r.startTransition;function fe(e){u(!1)}function ge(n){let{basename:r="/",children:i=null,location:s,navigationType:o=e.Pop,navigator:a,static:l=!1,future:c}=n;X()&&u(!1);let h=r.replace(/^\/*/,"/"),d=t.useMemo((()=>({basename:h,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},c)})),[h,c,a,l]);"string"===typeof s&&(s=f(s));let{pathname:p="/",search:g="",hash:m="",state:v=null,key:y="default"}=s,_=t.useMemo((()=>{let e=R(p,h);return null==e?null:{location:{pathname:e,search:g,hash:m,state:v,key:y},navigationType:o}}),[h,p,g,m,v,y,o]);return null==_?null:t.createElement(K.Provider,{value:d},t.createElement(G.Provider,{children:i,value:_}))}function me(e){let{children:t,location:n}=e;return ne(ve(t),n)}new Promise((()=>{}));t.Component;function ve(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let s=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,ve(e.props.children,s));e.type!==fe&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ve(e.props.children,s)),r.push(o)})),r}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}function _e(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const we=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(NS){}new Map;const be=r.startTransition;o.flushSync,r.useId;function Ee(e){let{basename:n,children:r,future:i,window:s}=e,o=t.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return d("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let l=o.current,[u,c]=t.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},f=t.useCallback((e=>{h&&be?be((()=>c(e))):c(e)}),[c,h]);return t.useLayoutEffect((()=>l.listen(f)),[l,f]),t.createElement(ge,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:l,future:i})}const Ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Se=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ke=t.forwardRef((function(e,n){let r,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:h,preventScrollReset:d,viewTransition:f}=e,g=_e(e,we),{basename:m}=t.useContext(K),v=!1;if("string"===typeof h&&Se.test(h)&&(r=h,Ce))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=R(t.pathname,m);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(NS){}let y=function(e,n){let{relative:r}=void 0===n?{}:n;X()||u(!1);let{basename:i,navigator:s}=t.useContext(K),{hash:o,pathname:a,search:l}=te(e,{relative:r}),c=a;return"/"!==i&&(c="/"===a?i:j([i,a])),s.createHref({pathname:c,search:l,hash:o})}(h,{relative:s}),_=function(e,n){let{target:r,replace:i,state:s,preventScrollReset:o,relative:a,viewTransition:l}=void 0===n?{}:n,u=ee(),c=J(),h=te(e,{relative:a});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:p(c)===p(h);u(e,{replace:n,state:s,preventScrollReset:o,relative:a,viewTransition:l})}}),[c,u,h,i,s,r,e,o,a,l])}(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});return t.createElement("a",ye({},g,{href:r||y,onClick:v||o?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:n,target:c}))}));var Ie,Te;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ie||(Ie={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));var xe,Le,Pe=n(579);function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Re(e){var t=function(e,t){if("object"!=Ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ne(t)?t:t+""}function Oe(e,t,n){return(t=Re(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ae=(Le||(Le=1,xe=function(e,t,n,r,i,s,o,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,s,o,a],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}),xe),De=Me(Ae),je=(0,t.createContext)(null);function Ue(e,t,n,r){var i,s,o={};return i=e,s=(e,i)=>{var s=n[i];s!==t[i]&&(o[i]=s,e(r,s))},Object.keys(i).forEach((e=>s(i[e],e))),o}function Fe(e,t,n){var r,i,s,o=(r=n,i=function(n,r,i){return"function"===typeof e[i]&&n.push(google.maps.event.addListener(t,r,e[i])),n},s=[],Object.keys(r).reduce((function(e,t){return i(e,r[t],t)}),s));return o}function Ve(e){google.maps.event.removeListener(e)}function ze(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(Ve)}function Be(e){var{updaterMap:t,eventMap:n,prevProps:r,nextProps:i,instance:s}=e,o=Fe(i,s,n);return Ue(t,r,i,s),o}var qe={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},We={extraMapTypes(e,t){t.forEach((function(t,n){e.mapTypes.set(String(n),t)}))},center(e,t){e.setCenter(t)},clickableIcons(e,t){e.setClickableIcons(t)},heading(e,t){e.setHeading(t)},mapTypeId(e,t){e.setMapTypeId(t)},options(e,t){e.setOptions(t)},streetView(e,t){e.setStreetView(t)},tilt(e,t){e.setTilt(t)},zoom(e,t){e.setZoom(t)}};(0,t.memo)((function(e){var{children:n,options:r,id:i,mapContainerStyle:s,mapContainerClassName:o,center:a,onClick:l,onDblClick:u,onDrag:c,onDragEnd:h,onDragStart:d,onMouseMove:p,onMouseOut:f,onMouseOver:g,onMouseDown:m,onMouseUp:v,onRightClick:y,onCenterChanged:_,onLoad:w,onUnmount:b}=e,[E,C]=(0,t.useState)(null),S=(0,t.useRef)(null),[k,I]=(0,t.useState)(null),[T,x]=(0,t.useState)(null),[L,P]=(0,t.useState)(null),[N,R]=(0,t.useState)(null),[O,M]=(0,t.useState)(null),[A,D]=(0,t.useState)(null),[j,U]=(0,t.useState)(null),[F,V]=(0,t.useState)(null),[z,B]=(0,t.useState)(null),[q,W]=(0,t.useState)(null),[H,$]=(0,t.useState)(null),[K,G]=(0,t.useState)(null);return(0,t.useEffect)((()=>{r&&null!==E&&E.setOptions(r)}),[E,r]),(0,t.useEffect)((()=>{null!==E&&"undefined"!==typeof a&&E.setCenter(a)}),[E,a]),(0,t.useEffect)((()=>{E&&u&&(null!==T&&google.maps.event.removeListener(T),x(google.maps.event.addListener(E,"dblclick",u)))}),[u]),(0,t.useEffect)((()=>{E&&h&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(E,"dragend",h)))}),[h]),(0,t.useEffect)((()=>{E&&d&&(null!==N&&google.maps.event.removeListener(N),R(google.maps.event.addListener(E,"dragstart",d)))}),[d]),(0,t.useEffect)((()=>{E&&m&&(null!==O&&google.maps.event.removeListener(O),M(google.maps.event.addListener(E,"mousedown",m)))}),[m]),(0,t.useEffect)((()=>{E&&p&&(null!==A&&google.maps.event.removeListener(A),D(google.maps.event.addListener(E,"mousemove",p)))}),[p]),(0,t.useEffect)((()=>{E&&f&&(null!==j&&google.maps.event.removeListener(j),U(google.maps.event.addListener(E,"mouseout",f)))}),[f]),(0,t.useEffect)((()=>{E&&g&&(null!==F&&google.maps.event.removeListener(F),V(google.maps.event.addListener(E,"mouseover",g)))}),[g]),(0,t.useEffect)((()=>{E&&v&&(null!==z&&google.maps.event.removeListener(z),B(google.maps.event.addListener(E,"mouseup",v)))}),[v]),(0,t.useEffect)((()=>{E&&y&&(null!==q&&google.maps.event.removeListener(q),W(google.maps.event.addListener(E,"rightclick",y)))}),[y]),(0,t.useEffect)((()=>{E&&l&&(null!==H&&google.maps.event.removeListener(H),$(google.maps.event.addListener(E,"click",l)))}),[l]),(0,t.useEffect)((()=>{E&&c&&(null!==K&&google.maps.event.removeListener(K),G(google.maps.event.addListener(E,"drag",c)))}),[c]),(0,t.useEffect)((()=>{E&&_&&(null!==k&&google.maps.event.removeListener(k),I(google.maps.event.addListener(E,"center_changed",_)))}),[l]),(0,t.useEffect)((()=>{var e=null===S.current?null:new google.maps.Map(S.current,r);return C(e),null!==e&&w&&w(e),()=>{null!==e&&b&&b(e)}}),[]),(0,Pe.jsx)("div",{id:i,ref:S,style:s,className:o,children:(0,Pe.jsx)(je.Provider,{value:E,children:null!==E?n:null})})}));class He extends t.PureComponent{constructor(){super(...arguments),Oe(this,"state",{map:null}),Oe(this,"registeredEvents",[]),Oe(this,"mapRef",null),Oe(this,"getInstance",(()=>null===this.mapRef?null:new google.maps.Map(this.mapRef,this.props.options))),Oe(this,"panTo",(e=>{var t=this.getInstance();t&&t.panTo(e)})),Oe(this,"setMapCallback",(()=>{null!==this.state.map&&this.props.onLoad&&this.props.onLoad(this.state.map)})),Oe(this,"getRef",(e=>{this.mapRef=e}))}componentDidMount(){var e=this.getInstance();this.registeredEvents=Be({updaterMap:We,eventMap:qe,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{map:e}}),this.setMapCallback)}componentDidUpdate(e){null!==this.state.map&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:We,eventMap:qe,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){null!==this.state.map&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),ze(this.registeredEvents))}render(){return(0,Pe.jsx)("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:(0,Pe.jsx)(je.Provider,{value:this.state.map,children:null!==this.state.map?this.props.children:null})})}}function $e(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function Ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){$e(s,r,i,o,a,"next",e)}function a(e){$e(s,r,i,o,a,"throw",e)}o(void 0)}))}}function Ge(e){var{googleMapsApiKey:t,googleMapsClientId:n,version:r="weekly",language:i,region:s,libraries:o,channel:a,mapIds:l,authReferrerPolicy:u}=e,c=[];return De(t&&n||!(t&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?c.push("key=".concat(t)):n&&c.push("client=".concat(n)),r&&c.push("v=".concat(r)),i&&c.push("language=".concat(i)),s&&c.push("region=".concat(s)),o&&o.length&&c.push("libraries=".concat(o.sort().join(","))),a&&c.push("channel=".concat(a)),l&&l.length&&c.push("map_ids=".concat(l.join(","))),u&&c.push("auth_referrer_policy=".concat(u)),c.push("loading=async"),c.push("callback=initMap"),"https://maps.gomaps.pro/maps/api/js?".concat(c.join("&"))}var Qe="undefined"!==typeof document;function Ye(e){var{url:t,id:n,nonce:r}=e;return Qe?new Promise((function(e,i){var s=document.getElementById(n),o=window;if(s){var a=s.getAttribute("data-state");if(s.src===t&&"error"!==a){if("ready"===a)return e(n);var l=o.initMap,u=s.onerror;return o.initMap=function(){l&&l(),e(n)},void(s.onerror=function(e){u&&u(e),i(e)})}s.remove()}var c=document.createElement("script");c.type="text/javascript",c.src=t,c.id=n,c.async=!0,c.nonce=r||"",c.onerror=function(e){c.setAttribute("data-state","error"),i(e)},o.initMap=function(){c.setAttribute("data-state","ready"),e(n)},document.head.appendChild(c)})).catch((e=>{throw console.error("injectScript error: ",e),e})):Promise.reject(new Error("document is undefined"))}function Xe(e){var t=e.href;return!(!t||0!==t.indexOf("https://fonts.googleapis.com/css?family=Roboto")&&0!==t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text"))||("style"===e.tagName.toLowerCase()&&e.styleSheet&&e.styleSheet.cssText&&0===e.styleSheet.cssText.replace("\r\n","").indexOf(".gm-style")?(e.styleSheet.cssText="",!0):"style"===e.tagName.toLowerCase()&&e.innerHTML&&0===e.innerHTML.replace("\r\n","").indexOf(".gm-style")?(e.innerHTML="",!0):"style"===e.tagName.toLowerCase()&&!e.styleSheet&&!e.innerHTML)}function Je(){var e=document.getElementsByTagName("head")[0];if(e){var t=e.insertBefore.bind(e);e.insertBefore=function(n,r){return Xe(n)||Reflect.apply(t,e,[n,r]),n};var n=e.appendChild.bind(e);e.appendChild=function(t){return Xe(t)||Reflect.apply(n,e,[t]),t}}}var Ze=!1;function et(){return(0,Pe.jsx)("div",{children:"Loading..."})}var tt,nt={id:"script-loader",version:"weekly"};class rt extends t.PureComponent{constructor(){super(...arguments),Oe(this,"check",(0,t.createRef)()),Oe(this,"state",{loaded:!1}),Oe(this,"cleanupCallback",(()=>{delete window.google.maps,this.injectScript()})),Oe(this,"isCleaningUp",Ke((function*(){return new Promise((function(e){if(Ze){if(Qe)var t=window.setInterval((function(){Ze||(window.clearInterval(t),e())}),1)}else e()}))}))),Oe(this,"cleanup",(()=>{Ze=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter((function(e){return"string"===typeof e.src&&e.src.includes("maps.googleapis")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("link")).filter((function(e){return"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"===e.href})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("style")).filter((function(e){return void 0!==e.innerText&&e.innerText.length>0&&e.innerText.includes(".gm-")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))})),Oe(this,"injectScript",(()=>{this.props.preventGoogleFontsLoading&&Je(),De(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id),Ye({id:this.props.id,nonce:this.props.nonce,url:Ge(this.props)}).then((()=>{this.props.onLoad&&this.props.onLoad(),this.setState((function(){return{loaded:!0}}))})).catch((e=>{this.props.onError&&this.props.onError(e),console.error("\n          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",") to <LoadScript />\n          Otherwise it is a Network issue.\n        "))}))}))}componentDidMount(){if(Qe){if(window.google&&window.google.maps&&!Ze)return void console.error("google api is already presented");this.isCleaningUp().then(this.injectScript).catch((function(e){console.error("Error at injecting script after cleaning up: ",e)}))}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Qe&&e.language!==this.props.language&&(this.cleanup(),this.setState((function(){return{loaded:!1}}),this.cleanupCallback))}componentWillUnmount(){if(Qe){this.cleanup();window.setTimeout((()=>{this.check.current||(delete window.google,Ze=!1)}),1),this.props.onUnmount&&this.props.onUnmount()}}render(){return(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)("div",{ref:this.check}),this.state.loaded?this.props.children:this.props.loadingElement||(0,Pe.jsx)(et,{})]})}}function it(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}Oe(rt,"defaultProps",nt);var st=["loadingElement","onLoad","onError","onUnmount","children"],ot=(0,Pe.jsx)(et,{});(0,t.memo)((function(e){var{loadingElement:n,onLoad:r,onError:i,onUnmount:s,children:o}=e,a=it(e,st),{isLoaded:l,loadError:u}=function(e){var{id:n=nt.id,version:r=nt.version,nonce:i,googleMapsApiKey:s,googleMapsClientId:o,language:a,region:l,libraries:u,preventGoogleFontsLoading:c,channel:h,mapIds:d,authReferrerPolicy:p}=e,f=(0,t.useRef)(!1),[g,m]=(0,t.useState)(!1),[v,y]=(0,t.useState)(void 0);(0,t.useEffect)((function(){return f.current=!0,()=>{f.current=!1}}),[]),(0,t.useEffect)((function(){Qe&&c&&Je()}),[c]),(0,t.useEffect)((function(){g&&De(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")}),[g]);var _=Ge({version:r,googleMapsApiKey:s,googleMapsClientId:o,language:a,region:l,libraries:u,channel:h,mapIds:d,authReferrerPolicy:p});(0,t.useEffect)((function(){function e(){f.current&&(m(!0),tt=_)}Qe&&(window.google&&window.google.maps&&tt===_?e():Ye({id:n,url:_,nonce:i}).then(e).catch((function(e){f.current&&y(e),console.warn("\n        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(s||"-",") or Client ID (").concat(o||"-",")\n        Otherwise it is a Network issue.\n      ")),console.error(e)})))}),[n,_,i]);var w=(0,t.useRef)();return(0,t.useEffect)((function(){w.current&&u!==w.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),w.current=u}),[u]),{isLoaded:g,loadError:v,url:_}}(a);return(0,t.useEffect)((function(){l&&"function"===typeof r&&r()}),[l,r]),(0,t.useEffect)((function(){u&&"function"===typeof i&&i(u)}),[u,i]),(0,t.useEffect)((function(){return()=>{s&&s()}}),[s]),l?o:n||ot}));"function"===typeof SuppressedError&&SuppressedError;var at;!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(at||(at={}));function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ct={},ht={options(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var{options:n,onLoad:r,onUnmount:i}=e,s=(0,t.useContext)(je),[o,a]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==o&&o.setMap(s)}),[s]),(0,t.useEffect)((()=>{n&&null!==o&&o.setOptions(n)}),[o,n]),(0,t.useEffect)((()=>{var e=new google.maps.TrafficLayer(ut(ut({},n),{},{map:s}));return a(e),r&&r(e),()=>{null!==o&&(i&&i(o),o.setMap(null))}}),[]),null}));class dt extends t.PureComponent{constructor(){super(...arguments),Oe(this,"state",{trafficLayer:null}),Oe(this,"setTrafficLayerCallback",(()=>{null!==this.state.trafficLayer&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)})),Oe(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(ut(ut({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:ht,eventMap:ct,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{trafficLayer:e}}),this.setTrafficLayerCallback)}componentDidUpdate(e){null!==this.state.trafficLayer&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:ht,eventMap:ct,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){null!==this.state.trafficLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),ze(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}Oe(dt,"contextType",je);(0,t.memo)((function(e){var{onLoad:n,onUnmount:r}=e,i=(0,t.useContext)(je),[s,o]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==s&&s.setMap(i)}),[i]),(0,t.useEffect)((()=>{var e=new google.maps.BicyclingLayer;return o(e),e.setMap(i),n&&n(e),()=>{null!==e&&(r&&r(e),e.setMap(null))}}),[]),null}));class pt extends t.PureComponent{constructor(){super(...arguments),Oe(this,"state",{bicyclingLayer:null}),Oe(this,"setBicyclingLayerCallback",(()=>{null!==this.state.bicyclingLayer&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))}))}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState((()=>({bicyclingLayer:e})),this.setBicyclingLayerCallback)}componentWillUnmount(){null!==this.state.bicyclingLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}Oe(pt,"contextType",je);(0,t.memo)((function(e){var{onLoad:n,onUnmount:r}=e,i=(0,t.useContext)(je),[s,o]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==s&&s.setMap(i)}),[i]),(0,t.useEffect)((()=>{var e=new google.maps.TransitLayer;return o(e),e.setMap(i),n&&n(e),()=>{null!==s&&(r&&r(s),s.setMap(null))}}),[]),null}));class ft extends t.PureComponent{constructor(){super(...arguments),Oe(this,"state",{transitLayer:null}),Oe(this,"setTransitLayerCallback",(()=>{null!==this.state.transitLayer&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))}))}componentDidMount(){var e=new google.maps.TransitLayer;this.setState((function(){return{transitLayer:e}}),this.setTransitLayerCallback)}componentWillUnmount(){null!==this.state.transitLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oe(ft,"contextType",je);var vt={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},yt={drawingMode(e,t){e.setDrawingMode(t)},options(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var{options:n,drawingMode:r,onCircleComplete:i,onMarkerComplete:s,onOverlayComplete:o,onPolygonComplete:a,onPolylineComplete:l,onRectangleComplete:u,onLoad:c,onUnmount:h}=e,d=(0,t.useContext)(je),[p,f]=(0,t.useState)(null),[g,m]=(0,t.useState)(null),[v,y]=(0,t.useState)(null),[_,w]=(0,t.useState)(null),[b,E]=(0,t.useState)(null),[C,S]=(0,t.useState)(null),[k,I]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==p&&p.setMap(d)}),[d]),(0,t.useEffect)((()=>{n&&null!==p&&p.setOptions(n)}),[p,n]),(0,t.useEffect)((()=>{null!==p&&p.setDrawingMode(null!==r&&void 0!==r?r:null)}),[p,r]),(0,t.useEffect)((()=>{p&&i&&(null!==g&&google.maps.event.removeListener(g),m(google.maps.event.addListener(p,"circlecomplete",i)))}),[p,i]),(0,t.useEffect)((()=>{p&&s&&(null!==v&&google.maps.event.removeListener(v),y(google.maps.event.addListener(p,"markercomplete",s)))}),[p,s]),(0,t.useEffect)((()=>{p&&o&&(null!==_&&google.maps.event.removeListener(_),w(google.maps.event.addListener(p,"overlaycomplete",o)))}),[p,o]),(0,t.useEffect)((()=>{p&&a&&(null!==b&&google.maps.event.removeListener(b),E(google.maps.event.addListener(p,"polygoncomplete",a)))}),[p,a]),(0,t.useEffect)((()=>{p&&l&&(null!==C&&google.maps.event.removeListener(C),S(google.maps.event.addListener(p,"polylinecomplete",l)))}),[p,l]),(0,t.useEffect)((()=>{p&&u&&(null!==k&&google.maps.event.removeListener(k),I(google.maps.event.addListener(p,"rectanglecomplete",u)))}),[p,u]),(0,t.useEffect)((()=>{De(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var e=new google.maps.drawing.DrawingManager(mt(mt({},n),{},{map:d}));return r&&e.setDrawingMode(r),i&&m(google.maps.event.addListener(e,"circlecomplete",i)),s&&y(google.maps.event.addListener(e,"markercomplete",s)),o&&w(google.maps.event.addListener(e,"overlaycomplete",o)),a&&E(google.maps.event.addListener(e,"polygoncomplete",a)),l&&S(google.maps.event.addListener(e,"polylinecomplete",l)),u&&I(google.maps.event.addListener(e,"rectanglecomplete",u)),f(e),c&&c(e),()=>{null!==p&&(g&&google.maps.event.removeListener(g),v&&google.maps.event.removeListener(v),_&&google.maps.event.removeListener(_),b&&google.maps.event.removeListener(b),C&&google.maps.event.removeListener(C),k&&google.maps.event.removeListener(k),h&&h(p),p.setMap(null))}}),[]),null}));class _t extends t.PureComponent{constructor(e){super(e),Oe(this,"registeredEvents",[]),Oe(this,"state",{drawingManager:null}),Oe(this,"setDrawingManagerCallback",(()=>{null!==this.state.drawingManager&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)})),De(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(mt(mt({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:yt,eventMap:vt,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{drawingManager:e}}),this.setDrawingManagerCallback)}componentDidUpdate(e){null!==this.state.drawingManager&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:yt,eventMap:vt,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){null!==this.state.drawingManager&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),ze(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oe(_t,"contextType",je);var Et={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Ct={animation(e,t){e.setAnimation(t)},clickable(e,t){e.setClickable(t)},cursor(e,t){e.setCursor(t)},draggable(e,t){e.setDraggable(t)},icon(e,t){e.setIcon(t)},label(e,t){e.setLabel(t)},map(e,t){e.setMap(t)},opacity(e,t){e.setOpacity(t)},options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},shape(e,t){e.setShape(t)},title(e,t){e.setTitle(t)},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},St={};(0,t.memo)((function(e){var{position:n,options:r,clusterer:i,noClustererRedraw:s,children:o,draggable:a,visible:l,animation:u,clickable:c,cursor:h,icon:d,label:p,opacity:f,shape:g,title:m,zIndex:v,onClick:y,onDblClick:_,onDrag:w,onDragEnd:b,onDragStart:E,onMouseOut:C,onMouseOver:S,onMouseUp:k,onMouseDown:I,onRightClick:T,onClickableChanged:x,onCursorChanged:L,onAnimationChanged:P,onDraggableChanged:N,onFlatChanged:R,onIconChanged:O,onPositionChanged:M,onShapeChanged:A,onTitleChanged:D,onVisibleChanged:j,onZindexChanged:U,onLoad:F,onUnmount:V}=e,z=(0,t.useContext)(je),[B,q]=(0,t.useState)(null),[W,H]=(0,t.useState)(null),[$,K]=(0,t.useState)(null),[G,Q]=(0,t.useState)(null),[Y,X]=(0,t.useState)(null),[J,Z]=(0,t.useState)(null),[ee,te]=(0,t.useState)(null),[ne,re]=(0,t.useState)(null),[ie,se]=(0,t.useState)(null),[oe,ae]=(0,t.useState)(null),[le,ue]=(0,t.useState)(null),[ce,he]=(0,t.useState)(null),[de,pe]=(0,t.useState)(null),[fe,ge]=(0,t.useState)(null),[me,ve]=(0,t.useState)(null),[ye,_e]=(0,t.useState)(null),[we,be]=(0,t.useState)(null),[Ee,Ce]=(0,t.useState)(null),[Se,ke]=(0,t.useState)(null),[Ie,Te]=(0,t.useState)(null),[xe,Le]=(0,t.useState)(null),[Ne,Re]=(0,t.useState)(null);(0,t.useEffect)((()=>{null!==B&&B.setMap(z)}),[z]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==B&&B.setOptions(r)}),[B,r]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==B&&B.setDraggable(a)}),[B,a]),(0,t.useEffect)((()=>{n&&null!==B&&B.setPosition(n)}),[B,n]),(0,t.useEffect)((()=>{"undefined"!==typeof l&&null!==B&&B.setVisible(l)}),[B,l]),(0,t.useEffect)((()=>{null===B||void 0===B||B.setAnimation(u)}),[B,u]),(0,t.useEffect)((()=>{B&&void 0!==c&&B.setClickable(c)}),[B,c]),(0,t.useEffect)((()=>{B&&void 0!==h&&B.setCursor(h)}),[B,h]),(0,t.useEffect)((()=>{B&&void 0!==d&&B.setIcon(d)}),[B,d]),(0,t.useEffect)((()=>{B&&void 0!==p&&B.setLabel(p)}),[B,p]),(0,t.useEffect)((()=>{B&&void 0!==f&&B.setOpacity(f)}),[B,f]),(0,t.useEffect)((()=>{B&&void 0!==g&&B.setShape(g)}),[B,g]),(0,t.useEffect)((()=>{B&&void 0!==m&&B.setTitle(m)}),[B,m]),(0,t.useEffect)((()=>{B&&void 0!==v&&B.setZIndex(v)}),[B,v]),(0,t.useEffect)((()=>{B&&_&&(null!==W&&google.maps.event.removeListener(W),H(google.maps.event.addListener(B,"dblclick",_)))}),[_]),(0,t.useEffect)((()=>{B&&b&&(null!==$&&google.maps.event.removeListener($),K(google.maps.event.addListener(B,"dragend",b)))}),[b]),(0,t.useEffect)((()=>{B&&E&&(null!==G&&google.maps.event.removeListener(G),Q(google.maps.event.addListener(B,"dragstart",E)))}),[E]),(0,t.useEffect)((()=>{B&&I&&(null!==Y&&google.maps.event.removeListener(Y),X(google.maps.event.addListener(B,"mousedown",I)))}),[I]),(0,t.useEffect)((()=>{B&&C&&(null!==J&&google.maps.event.removeListener(J),Z(google.maps.event.addListener(B,"mouseout",C)))}),[C]),(0,t.useEffect)((()=>{B&&S&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(B,"mouseover",S)))}),[S]),(0,t.useEffect)((()=>{B&&k&&(null!==ne&&google.maps.event.removeListener(ne),re(google.maps.event.addListener(B,"mouseup",k)))}),[k]),(0,t.useEffect)((()=>{B&&T&&(null!==ie&&google.maps.event.removeListener(ie),se(google.maps.event.addListener(B,"rightclick",T)))}),[T]),(0,t.useEffect)((()=>{B&&y&&(null!==oe&&google.maps.event.removeListener(oe),ae(google.maps.event.addListener(B,"click",y)))}),[y]),(0,t.useEffect)((()=>{B&&w&&(null!==le&&google.maps.event.removeListener(le),ue(google.maps.event.addListener(B,"drag",w)))}),[w]),(0,t.useEffect)((()=>{B&&x&&(null!==ce&&google.maps.event.removeListener(ce),he(google.maps.event.addListener(B,"clickable_changed",x)))}),[x]),(0,t.useEffect)((()=>{B&&L&&(null!==de&&google.maps.event.removeListener(de),pe(google.maps.event.addListener(B,"cursor_changed",L)))}),[L]),(0,t.useEffect)((()=>{B&&P&&(null!==fe&&google.maps.event.removeListener(fe),ge(google.maps.event.addListener(B,"animation_changed",P)))}),[P]),(0,t.useEffect)((()=>{B&&N&&(null!==me&&google.maps.event.removeListener(me),ve(google.maps.event.addListener(B,"draggable_changed",N)))}),[N]),(0,t.useEffect)((()=>{B&&R&&(null!==ye&&google.maps.event.removeListener(ye),_e(google.maps.event.addListener(B,"flat_changed",R)))}),[R]),(0,t.useEffect)((()=>{B&&O&&(null!==we&&google.maps.event.removeListener(we),be(google.maps.event.addListener(B,"icon_changed",O)))}),[O]),(0,t.useEffect)((()=>{B&&M&&(null!==Ee&&google.maps.event.removeListener(Ee),Ce(google.maps.event.addListener(B,"position_changed",M)))}),[M]),(0,t.useEffect)((()=>{B&&A&&(null!==Se&&google.maps.event.removeListener(Se),ke(google.maps.event.addListener(B,"shape_changed",A)))}),[A]),(0,t.useEffect)((()=>{B&&D&&(null!==Ie&&google.maps.event.removeListener(Ie),Te(google.maps.event.addListener(B,"title_changed",D)))}),[D]),(0,t.useEffect)((()=>{B&&j&&(null!==xe&&google.maps.event.removeListener(xe),Le(google.maps.event.addListener(B,"visible_changed",j)))}),[j]),(0,t.useEffect)((()=>{B&&U&&(null!==Ne&&google.maps.event.removeListener(Ne),Re(google.maps.event.addListener(B,"zindex_changed",U)))}),[U]),(0,t.useEffect)((()=>{var e=bt(bt(bt({},r||St),i?St:{map:z}),{},{position:n}),t=new google.maps.Marker(e);return i?i.addMarker(t,!!s):t.setMap(z),n&&t.setPosition(n),"undefined"!==typeof l&&t.setVisible(l),"undefined"!==typeof a&&t.setDraggable(a),"undefined"!==typeof c&&t.setClickable(c),"string"===typeof h&&t.setCursor(h),d&&t.setIcon(d),"undefined"!==typeof p&&t.setLabel(p),"undefined"!==typeof f&&t.setOpacity(f),g&&t.setShape(g),"string"===typeof m&&t.setTitle(m),"number"===typeof v&&t.setZIndex(v),_&&H(google.maps.event.addListener(t,"dblclick",_)),b&&K(google.maps.event.addListener(t,"dragend",b)),E&&Q(google.maps.event.addListener(t,"dragstart",E)),I&&X(google.maps.event.addListener(t,"mousedown",I)),C&&Z(google.maps.event.addListener(t,"mouseout",C)),S&&te(google.maps.event.addListener(t,"mouseover",S)),k&&re(google.maps.event.addListener(t,"mouseup",k)),T&&se(google.maps.event.addListener(t,"rightclick",T)),y&&ae(google.maps.event.addListener(t,"click",y)),w&&ue(google.maps.event.addListener(t,"drag",w)),x&&he(google.maps.event.addListener(t,"clickable_changed",x)),L&&pe(google.maps.event.addListener(t,"cursor_changed",L)),P&&ge(google.maps.event.addListener(t,"animation_changed",P)),N&&ve(google.maps.event.addListener(t,"draggable_changed",N)),R&&_e(google.maps.event.addListener(t,"flat_changed",R)),O&&be(google.maps.event.addListener(t,"icon_changed",O)),M&&Ce(google.maps.event.addListener(t,"position_changed",M)),A&&ke(google.maps.event.addListener(t,"shape_changed",A)),D&&Te(google.maps.event.addListener(t,"title_changed",D)),j&&Le(google.maps.event.addListener(t,"visible_changed",j)),U&&Re(google.maps.event.addListener(t,"zindex_changed",U)),q(t),F&&F(t),()=>{null!==W&&google.maps.event.removeListener(W),null!==$&&google.maps.event.removeListener($),null!==G&&google.maps.event.removeListener(G),null!==Y&&google.maps.event.removeListener(Y),null!==J&&google.maps.event.removeListener(J),null!==ee&&google.maps.event.removeListener(ee),null!==ne&&google.maps.event.removeListener(ne),null!==ie&&google.maps.event.removeListener(ie),null!==oe&&google.maps.event.removeListener(oe),null!==ce&&google.maps.event.removeListener(ce),null!==de&&google.maps.event.removeListener(de),null!==fe&&google.maps.event.removeListener(fe),null!==me&&google.maps.event.removeListener(me),null!==ye&&google.maps.event.removeListener(ye),null!==we&&google.maps.event.removeListener(we),null!==Ee&&google.maps.event.removeListener(Ee),null!==Ie&&google.maps.event.removeListener(Ie),null!==xe&&google.maps.event.removeListener(xe),null!==Ne&&google.maps.event.removeListener(Ne),V&&V(t),i?i.removeMarker(t,!!s):t&&t.setMap(null)}}),[]);var Oe=(0,t.useMemo)((()=>o?t.Children.map(o,(e=>{if(!(0,t.isValidElement)(e))return e;var n=e;return(0,t.cloneElement)(n,{anchor:B})})):null),[o,B]);return(0,Pe.jsx)(Pe.Fragment,{children:Oe})||null}));class kt extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[])}componentDidMount(){var e=this;return Ke((function*(){var t=bt(bt(bt({},e.props.options||St),e.props.clusterer?St:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(t),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=Be({updaterMap:Ct,eventMap:Et,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)}))()}componentDidUpdate(e){this.marker&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:Ct,eventMap:Et,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),ze(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?t.Children.map(this.props.children,(e=>{if(!(0,t.isValidElement)(e))return e;var n=e;return(0,t.cloneElement)(n,{anchor:this.marker})})):null;return e||null}}Oe(kt,"contextType",je);var It=function(){function e(t,n){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var n=t.getMaxZoom(),r=this.cluster.getBounds(),i=t.getMap();null!==i&&"fitBounds"in i&&i.fitBounds(r),this.timeOut=window.setTimeout((function(){var e=t.getMap();if(null!==e){"fitBounds"in e&&e.fitBounds(r);var i=e.getZoom()||0;null!==n&&i>n&&e.setZoom(n+1)}}),100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),null===(e=this.getPanes())||void 0===e||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();null!==t&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),null!==this.boundsChangedListener&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),null!==this.timeOut&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&null!==this.div&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=null!==e?"".concat(e.y,"px"):"0",this.div.style.left=null!==e?"".concat(e.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var e,t,n,r,i,s;if(this.div&&this.center){var o=null===this.sums||"undefined"===typeof this.sums.title||""===this.sums.title?this.cluster.getClusterer().getTitle():this.sums.title,a=this.backgroundPosition.split(" "),l=parseInt((null===(e=a[0])||void 0===e?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),u=parseInt((null===(t=a[1])||void 0===t?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),c=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(null!==c?"".concat(c.y,"px"):"0","; left: ").concat(null!==c?"".concat(c.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var h=document.createElement("img");h.alt=o,h.src=this.url,h.width=this.width,h.height=this.height,h.setAttribute("style","position: absolute; top: ".concat(u,"px; left: ").concat(l,"px")),this.cluster.getClusterer().enableRetinaIcons||(h.style.clip="rect(-".concat(u,"px, -").concat(l+this.width,"px, -").concat(u+this.height,", -").concat(l,")"));var d=document.createElement("div");d.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),(null===(n=this.sums)||void 0===n?void 0:n.text)&&(d.innerText="".concat(null===(r=this.sums)||void 0===r?void 0:r.text)),(null===(i=this.sums)||void 0===i?void 0:i.html)&&(d.innerHTML="".concat(null===(s=this.sums)||void 0===s?void 0:s.html)),this.div.innerHTML="",this.div.appendChild(h),this.div.appendChild(d),this.div.title=o,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),n=t[Math.min(t.length-1,Math.max(0,e.index-1))];n&&(this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className="".concat(this.clusterClassName," ").concat(n.className)),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0")},e.prototype.setCenter=function(e){this.center=e},e.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return null!==t&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},e}(),Tt=function(){function e(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new It(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=0,n=this.getMarkers();t<n.length;t++){var r=n[t].getPosition();r&&e.extend(r)}return e},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(e){var t,n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter&&(n=e.getPosition())){var r=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(r-1)+n.lat())/r,(this.center.lng()*(r-1)+n.lng())/r),this.calculateBounds()}}else(n=e.getPosition())&&(this.center=n,this.calculateBounds());e.isAdded=!0,this.markers.push(e);var i=this.markers.length,s=this.markerClusterer.getMaxZoom(),o=null===(t=this.map)||void 0===t?void 0:t.getZoom();if(null!==s&&"undefined"!==typeof o&&o>s)e.getMap()!==this.map&&e.setMap(this.map);else if(i<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(i===this.minClusterSize)for(var a=0,l=this.markers;a<l.length;a++){l[a].setMap(null)}else e.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(e){if(null!==this.bounds){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var e,t=this.markers.length,n=this.markerClusterer.getMaxZoom(),r=null===(e=this.map)||void 0===e?void 0:e.getZoom();null!==n&&"undefined"!==typeof r&&r>n||t<this.minClusterSize?this.clusterIcon.hide():(this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show())},e.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},e}();function xt(e,t){var n=e.length,r=n.toString().length,i=Math.min(r,t);return{text:n.toString(),index:i,title:""}}var Lt=[53,56,66,78,90],Pt=function(){function e(t,n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,void 0!==r.zoomOnClick&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,void 0!==r.averageCenter&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,void 0!==r.ignoreHidden&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,void 0!==r.enableRetinaIcons&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",this.imageExtension=r.imageExtension||"png",this.imageSizes=r.imageSizes||Lt,this.calculator=r.calculator||xt,this.batchSize=r.batchSize||2e3,this.batchSizeIE=r.batchSizeIE||500,this.clusterClass=r.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(null===(e=this.getMap())||void 0===e?void 0:e.getZoom())!==(this.get("minZoom")||0)&&(null===(t=this.getMap())||void 0===t?void 0:t.getZoom())!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),null!==e&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var n=t[e];n.getMap()!==this.activeMap&&n.setMap(this.activeMap)}for(var r=0,i=this.clusters;r<i.length;r++){i[r].remove()}this.clusters=[];for(var s=0,o=this.listeners;s<o.length;s++){var a=o[s];google.maps.event.removeListener(a)}this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.getMap=function(){return null},e.prototype.getPanes=function(){return null},e.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},e.prototype.setMap=function(){},e.prototype.addListener=function(){return{remove:function(){}}},e.prototype.bindTo=function(){},e.prototype.get=function(){},e.prototype.notify=function(){},e.prototype.set=function(){},e.prototype.setValues=function(){},e.prototype.unbind=function(){},e.prototype.unbindAll=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},e.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,n=0,r=e;n<r.length;n++){var i=r[n].getPosition();i&&t.extend(i)}var s=this.getMap();null!==s&&"fitBounds"in s&&s.fitBounds(t)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(e){this.gridSize=e},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(e){this.maxZoom=e},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(e){this.styles=e},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(e){this.title=e},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(e){this.averageCenter=e},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(e){this.imageExtension=e},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(e){this.imagePath=e},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(e){this.imageSizes=e},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(e){this.calculator=e},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(e){this.clusterClass=e},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},e.prototype.addMarkers=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];r&&this.pushMarkerTo(r)}t||this.redraw()},e.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",(function(){t.ready&&(e.isAdded=!1,t.repaint())})),e.isAdded=!1,this.markers.push(e)},e.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var n=0;n<this.markers.length;n++)if(e===this.markers[n]){t=n;break}return-1!==t&&(e.setMap(null),this.markers.splice(t,1),!0)},e.prototype.removeMarker=function(e,t){var n=this.removeMarker_(e);return!t&&n&&this.repaint(),n},e.prototype.removeMarkers=function(e,t){for(var n=!1,r=0,i=e;r<i.length;r++){var s=i[r];n=n||this.removeMarker_(s)}return!t&&n&&this.repaint(),n},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout((function(){for(var t=0,n=e;t<n.length;t++){n[t].remove()}}),0)},e.prototype.getExtendedBounds=function(e){var t=this.getProjection(),n=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));null!==n&&(n.x+=this.gridSize,n.y-=this.gridSize);var r=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(null!==r&&(r.x-=this.gridSize,r.y+=this.gridSize),null!==n){var i=t.fromDivPixelToLatLng(n);null!==i&&e.extend(i)}if(null!==r){var s=t.fromDivPixelToLatLng(r);null!==s&&e.extend(s)}return e},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(e){for(var t=0,n=this.clusters;t<n.length;t++){n[t].remove()}this.clusters=[];for(var r=0,i=this.markers;r<i.length;r++){var s=i[r];s.isAdded=!1,e&&s.setMap(null)}},e.prototype.distanceBetweenPoints=function(e,t){var n=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371},e.prototype.isMarkerInBounds=function(e,t){var n=e.getPosition();return!!n&&t.contains(n)},e.prototype.addToClosestCluster=function(e){for(var t,n=4e4,r=null,i=0,s=this.clusters;i<s.length;i++){var o=(t=s[i]).getCenter(),a=e.getPosition();if(o&&a){var l=this.distanceBetweenPoints(o,a);l<n&&(n=l,r=t)}}r&&r.isMarkerInClusterBounds(e)?r.addMarker(e):((t=new Tt(this)).addMarker(e),this.clusters.push(t))},e.prototype.createClusters=function(e){var t=this;if(this.ready){0===e&&(google.maps.event.trigger(this,"clusteringbegin",this),null!==this.timerRefStatic&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap(),r=(null!==n&&"getBounds"in n?n.getBounds():null),i=((null===n||void 0===n?void 0:n.getZoom())||0)>3?new google.maps.LatLngBounds(null===r||void 0===r?void 0:r.getSouthWest(),null===r||void 0===r?void 0:r.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),s=this.getExtendedBounds(i),o=Math.min(e+this.batchSize,this.markers.length),a=e;a<o;a++){var l=this.markers[a];l&&!l.isAdded&&this.isMarkerInBounds(l,s)&&(!this.ignoreHidden||this.ignoreHidden&&l.getVisible())&&this.addToClosestCluster(l)}if(o<this.markers.length)this.timerRefStatic=window.setTimeout((function(){t.createClusters(o)}),0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var u=0,c=this.clusters;u<c.length;u++){c[u].updateIcon()}}}},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype){var n=t;this.prototype[n]=e.prototype[n]}return this}.apply(e,[t])},e}();function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Rt={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Ot={averageCenter(e,t){e.setAverageCenter(t)},batchSizeIE(e,t){e.setBatchSizeIE(t)},calculator(e,t){e.setCalculator(t)},clusterClass(e,t){e.setClusterClass(t)},enableRetinaIcons(e,t){e.setEnableRetinaIcons(t)},gridSize(e,t){e.setGridSize(t)},ignoreHidden(e,t){e.setIgnoreHidden(t)},imageExtension(e,t){e.setImageExtension(t)},imagePath(e,t){e.setImagePath(t)},imageSizes(e,t){e.setImageSizes(t)},maxZoom(e,t){e.setMaxZoom(t)},minimumClusterSize(e,t){e.setMinimumClusterSize(t)},styles(e,t){e.setStyles(t)},title(e,t){e.setTitle(t)},zoomOnClick(e,t){e.setZoomOnClick(t)}},Mt={};(0,t.memo)((function(e){var{children:n,options:r,averageCenter:i,batchSizeIE:s,calculator:o,clusterClass:a,enableRetinaIcons:l,gridSize:u,ignoreHidden:c,imageExtension:h,imagePath:d,imageSizes:p,maxZoom:f,minimumClusterSize:g,styles:m,title:v,zoomOnClick:y,onClick:_,onClusteringBegin:w,onClusteringEnd:b,onMouseOver:E,onMouseOut:C,onLoad:S,onUnmount:k}=e,[I,T]=(0,t.useState)(null),x=(0,t.useContext)(je),[L,P]=(0,t.useState)(null),[N,R]=(0,t.useState)(null),[O,M]=(0,t.useState)(null),[A,D]=(0,t.useState)(null),[j,U]=(0,t.useState)(null);return(0,t.useEffect)((()=>{I&&C&&(null!==A&&google.maps.event.removeListener(A),D(google.maps.event.addListener(I,Rt.onMouseOut,C)))}),[C]),(0,t.useEffect)((()=>{I&&E&&(null!==j&&google.maps.event.removeListener(j),U(google.maps.event.addListener(I,Rt.onMouseOver,E)))}),[E]),(0,t.useEffect)((()=>{I&&_&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(I,Rt.onClick,_)))}),[_]),(0,t.useEffect)((()=>{I&&w&&(null!==N&&google.maps.event.removeListener(N),R(google.maps.event.addListener(I,Rt.onClusteringBegin,w)))}),[w]),(0,t.useEffect)((()=>{I&&b&&(null!==O&&google.maps.event.removeListener(O),R(google.maps.event.addListener(I,Rt.onClusteringEnd,b)))}),[b]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==I&&Ot.averageCenter(I,i)}),[I,i]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==I&&Ot.batchSizeIE(I,s)}),[I,s]),(0,t.useEffect)((()=>{"undefined"!==typeof o&&null!==I&&Ot.calculator(I,o)}),[I,o]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==I&&Ot.clusterClass(I,a)}),[I,a]),(0,t.useEffect)((()=>{"undefined"!==typeof l&&null!==I&&Ot.enableRetinaIcons(I,l)}),[I,l]),(0,t.useEffect)((()=>{"undefined"!==typeof u&&null!==I&&Ot.gridSize(I,u)}),[I,u]),(0,t.useEffect)((()=>{"undefined"!==typeof c&&null!==I&&Ot.ignoreHidden(I,c)}),[I,c]),(0,t.useEffect)((()=>{"undefined"!==typeof h&&null!==I&&Ot.imageExtension(I,h)}),[I,h]),(0,t.useEffect)((()=>{"undefined"!==typeof d&&null!==I&&Ot.imagePath(I,d)}),[I,d]),(0,t.useEffect)((()=>{"undefined"!==typeof p&&null!==I&&Ot.imageSizes(I,p)}),[I,p]),(0,t.useEffect)((()=>{"undefined"!==typeof f&&null!==I&&Ot.maxZoom(I,f)}),[I,f]),(0,t.useEffect)((()=>{"undefined"!==typeof g&&null!==I&&Ot.minimumClusterSize(I,g)}),[I,g]),(0,t.useEffect)((()=>{"undefined"!==typeof m&&null!==I&&Ot.styles(I,m)}),[I,m]),(0,t.useEffect)((()=>{"undefined"!==typeof v&&null!==I&&Ot.title(I,v)}),[I,v]),(0,t.useEffect)((()=>{"undefined"!==typeof y&&null!==I&&Ot.zoomOnClick(I,y)}),[I,y]),(0,t.useEffect)((()=>{if(x){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r||Mt),t=new Pt(x,[],e);return i&&Ot.averageCenter(t,i),s&&Ot.batchSizeIE(t,s),o&&Ot.calculator(t,o),a&&Ot.clusterClass(t,a),l&&Ot.enableRetinaIcons(t,l),u&&Ot.gridSize(t,u),c&&Ot.ignoreHidden(t,c),h&&Ot.imageExtension(t,h),d&&Ot.imagePath(t,d),p&&Ot.imageSizes(t,p),f&&Ot.maxZoom(t,f),g&&Ot.minimumClusterSize(t,g),m&&Ot.styles(t,m),v&&Ot.title(t,v),y&&Ot.zoomOnClick(t,y),C&&D(google.maps.event.addListener(t,Rt.onMouseOut,C)),E&&U(google.maps.event.addListener(t,Rt.onMouseOver,E)),_&&P(google.maps.event.addListener(t,Rt.onClick,_)),w&&R(google.maps.event.addListener(t,Rt.onClusteringBegin,w)),b&&M(google.maps.event.addListener(t,Rt.onClusteringEnd,b)),T(t),S&&S(t),()=>{null!==A&&google.maps.event.removeListener(A),null!==j&&google.maps.event.removeListener(j),null!==L&&google.maps.event.removeListener(L),null!==N&&google.maps.event.removeListener(N),null!==O&&google.maps.event.removeListener(O),k&&k(t)}}}),[]),null!==I&&n(I)||null}));class At extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"state",{markerClusterer:null}),Oe(this,"setClustererCallback",(()=>{null!==this.state.markerClusterer&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)}))}componentDidMount(){if(this.context){var e=new Pt(this.context,[],this.props.options);this.registeredEvents=Be({updaterMap:Ot,eventMap:Rt,prevProps:{},nextProps:this.props,instance:e}),this.setState((()=>({markerClusterer:e})),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:Ot,eventMap:Rt,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){null!==this.state.markerClusterer&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),ze(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return null!==this.state.markerClusterer?this.props.children(this.state.markerClusterer):null}}function Dt(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}Oe(At,"contextType",je);var jt=function(){function e(t){void 0===t&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"===typeof t.visible&&("undefined"===typeof t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var e=this;if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),"string"===typeof this.content?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var t=this.getPanes();if(null!==t&&t[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(0!==this.maxWidth&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var n=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-n.left-n.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var r=0,i=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"];r<i.length;r++){var s=i[r];this.eventListeners.push(google.maps.event.addListener(this.div,s,Dt))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",(function(){e.div&&(e.div.style.cursor="default")})))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",(function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),e.enableEventPropagation||Dt(t)})),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var e="";return""!==this.closeBoxURL&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&""!==this.closeBoxURL?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var n=0,r=0,i=t.getBounds();i&&!i.contains(this.position)&&t.setCenter(this.position);var s=t.getDiv(),o=s.offsetWidth,a=s.offsetHeight,l=this.pixelOffset.width,u=this.pixelOffset.height,c=this.div.offsetWidth,h=this.div.offsetHeight,d=this.infoBoxClearance.width,p=this.infoBoxClearance.height,f=this.getProjection().fromLatLngToContainerPixel(this.position);null!==f&&(f.x<-l+d?n=f.x+l-d:f.x+c+l+d>o&&(n=f.x+c+l+d-o),this.alignBottom?f.y<-u+p+h?r=f.y+u-p-h:f.y+u+p>a&&(r=f.y+u+p-a):f.y<-u+p?r=f.y+u-p:f.y+h+u+p>a&&(r=f.y+h+u+p-a)),0===n&&0===r||t.panBy(n,r)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)","undefined"!==typeof this.div.style.opacity&&""!==this.div.style.opacity){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*n+')"',this.div.style.filter="alpha(opacity="+100*n+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",null!==this.zIndex&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,n=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;n&&(e.top=parseInt(n.borderTopWidth||"",10)||0,e.bottom=parseInt(n.borderBottomWidth||"",10)||0,e.left=parseInt(n.borderLeftWidth||"",10)||0,e.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var r=this.div.currentStyle;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}return e},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection().fromLatLngToDivPixel(this.position);null!==e&&(this.div.style.left=e.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(e.y+this.pixelOffset.height)+"px":this.div.style.top=e.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(e){void 0===e&&(e={}),"undefined"!==typeof e.boxClass&&(this.boxClass=e.boxClass,this.setBoxStyle()),"undefined"!==typeof e.boxStyle&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),"undefined"!==typeof e.content&&this.setContent(e.content),"undefined"!==typeof e.disableAutoPan&&(this.disableAutoPan=e.disableAutoPan),"undefined"!==typeof e.maxWidth&&(this.maxWidth=e.maxWidth),"undefined"!==typeof e.pixelOffset&&(this.pixelOffset=e.pixelOffset),"undefined"!==typeof e.alignBottom&&(this.alignBottom=e.alignBottom),"undefined"!==typeof e.position&&this.setPosition(e.position),"undefined"!==typeof e.zIndex&&this.setZIndex(e.zIndex),"undefined"!==typeof e.closeBoxMargin&&(this.closeBoxMargin=e.closeBoxMargin),"undefined"!==typeof e.closeBoxURL&&(this.closeBoxURL=e.closeBoxURL),"undefined"!==typeof e.infoBoxClearance&&(this.infoBoxClearance=e.infoBoxClearance),"undefined"!==typeof e.isHidden&&(this.isHidden=e.isHidden),"undefined"!==typeof e.visible&&(this.isHidden=!e.visible),"undefined"!==typeof e.enableEventPropagation&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),"string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px","string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var e=this.getMap();return"undefined"!==typeof e&&null!==e&&!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(e,t){var n=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",(function(){var e=t.getPosition();n.setPosition(e)})),this.mapListener=google.maps.event.addListener(t,"map_changed",(function(){n.setMap(t.map)}))),this.setMap(e),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var n=t[e];google.maps.event.removeListener(n)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)Object.prototype.hasOwnProperty.call(this,t)||(this.prototype[t]=e.prototype[t]);return this}.apply(e,[t])},e}(),Ut=["position"],Ft=["position"];function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bt={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},qt={options(e,t){e.setOptions(t)},position(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},Wt={};var Ht,$t;(0,t.memo)((function(e){var{children:n,anchor:r,options:i,position:o,zIndex:a,onCloseClick:l,onDomReady:u,onContentChanged:c,onPositionChanged:h,onZindexChanged:d,onLoad:p,onUnmount:f}=e,g=(0,t.useContext)(je),[m,v]=(0,t.useState)(null),[y,_]=(0,t.useState)(null),[w,b]=(0,t.useState)(null),[E,C]=(0,t.useState)(null),[S,k]=(0,t.useState)(null),[I,T]=(0,t.useState)(null),x=(0,t.useRef)(null);return(0,t.useEffect)((()=>{g&&null!==m&&(m.close(),r?m.open(g,r):m.getPosition()&&m.open(g))}),[g,m,r]),(0,t.useEffect)((()=>{i&&null!==m&&m.setOptions(i)}),[m,i]),(0,t.useEffect)((()=>{if(o&&null!==m){var e=o instanceof google.maps.LatLng?o:new google.maps.LatLng(o.lat,o.lng);m.setPosition(e)}}),[o]),(0,t.useEffect)((()=>{"number"===typeof a&&null!==m&&m.setZIndex(a)}),[a]),(0,t.useEffect)((()=>{m&&l&&(null!==y&&google.maps.event.removeListener(y),_(google.maps.event.addListener(m,"closeclick",l)))}),[l]),(0,t.useEffect)((()=>{m&&u&&(null!==w&&google.maps.event.removeListener(w),b(google.maps.event.addListener(m,"domready",u)))}),[u]),(0,t.useEffect)((()=>{m&&c&&(null!==E&&google.maps.event.removeListener(E),C(google.maps.event.addListener(m,"content_changed",c)))}),[c]),(0,t.useEffect)((()=>{m&&h&&(null!==S&&google.maps.event.removeListener(S),k(google.maps.event.addListener(m,"position_changed",h)))}),[h]),(0,t.useEffect)((()=>{m&&d&&(null!==I&&google.maps.event.removeListener(I),T(google.maps.event.addListener(m,"zindex_changed",d)))}),[d]),(0,t.useEffect)((()=>{if(g){var e,t=i||Wt,{position:n}=t,s=it(t,Ut);!n||n instanceof google.maps.LatLng||(e=new google.maps.LatLng(n.lat,n.lng));var o=new jt(zt(zt({},s),e?{position:e}:{}));x.current=document.createElement("div"),v(o),l&&_(google.maps.event.addListener(o,"closeclick",l)),u&&b(google.maps.event.addListener(o,"domready",u)),c&&C(google.maps.event.addListener(o,"content_changed",c)),h&&k(google.maps.event.addListener(o,"position_changed",h)),d&&T(google.maps.event.addListener(o,"zindex_changed",d)),o.setContent(x.current),r?o.open(g,r):o.getPosition()?o.open(g):De(!1,"You must provide either an anchor or a position prop for <InfoBox>."),p&&p(o)}return()=>{null!==m&&(y&&google.maps.event.removeListener(y),E&&google.maps.event.removeListener(E),w&&google.maps.event.removeListener(w),S&&google.maps.event.removeListener(S),I&&google.maps.event.removeListener(I),f&&f(m),m.close())}}),[]),x.current?(0,s.createPortal)(t.Children.only(n),x.current):null}));class Kt extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"containerElement",null),Oe(this,"state",{infoBox:null}),Oe(this,"open",((e,t)=>{t?null!==this.context&&e.open(this.context,t):e.getPosition()?null!==this.context&&e.open(this.context):De(!1,"You must provide either an anchor or a position prop for <InfoBox>.")})),Oe(this,"setInfoBoxCallback",(()=>{null!==this.state.infoBox&&null!==this.containerElement&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))}))}componentDidMount(){var e,t=this.props.options||{},{position:n}=t,r=it(t,Ft);!n||n instanceof google.maps.LatLng||(e=new google.maps.LatLng(n.lat,n.lng));var i=new jt(zt(zt({},r),e?{position:e}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=Be({updaterMap:qt,eventMap:Bt,prevProps:{},nextProps:this.props,instance:i}),this.setState({infoBox:i},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:t}=this.state;null!==t&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:qt,eventMap:Bt,prevProps:e,nextProps:this.props,instance:t}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:t}=this.state;null!==t&&(e&&e(t),ze(this.registeredEvents),t.close())}render(){return this.containerElement?(0,s.createPortal)(t.Children.only(this.props.children),this.containerElement):null}}Oe(Kt,"contextType",je);var Gt=($t||($t=1,Ht=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;0!==i--;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),Ht),Qt=Me(Gt),Yt=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Xt{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");var r=n>>4;if(1!==r)throw new Error("Got v".concat(r," data when expected v").concat(1,"."));var i=Yt[15&n];if(!i)throw new Error("Unrecognized array type.");var[s]=new Uint16Array(e,2,1),[o]=new Uint32Array(e,4,1);return new Xt(o,s,i,e)}constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var i=Yt.indexOf(this.ArrayType),s=2*e*this.ArrayType.BYTES_PER_ELEMENT,o=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-o%8)%8;if(i<0)throw new Error("Unexpected typed array class: ".concat(n,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+a,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+s+o+a),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+a,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Jt(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:s,nodeSize:o}=this,a=[0,i.length-1,0],l=[];a.length;){var u=a.pop()||0,c=a.pop()||0,h=a.pop()||0;if(c-h<=o)for(var d=h;d<=c;d++){var p=s[2*d],f=s[2*d+1];p>=e&&p<=n&&f>=t&&f<=r&&l.push(i[d])}else{var g=h+c>>1,m=s[2*g],v=s[2*g+1];m>=e&&m<=n&&v>=t&&v<=r&&l.push(i[g]),(0===u?e<=m:t<=v)&&(a.push(h),a.push(g-1),a.push(1-u)),(0===u?n>=m:r>=v)&&(a.push(g+1),a.push(c),a.push(1-u))}}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:r,coords:i,nodeSize:s}=this,o=[0,r.length-1,0],a=[],l=n*n;o.length;){var u=o.pop()||0,c=o.pop()||0,h=o.pop()||0;if(c-h<=s)for(var d=h;d<=c;d++)nn(i[2*d],i[2*d+1],e,t)<=l&&a.push(r[d]);else{var p=h+c>>1,f=i[2*p],g=i[2*p+1];nn(f,g,e,t)<=l&&a.push(r[p]),(0===u?e-n<=f:t-n<=g)&&(o.push(h),o.push(p-1),o.push(1-u)),(0===u?e+n>=f:t+n>=g)&&(o.push(p+1),o.push(c),o.push(1-u))}}return a}}function Jt(e,t,n,r,i,s){if(!(i-r<=n)){var o=r+i>>1;Zt(e,t,o,r,i,s),Jt(e,t,n,r,o-1,1-s),Jt(e,t,n,o+1,i,1-s)}}function Zt(e,t,n,r,i,s){for(;i>r;){if(i-r>600){var o=i-r+1,a=n-r+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(a-o/2<0?-1:1);Zt(e,t,n,Math.max(r,Math.floor(n-a*u/o+c)),Math.min(i,Math.floor(n+(o-a)*u/o+c)),s)}var h=t[2*n+s],d=r,p=i;for(en(e,t,r,n),t[2*i+s]>h&&en(e,t,r,i);d<p;){for(en(e,t,d,p),d++,p--;t[2*d+s]<h;)d++;for(;t[2*p+s]>h;)p--}t[2*r+s]===h?en(e,t,r,p):en(e,t,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}function en(e,t,n,r){tn(e,n,r),tn(t,2*n,2*r),tn(t,2*n+1,2*r+1)}function tn(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function nn(e,t,n,r){var i=e-n,s=t-r;return i*i+s*s}var rn,sn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},on=Math.fround||(rn=new Float32Array(1),e=>(rn[0]=+e,rn[0]));class an{constructor(e){this.options=Object.assign(Object.create(sn),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:t,minZoom:n,maxZoom:r}=this.options;t&&console.time("total time");var i="prepare ".concat(e.length," points");t&&console.time(i),this.points=e;for(var s=[],o=0;o<e.length;o++){var a=e[o];if(a.geometry){var[l,u]=a.geometry.coordinates,c=on(cn(l)),h=on(hn(u));s.push(c,h,1/0,o,-1,1),this.options.reduce&&s.push(0)}}var d=this.trees[r+1]=this._createTree(s);t&&console.timeEnd(i);for(var p=r;p>=n;p--){var f=+Date.now();d=this.trees[p]=this._createTree(this._cluster(d,p)),t&&console.log("z%d: %d clusters in %dms",p,d.numItems,+Date.now()-f)}return t&&console.timeEnd("total time"),this}getClusters(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,s=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var o=this.getClusters([n,r,180,s],t),a=this.getClusters([-180,r,i,s],t);return o.concat(a)}var l=this.trees[this._limitZoom(t)],u=l.range(cn(n),hn(s),cn(i),hn(r)),c=l.data,h=[];for(var d of u){var p=this.stride*d;h.push(c[p+5]>1?ln(c,p,this.clusterProps):this.points[c[p+3]])}return h}getChildren(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var s=i.data;if(t*this.stride>=s.length)throw new Error(r);var o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=s[t*this.stride],l=s[t*this.stride+1],u=i.within(a,l,o),c=[];for(var h of u){var d=h*this.stride;s[d+4]===e&&c.push(s[d+5]>1?ln(s,d,this.clusterProps):this.points[s[d+3]])}if(0===c.length)throw new Error(r);return c}getLeaves(e,t,n){t=t||10,n=n||0;var r=[];return this._appendLeaves(r,e,t,n,0),r}getTile(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:s,radius:o}=this.options,a=o/s,l=(n-a)/i,u=(n+1+a)/i,c={features:[]};return this._addTileFeatures(r.range((t-a)/i,l,(t+1+a)/i,u),r.data,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-a/i,l,1,u),r.data,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,l,a/i,u),r.data,-1,n,i,c),c.features.length?c:null}getClusterExpansionZoom(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){var s=this.getChildren(t);for(var o of s){var a=o.properties;if(a&&a.cluster?i+a.point_count<=r?i+=a.point_count:i=this._appendLeaves(e,a.cluster_id,n,r,i):i<r?i++:e.push(o),e.length===n)break}return i}_createTree(e){for(var t=new Xt(e.length/this.stride|0,this.options.nodeSize,Float32Array),n=0;n<e.length;n+=this.stride)t.add(e[n],e[n+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,n,r,i,s){for(var o of e){var a=o*this.stride,l=t[a+5]>1,u=void 0,c=void 0,h=void 0;if(l)u=un(t,a,this.clusterProps),c=t[a],h=t[a+1];else{var d=this.points[t[a+3]];u=d.properties;var[p,f]=d.geometry.coordinates;c=cn(p),h=hn(f)}var g={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(h*i-r))]],tags:u},m=void 0;void 0!==(m=l||this.options.generateId?t[a+3]:this.points[t[a+3]].id)&&(g.id=m),s.features.push(g)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){for(var{radius:n,extent:r,reduce:i,minPoints:s}=this.options,o=n/(r*Math.pow(2,t)),a=e.data,l=[],u=this.stride,c=0;c<a.length;c+=u)if(!(a[c+2]<=t)){a[c+2]=t;var h=a[c],d=a[c+1],p=e.within(a[c],a[c+1],o),f=a[c+5],g=f;for(var m of p){var v=m*u;a[v+2]>t&&(g+=a[v+5])}if(g>f&&g>=s){var y=h*f,_=d*f,w=void 0,b=-1,E=(c/u<<5)+(t+1)+this.points.length;for(var C of p){var S=C*u;if(!(a[S+2]<=t)){a[S+2]=t;var k=a[S+5];y+=a[S]*k,_+=a[S+1]*k,a[S+4]=E,i&&(w||(w=this._map(a,c,!0),b=this.clusterProps.length,this.clusterProps.push(w)),i(w,this._map(a,S)))}}a[c+4]=E,l.push(y/g,_/g,1/0,E,-1,g),i&&l.push(b)}else{for(var I=0;I<u;I++)l.push(a[c+I]);if(g>1)for(var T of p){var x=T*u;if(!(a[x+2]<=t)){a[x+2]=t;for(var L=0;L<u;L++)l.push(a[x+L])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+5]>1){var r=this.clusterProps[e[t+6]];return n?Object.assign({},r):r}var i=this.points[e[t+3]].properties,s=this.options.map(i);return n&&s===i?Object.assign({},s):s}}function ln(e,t,n){return{type:"Feature",id:e[t+3],properties:un(e,t,n),geometry:{type:"Point",coordinates:[dn(e[t]),pn(e[t+1])]}}}function un(e,t,n){var r=e[t+5],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,s=e[t+6],o=-1===s?{}:Object.assign({},n[s]);return Object.assign(o,{cluster:!0,cluster_id:e[t+3],point_count:r,point_count_abbreviated:i})}function cn(e){return e/360+.5}function hn(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function dn(e){return 360*(e-.5)}function pn(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function fn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}class gn{static isAdvancedMarkerAvailable(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}class mn{constructor(e){var{markers:t,position:n}=e;this.markers=t,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(0!==this.markers.length||this._position){var e=new google.maps.LatLngBounds(this._position,this._position);for(var t of this.markers)e.extend(gn.getPosition(t));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((e=>gn.getVisible(e))).length}push(e){this.markers.push(e)}delete(){this.marker&&(gn.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class vn{constructor(e){var{maxZoom:t=16}=e;this.maxZoom=t}noop(e){var{markers:t}=e;return _n(t)}}var yn,_n=e=>e.map((e=>new mn({position:gn.getPosition(e),markers:[e]})));class wn extends vn{constructor(e){var{maxZoom:t,radius:n=60}=e,r=fn(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new an(Object.assign({maxZoom:this.maxZoom,radius:n},r))}calculate(e){var t=!1,n={zoom:e.map.getZoom()};if(!Qt(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var r=this.markers.map((e=>{var t=gn.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}}));this.superCluster.load(r)}return t||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(t=!Qt(this.state,n)),this.state=n,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){var{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map((e=>this.transformCluster(e)))}transformCluster(e){var{geometry:{coordinates:[t,n]},properties:r}=e;if(r.cluster)return new mn({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map((e=>e.properties.marker)),position:{lat:n,lng:t}});var i=r.marker;return new mn({markers:[i],position:gn.getPosition(i)})}}class bn{constructor(e,t){this.markers={sum:e.length};var n=t.map((e=>e.count)),r=n.reduce(((e,t)=>e+t),0);this.clusters={count:t.length,markers:{mean:r/t.length,sum:r,min:Math.min(...n),max:Math.max(...n)}}}}class En{render(e,t,n){var{count:r,position:i}=e,s=r>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",o='<svg fill="'.concat(s,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">').concat(r,"</text>\n</svg>"),a="Cluster of ".concat(r," markers"),l=Number(google.maps.Marker.MAX_ZINDEX)+r;if(gn.isAdvancedMarkerAvailable(n)){var u=(new DOMParser).parseFromString(o,"image/svg+xml").documentElement;u.setAttribute("transform","translate(0 25)");var c={map:n,position:i,zIndex:l,title:a,content:u};return new google.maps.marker.AdvancedMarkerElement(c)}var h={position:i,zIndex:l,title:a,icon:{url:"data:image/svg+xml;base64,".concat(btoa(o)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(h)}}class Cn{constructor(){!function(e,t){for(var n in t.prototype)e.prototype[n]=t.prototype[n]}(Cn,google.maps.OverlayView)}}!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"}(yn||(yn={}));var Sn=(e,t,n)=>{n.fitBounds(t.bounds)};class kn extends Cn{constructor(e){var{map:t,markers:n=[],algorithmOptions:r={},algorithm:i=new wn(r),renderer:s=new En,onClusterClick:o=Sn}=e;super(),this.markers=[...n],this.clusters=[],this.algorithm=i,this.renderer=s,this.onClusterClick=o,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach((e=>{this.addMarker(e,!0)})),t||this.render()}removeMarker(e,t){var n=this.markers.indexOf(e);return-1!==n&&(gn.setMap(e,null),this.markers.splice(n,1),t||this.render(),!0)}removeMarkers(e,t){var n=!1;return e.forEach((e=>{n=this.removeMarker(e,!0)||n})),n&&!t&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,yn.CLUSTERING_BEGIN,this);var{clusters:t,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(n||void 0==n){var r=new Set;for(var i of t)1==i.markers.length&&r.add(i.markers[0]);var s=[];for(var o of this.clusters)null!=o.marker&&(1==o.markers.length?r.has(o.marker)||gn.setMap(o.marker,null):s.push(o.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame((()=>s.forEach((e=>gn.setMap(e,null)))))}google.maps.event.trigger(this,yn.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((e=>gn.setMap(e,null))),this.clusters.forEach((e=>e.delete())),this.clusters=[]}renderClusters(){var e=new bn(this.markers,this.clusters),t=this.getMap();this.clusters.forEach((n=>{1===n.markers.length?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,t),n.markers.forEach((e=>gn.setMap(e,null))),this.onClusterClick&&n.marker.addListener("click",(e=>{google.maps.event.trigger(this,yn.CLUSTER_CLICK,n),this.onClusterClick(e,n,t)}))),gn.setMap(n.marker,t)}))}}function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xn(e){var n=function(){De(!!t.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=(0,t.useContext)(je);return De(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}(),[r,i]=(0,t.useState)(null);return(0,t.useEffect)((()=>{if(n&&null===r){var t=new kn(Tn(Tn({},e),{},{map:n}));i(t)}}),[n]),r}(0,t.memo)((function(e){var{children:t,options:n}=e,r=xn(n);return null!==r?t(r):null}));var Ln={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},Pn={options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},zIndex(e,t){e.setZIndex(t)}};(0,t.memo)((function(e){var{children:n,anchor:r,options:i,position:o,zIndex:a,onCloseClick:l,onDomReady:u,onContentChanged:c,onPositionChanged:h,onZindexChanged:d,onLoad:p,onUnmount:f}=e,g=(0,t.useContext)(je),[m,v]=(0,t.useState)(null),[y,_]=(0,t.useState)(null),[w,b]=(0,t.useState)(null),[E,C]=(0,t.useState)(null),[S,k]=(0,t.useState)(null),[I,T]=(0,t.useState)(null),x=(0,t.useRef)(null);return(0,t.useEffect)((()=>{null!==m&&(m.close(),r?m.open(g,r):m.getPosition()&&m.open(g))}),[g,m,r]),(0,t.useEffect)((()=>{i&&null!==m&&m.setOptions(i)}),[m,i]),(0,t.useEffect)((()=>{o&&null!==m&&m.setPosition(o)}),[o]),(0,t.useEffect)((()=>{"number"===typeof a&&null!==m&&m.setZIndex(a)}),[a]),(0,t.useEffect)((()=>{m&&l&&(null!==y&&google.maps.event.removeListener(y),_(google.maps.event.addListener(m,"closeclick",l)))}),[l]),(0,t.useEffect)((()=>{m&&u&&(null!==w&&google.maps.event.removeListener(w),b(google.maps.event.addListener(m,"domready",u)))}),[u]),(0,t.useEffect)((()=>{m&&c&&(null!==E&&google.maps.event.removeListener(E),C(google.maps.event.addListener(m,"content_changed",c)))}),[c]),(0,t.useEffect)((()=>{m&&h&&(null!==S&&google.maps.event.removeListener(S),k(google.maps.event.addListener(m,"position_changed",h)))}),[h]),(0,t.useEffect)((()=>{m&&d&&(null!==I&&google.maps.event.removeListener(I),T(google.maps.event.addListener(m,"zindex_changed",d)))}),[d]),(0,t.useEffect)((()=>{var e=new google.maps.InfoWindow(i);return v(e),x.current=document.createElement("div"),l&&_(google.maps.event.addListener(e,"closeclick",l)),u&&b(google.maps.event.addListener(e,"domready",u)),c&&C(google.maps.event.addListener(e,"content_changed",c)),h&&k(google.maps.event.addListener(e,"position_changed",h)),d&&T(google.maps.event.addListener(e,"zindex_changed",d)),e.setContent(x.current),o&&e.setPosition(o),a&&e.setZIndex(a),r?e.open(g,r):e.getPosition()?e.open(g):De(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),p&&p(e),()=>{y&&google.maps.event.removeListener(y),E&&google.maps.event.removeListener(E),w&&google.maps.event.removeListener(w),S&&google.maps.event.removeListener(S),I&&google.maps.event.removeListener(I),f&&f(e),e.close()}}),[]),x.current?(0,s.createPortal)(t.Children.only(n),x.current):null}));class Nn extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"containerElement",null),Oe(this,"state",{infoWindow:null}),Oe(this,"open",((e,t)=>{t?e.open(this.context,t):e.getPosition()?e.open(this.context):De(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")})),Oe(this,"setInfoWindowCallback",(()=>{null!==this.state.infoWindow&&null!==this.containerElement&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))}))}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=Be({updaterMap:Pn,eventMap:Ln,prevProps:{},nextProps:this.props,instance:e}),this.setState((()=>({infoWindow:e})),this.setInfoWindowCallback)}componentDidUpdate(e){null!==this.state.infoWindow&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:Pn,eventMap:Ln,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){null!==this.state.infoWindow&&(ze(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?(0,s.createPortal)(t.Children.only(this.props.children),this.containerElement):null}}function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oe(Nn,"contextType",je);var Mn={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},An={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},visible(e,t){e.setVisible(t)}},Dn={};(0,t.memo)((function(e){var{options:n,draggable:r,editable:i,visible:s,path:o,onDblClick:a,onDragEnd:l,onDragStart:u,onMouseDown:c,onMouseMove:h,onMouseOut:d,onMouseOver:p,onMouseUp:f,onRightClick:g,onClick:m,onDrag:v,onLoad:y,onUnmount:_}=e,w=(0,t.useContext)(je),[b,E]=(0,t.useState)(null),[C,S]=(0,t.useState)(null),[k,I]=(0,t.useState)(null),[T,x]=(0,t.useState)(null),[L,P]=(0,t.useState)(null),[N,R]=(0,t.useState)(null),[O,M]=(0,t.useState)(null),[A,D]=(0,t.useState)(null),[j,U]=(0,t.useState)(null),[F,V]=(0,t.useState)(null),[z,B]=(0,t.useState)(null),[q,W]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==b&&b.setMap(w)}),[w]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==b&&b.setOptions(n)}),[b,n]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==b&&b.setDraggable(r)}),[b,r]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==b&&b.setEditable(i)}),[b,i]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==b&&b.setVisible(s)}),[b,s]),(0,t.useEffect)((()=>{"undefined"!==typeof o&&null!==b&&b.setPath(o)}),[b,o]),(0,t.useEffect)((()=>{b&&a&&(null!==C&&google.maps.event.removeListener(C),S(google.maps.event.addListener(b,"dblclick",a)))}),[a]),(0,t.useEffect)((()=>{b&&l&&(null!==k&&google.maps.event.removeListener(k),I(google.maps.event.addListener(b,"dragend",l)))}),[l]),(0,t.useEffect)((()=>{b&&u&&(null!==T&&google.maps.event.removeListener(T),x(google.maps.event.addListener(b,"dragstart",u)))}),[u]),(0,t.useEffect)((()=>{b&&c&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(b,"mousedown",c)))}),[c]),(0,t.useEffect)((()=>{b&&h&&(null!==N&&google.maps.event.removeListener(N),R(google.maps.event.addListener(b,"mousemove",h)))}),[h]),(0,t.useEffect)((()=>{b&&d&&(null!==O&&google.maps.event.removeListener(O),M(google.maps.event.addListener(b,"mouseout",d)))}),[d]),(0,t.useEffect)((()=>{b&&p&&(null!==A&&google.maps.event.removeListener(A),D(google.maps.event.addListener(b,"mouseover",p)))}),[p]),(0,t.useEffect)((()=>{b&&f&&(null!==j&&google.maps.event.removeListener(j),U(google.maps.event.addListener(b,"mouseup",f)))}),[f]),(0,t.useEffect)((()=>{b&&g&&(null!==F&&google.maps.event.removeListener(F),V(google.maps.event.addListener(b,"rightclick",g)))}),[g]),(0,t.useEffect)((()=>{b&&m&&(null!==z&&google.maps.event.removeListener(z),B(google.maps.event.addListener(b,"click",m)))}),[m]),(0,t.useEffect)((()=>{b&&v&&(null!==q&&google.maps.event.removeListener(q),W(google.maps.event.addListener(b,"drag",v)))}),[v]),(0,t.useEffect)((()=>{var e=new google.maps.Polyline(On(On({},n||Dn),{},{map:w}));return o&&e.setPath(o),"undefined"!==typeof s&&e.setVisible(s),"undefined"!==typeof i&&e.setEditable(i),"undefined"!==typeof r&&e.setDraggable(r),a&&S(google.maps.event.addListener(e,"dblclick",a)),l&&I(google.maps.event.addListener(e,"dragend",l)),u&&x(google.maps.event.addListener(e,"dragstart",u)),c&&P(google.maps.event.addListener(e,"mousedown",c)),h&&R(google.maps.event.addListener(e,"mousemove",h)),d&&M(google.maps.event.addListener(e,"mouseout",d)),p&&D(google.maps.event.addListener(e,"mouseover",p)),f&&U(google.maps.event.addListener(e,"mouseup",f)),g&&V(google.maps.event.addListener(e,"rightclick",g)),m&&B(google.maps.event.addListener(e,"click",m)),v&&W(google.maps.event.addListener(e,"drag",v)),E(e),y&&y(e),()=>{null!==C&&google.maps.event.removeListener(C),null!==k&&google.maps.event.removeListener(k),null!==T&&google.maps.event.removeListener(T),null!==L&&google.maps.event.removeListener(L),null!==N&&google.maps.event.removeListener(N),null!==O&&google.maps.event.removeListener(O),null!==A&&google.maps.event.removeListener(A),null!==j&&google.maps.event.removeListener(j),null!==F&&google.maps.event.removeListener(F),null!==z&&google.maps.event.removeListener(z),_&&_(e),e.setMap(null)}}),[]),null}));class jn extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"state",{polyline:null}),Oe(this,"setPolylineCallback",(()=>{null!==this.state.polyline&&this.props.onLoad&&this.props.onLoad(this.state.polyline)}))}componentDidMount(){var e=new google.maps.Polyline(On(On({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:An,eventMap:Mn,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{polyline:e}}),this.setPolylineCallback)}componentDidUpdate(e){null!==this.state.polyline&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:An,eventMap:Mn,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){null!==this.state.polyline&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),ze(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oe(jn,"contextType",je);var Vn={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},zn={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},paths(e,t){e.setPaths(t)},visible(e,t){e.setVisible(t)}};(0,t.memo)((function(e){var{options:n,draggable:r,editable:i,visible:s,path:o,paths:a,onDblClick:l,onDragEnd:u,onDragStart:c,onMouseDown:h,onMouseMove:d,onMouseOut:p,onMouseOver:f,onMouseUp:g,onRightClick:m,onClick:v,onDrag:y,onLoad:_,onUnmount:w,onEdit:b}=e,E=(0,t.useContext)(je),[C,S]=(0,t.useState)(null),[k,I]=(0,t.useState)(null),[T,x]=(0,t.useState)(null),[L,P]=(0,t.useState)(null),[N,R]=(0,t.useState)(null),[O,M]=(0,t.useState)(null),[A,D]=(0,t.useState)(null),[j,U]=(0,t.useState)(null),[F,V]=(0,t.useState)(null),[z,B]=(0,t.useState)(null),[q,W]=(0,t.useState)(null),[H,$]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==C&&C.setMap(E)}),[E]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==C&&C.setOptions(n)}),[C,n]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==C&&C.setDraggable(r)}),[C,r]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==C&&C.setEditable(i)}),[C,i]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==C&&C.setVisible(s)}),[C,s]),(0,t.useEffect)((()=>{"undefined"!==typeof o&&null!==C&&C.setPath(o)}),[C,o]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==C&&C.setPaths(a)}),[C,a]),(0,t.useEffect)((()=>{C&&"function"===typeof l&&(null!==k&&google.maps.event.removeListener(k),I(google.maps.event.addListener(C,"dblclick",l)))}),[l]),(0,t.useEffect)((()=>{C&&(google.maps.event.addListener(C.getPath(),"insert_at",(()=>{null===b||void 0===b||b(C)})),google.maps.event.addListener(C.getPath(),"set_at",(()=>{null===b||void 0===b||b(C)})),google.maps.event.addListener(C.getPath(),"remove_at",(()=>{null===b||void 0===b||b(C)})))}),[C,b]),(0,t.useEffect)((()=>{C&&"function"===typeof u&&(null!==T&&google.maps.event.removeListener(T),x(google.maps.event.addListener(C,"dragend",u)))}),[u]),(0,t.useEffect)((()=>{C&&"function"===typeof c&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(C,"dragstart",c)))}),[c]),(0,t.useEffect)((()=>{C&&"function"===typeof h&&(null!==N&&google.maps.event.removeListener(N),R(google.maps.event.addListener(C,"mousedown",h)))}),[h]),(0,t.useEffect)((()=>{C&&"function"===typeof d&&(null!==O&&google.maps.event.removeListener(O),M(google.maps.event.addListener(C,"mousemove",d)))}),[d]),(0,t.useEffect)((()=>{C&&"function"===typeof p&&(null!==A&&google.maps.event.removeListener(A),D(google.maps.event.addListener(C,"mouseout",p)))}),[p]),(0,t.useEffect)((()=>{C&&"function"===typeof f&&(null!==j&&google.maps.event.removeListener(j),U(google.maps.event.addListener(C,"mouseover",f)))}),[f]),(0,t.useEffect)((()=>{C&&"function"===typeof g&&(null!==F&&google.maps.event.removeListener(F),V(google.maps.event.addListener(C,"mouseup",g)))}),[g]),(0,t.useEffect)((()=>{C&&"function"===typeof m&&(null!==z&&google.maps.event.removeListener(z),B(google.maps.event.addListener(C,"rightclick",m)))}),[m]),(0,t.useEffect)((()=>{C&&"function"===typeof v&&(null!==q&&google.maps.event.removeListener(q),W(google.maps.event.addListener(C,"click",v)))}),[v]),(0,t.useEffect)((()=>{C&&"function"===typeof y&&(null!==H&&google.maps.event.removeListener(H),$(google.maps.event.addListener(C,"drag",y)))}),[y]),(0,t.useEffect)((()=>{var e=new google.maps.Polygon(Fn(Fn({},n),{},{map:E}));return o&&e.setPath(o),a&&e.setPaths(a),"undefined"!==typeof s&&e.setVisible(s),"undefined"!==typeof i&&e.setEditable(i),"undefined"!==typeof r&&e.setDraggable(r),l&&I(google.maps.event.addListener(e,"dblclick",l)),u&&x(google.maps.event.addListener(e,"dragend",u)),c&&P(google.maps.event.addListener(e,"dragstart",c)),h&&R(google.maps.event.addListener(e,"mousedown",h)),d&&M(google.maps.event.addListener(e,"mousemove",d)),p&&D(google.maps.event.addListener(e,"mouseout",p)),f&&U(google.maps.event.addListener(e,"mouseover",f)),g&&V(google.maps.event.addListener(e,"mouseup",g)),m&&B(google.maps.event.addListener(e,"rightclick",m)),v&&W(google.maps.event.addListener(e,"click",v)),y&&$(google.maps.event.addListener(e,"drag",y)),S(e),_&&_(e),()=>{null!==k&&google.maps.event.removeListener(k),null!==T&&google.maps.event.removeListener(T),null!==L&&google.maps.event.removeListener(L),null!==N&&google.maps.event.removeListener(N),null!==O&&google.maps.event.removeListener(O),null!==A&&google.maps.event.removeListener(A),null!==j&&google.maps.event.removeListener(j),null!==F&&google.maps.event.removeListener(F),null!==z&&google.maps.event.removeListener(z),null!==q&&google.maps.event.removeListener(q),w&&w(e),e.setMap(null)}}),[]),null}));class Bn extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=Be({updaterMap:zn,eventMap:Vn,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:zn,eventMap:Vn,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),ze(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oe(Bn,"contextType",je);var Hn={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},$n={bounds(e,t){e.setBounds(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},visible(e,t){e.setVisible(t)}};(0,t.memo)((function(e){var{options:n,bounds:r,draggable:i,editable:s,visible:o,onDblClick:a,onDragEnd:l,onDragStart:u,onMouseDown:c,onMouseMove:h,onMouseOut:d,onMouseOver:p,onMouseUp:f,onRightClick:g,onClick:m,onDrag:v,onBoundsChanged:y,onLoad:_,onUnmount:w}=e,b=(0,t.useContext)(je),[E,C]=(0,t.useState)(null),[S,k]=(0,t.useState)(null),[I,T]=(0,t.useState)(null),[x,L]=(0,t.useState)(null),[P,N]=(0,t.useState)(null),[R,O]=(0,t.useState)(null),[M,A]=(0,t.useState)(null),[D,j]=(0,t.useState)(null),[U,F]=(0,t.useState)(null),[V,z]=(0,t.useState)(null),[B,q]=(0,t.useState)(null),[W,H]=(0,t.useState)(null),[$,K]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==E&&E.setMap(b)}),[b]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==E&&E.setOptions(n)}),[E,n]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==E&&E.setDraggable(i)}),[E,i]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==E&&E.setEditable(s)}),[E,s]),(0,t.useEffect)((()=>{"undefined"!==typeof o&&null!==E&&E.setVisible(o)}),[E,o]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==E&&E.setBounds(r)}),[E,r]),(0,t.useEffect)((()=>{E&&a&&(null!==S&&google.maps.event.removeListener(S),k(google.maps.event.addListener(E,"dblclick",a)))}),[a]),(0,t.useEffect)((()=>{E&&l&&(null!==I&&google.maps.event.removeListener(I),T(google.maps.event.addListener(E,"dragend",l)))}),[l]),(0,t.useEffect)((()=>{E&&u&&(null!==x&&google.maps.event.removeListener(x),L(google.maps.event.addListener(E,"dragstart",u)))}),[u]),(0,t.useEffect)((()=>{E&&c&&(null!==P&&google.maps.event.removeListener(P),N(google.maps.event.addListener(E,"mousedown",c)))}),[c]),(0,t.useEffect)((()=>{E&&h&&(null!==R&&google.maps.event.removeListener(R),O(google.maps.event.addListener(E,"mousemove",h)))}),[h]),(0,t.useEffect)((()=>{E&&d&&(null!==M&&google.maps.event.removeListener(M),A(google.maps.event.addListener(E,"mouseout",d)))}),[d]),(0,t.useEffect)((()=>{E&&p&&(null!==D&&google.maps.event.removeListener(D),j(google.maps.event.addListener(E,"mouseover",p)))}),[p]),(0,t.useEffect)((()=>{E&&f&&(null!==U&&google.maps.event.removeListener(U),F(google.maps.event.addListener(E,"mouseup",f)))}),[f]),(0,t.useEffect)((()=>{E&&g&&(null!==V&&google.maps.event.removeListener(V),z(google.maps.event.addListener(E,"rightclick",g)))}),[g]),(0,t.useEffect)((()=>{E&&m&&(null!==B&&google.maps.event.removeListener(B),q(google.maps.event.addListener(E,"click",m)))}),[m]),(0,t.useEffect)((()=>{E&&v&&(null!==W&&google.maps.event.removeListener(W),H(google.maps.event.addListener(E,"drag",v)))}),[v]),(0,t.useEffect)((()=>{E&&y&&(null!==$&&google.maps.event.removeListener($),K(google.maps.event.addListener(E,"bounds_changed",y)))}),[y]),(0,t.useEffect)((()=>{var e=new google.maps.Rectangle(Wn(Wn({},n),{},{map:b}));return"undefined"!==typeof o&&e.setVisible(o),"undefined"!==typeof s&&e.setEditable(s),"undefined"!==typeof i&&e.setDraggable(i),"undefined"!==typeof r&&e.setBounds(r),a&&k(google.maps.event.addListener(e,"dblclick",a)),l&&T(google.maps.event.addListener(e,"dragend",l)),u&&L(google.maps.event.addListener(e,"dragstart",u)),c&&N(google.maps.event.addListener(e,"mousedown",c)),h&&O(google.maps.event.addListener(e,"mousemove",h)),d&&A(google.maps.event.addListener(e,"mouseout",d)),p&&j(google.maps.event.addListener(e,"mouseover",p)),f&&F(google.maps.event.addListener(e,"mouseup",f)),g&&z(google.maps.event.addListener(e,"rightclick",g)),m&&q(google.maps.event.addListener(e,"click",m)),v&&H(google.maps.event.addListener(e,"drag",v)),y&&K(google.maps.event.addListener(e,"bounds_changed",y)),C(e),_&&_(e),()=>{null!==S&&google.maps.event.removeListener(S),null!==I&&google.maps.event.removeListener(I),null!==x&&google.maps.event.removeListener(x),null!==P&&google.maps.event.removeListener(P),null!==R&&google.maps.event.removeListener(R),null!==M&&google.maps.event.removeListener(M),null!==D&&google.maps.event.removeListener(D),null!==U&&google.maps.event.removeListener(U),null!==V&&google.maps.event.removeListener(V),null!==B&&google.maps.event.removeListener(B),null!==W&&google.maps.event.removeListener(W),null!==$&&google.maps.event.removeListener($),w&&w(e),e.setMap(null)}}),[]),null}));class Kn extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"state",{rectangle:null}),Oe(this,"setRectangleCallback",(()=>{null!==this.state.rectangle&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)}))}componentDidMount(){var e=new google.maps.Rectangle(Wn(Wn({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:$n,eventMap:Hn,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{rectangle:e}}),this.setRectangleCallback)}componentDidUpdate(e){null!==this.state.rectangle&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:$n,eventMap:Hn,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){null!==this.state.rectangle&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),ze(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oe(Kn,"contextType",je);var Yn={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Xn={center(e,t){e.setCenter(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},radius(e,t){e.setRadius(t)},visible(e,t){e.setVisible(t)}},Jn={};(0,t.memo)((function(e){var{options:n,center:r,radius:i,draggable:s,editable:o,visible:a,onDblClick:l,onDragEnd:u,onDragStart:c,onMouseDown:h,onMouseMove:d,onMouseOut:p,onMouseOver:f,onMouseUp:g,onRightClick:m,onClick:v,onDrag:y,onCenterChanged:_,onRadiusChanged:w,onLoad:b,onUnmount:E}=e,C=(0,t.useContext)(je),[S,k]=(0,t.useState)(null),[I,T]=(0,t.useState)(null),[x,L]=(0,t.useState)(null),[P,N]=(0,t.useState)(null),[R,O]=(0,t.useState)(null),[M,A]=(0,t.useState)(null),[D,j]=(0,t.useState)(null),[U,F]=(0,t.useState)(null),[V,z]=(0,t.useState)(null),[B,q]=(0,t.useState)(null),[W,H]=(0,t.useState)(null),[$,K]=(0,t.useState)(null),[G,Q]=(0,t.useState)(null),[Y,X]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==S&&S.setMap(C)}),[C]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==S&&S.setOptions(n)}),[S,n]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==S&&S.setDraggable(s)}),[S,s]),(0,t.useEffect)((()=>{"undefined"!==typeof o&&null!==S&&S.setEditable(o)}),[S,o]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==S&&S.setVisible(a)}),[S,a]),(0,t.useEffect)((()=>{"number"===typeof i&&null!==S&&S.setRadius(i)}),[S,i]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==S&&S.setCenter(r)}),[S,r]),(0,t.useEffect)((()=>{S&&l&&(null!==I&&google.maps.event.removeListener(I),T(google.maps.event.addListener(S,"dblclick",l)))}),[l]),(0,t.useEffect)((()=>{S&&u&&(null!==x&&google.maps.event.removeListener(x),L(google.maps.event.addListener(S,"dragend",u)))}),[u]),(0,t.useEffect)((()=>{S&&c&&(null!==P&&google.maps.event.removeListener(P),N(google.maps.event.addListener(S,"dragstart",c)))}),[c]),(0,t.useEffect)((()=>{S&&h&&(null!==R&&google.maps.event.removeListener(R),O(google.maps.event.addListener(S,"mousedown",h)))}),[h]),(0,t.useEffect)((()=>{S&&d&&(null!==M&&google.maps.event.removeListener(M),A(google.maps.event.addListener(S,"mousemove",d)))}),[d]),(0,t.useEffect)((()=>{S&&p&&(null!==D&&google.maps.event.removeListener(D),j(google.maps.event.addListener(S,"mouseout",p)))}),[p]),(0,t.useEffect)((()=>{S&&f&&(null!==U&&google.maps.event.removeListener(U),F(google.maps.event.addListener(S,"mouseover",f)))}),[f]),(0,t.useEffect)((()=>{S&&g&&(null!==V&&google.maps.event.removeListener(V),z(google.maps.event.addListener(S,"mouseup",g)))}),[g]),(0,t.useEffect)((()=>{S&&m&&(null!==B&&google.maps.event.removeListener(B),q(google.maps.event.addListener(S,"rightclick",m)))}),[m]),(0,t.useEffect)((()=>{S&&v&&(null!==W&&google.maps.event.removeListener(W),H(google.maps.event.addListener(S,"click",v)))}),[v]),(0,t.useEffect)((()=>{S&&y&&(null!==$&&google.maps.event.removeListener($),K(google.maps.event.addListener(S,"drag",y)))}),[y]),(0,t.useEffect)((()=>{S&&_&&(null!==G&&google.maps.event.removeListener(G),Q(google.maps.event.addListener(S,"center_changed",_)))}),[v]),(0,t.useEffect)((()=>{S&&w&&(null!==Y&&google.maps.event.removeListener(Y),X(google.maps.event.addListener(S,"radius_changed",w)))}),[w]),(0,t.useEffect)((()=>{var e=new google.maps.Circle(Qn(Qn({},n||Jn),{},{map:C}));return"number"===typeof i&&e.setRadius(i),"undefined"!==typeof r&&e.setCenter(r),"number"===typeof i&&e.setRadius(i),"undefined"!==typeof a&&e.setVisible(a),"undefined"!==typeof o&&e.setEditable(o),"undefined"!==typeof s&&e.setDraggable(s),l&&T(google.maps.event.addListener(e,"dblclick",l)),u&&L(google.maps.event.addListener(e,"dragend",u)),c&&N(google.maps.event.addListener(e,"dragstart",c)),h&&O(google.maps.event.addListener(e,"mousedown",h)),d&&A(google.maps.event.addListener(e,"mousemove",d)),p&&j(google.maps.event.addListener(e,"mouseout",p)),f&&F(google.maps.event.addListener(e,"mouseover",f)),g&&z(google.maps.event.addListener(e,"mouseup",g)),m&&q(google.maps.event.addListener(e,"rightclick",m)),v&&H(google.maps.event.addListener(e,"click",v)),y&&K(google.maps.event.addListener(e,"drag",y)),_&&Q(google.maps.event.addListener(e,"center_changed",_)),w&&X(google.maps.event.addListener(e,"radius_changed",w)),k(e),b&&b(e),()=>{null!==I&&google.maps.event.removeListener(I),null!==x&&google.maps.event.removeListener(x),null!==P&&google.maps.event.removeListener(P),null!==R&&google.maps.event.removeListener(R),null!==M&&google.maps.event.removeListener(M),null!==D&&google.maps.event.removeListener(D),null!==U&&google.maps.event.removeListener(U),null!==V&&google.maps.event.removeListener(V),null!==B&&google.maps.event.removeListener(B),null!==W&&google.maps.event.removeListener(W),null!==G&&google.maps.event.removeListener(G),null!==Y&&google.maps.event.removeListener(Y),E&&E(e),e.setMap(null)}}),[]),null}));class Zn extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"state",{circle:null}),Oe(this,"setCircleCallback",(()=>{null!==this.state.circle&&this.props.onLoad&&this.props.onLoad(this.state.circle)}))}componentDidMount(){var e=new google.maps.Circle(Qn(Qn({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:Xn,eventMap:Yn,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{circle:e}}),this.setCircleCallback)}componentDidUpdate(e){null!==this.state.circle&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:Xn,eventMap:Yn,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){var e;null!==this.state.circle&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),ze(this.registeredEvents),null===(e=this.state.circle)||void 0===e||e.setMap(null))}render(){return null}}function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oe(Zn,"contextType",je);var nr={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},rr={add(e,t){e.add(t)},addgeojson(e,t,n){e.addGeoJson(t,n)},contains(e,t){e.contains(t)},foreach(e,t){e.forEach(t)},loadgeojson(e,t,n,r){e.loadGeoJson(t,n,r)},overridestyle(e,t,n){e.overrideStyle(t,n)},remove(e,t){e.remove(t)},revertstyle(e,t){e.revertStyle(t)},controlposition(e,t){e.setControlPosition(t)},controls(e,t){e.setControls(t)},drawingmode(e,t){e.setDrawingMode(t)},map(e,t){e.setMap(t)},style(e,t){e.setStyle(t)},togeojson(e,t){e.toGeoJson(t)}};(0,t.memo)((function(e){var{options:n,onClick:r,onDblClick:i,onMouseDown:s,onMouseMove:o,onMouseOut:a,onMouseOver:l,onMouseUp:u,onRightClick:c,onAddFeature:h,onRemoveFeature:d,onRemoveProperty:p,onSetGeometry:f,onSetProperty:g,onLoad:m,onUnmount:v}=e,y=(0,t.useContext)(je),[_,w]=(0,t.useState)(null),[b,E]=(0,t.useState)(null),[C,S]=(0,t.useState)(null),[k,I]=(0,t.useState)(null),[T,x]=(0,t.useState)(null),[L,P]=(0,t.useState)(null),[N,R]=(0,t.useState)(null),[O,M]=(0,t.useState)(null),[A,D]=(0,t.useState)(null),[j,U]=(0,t.useState)(null),[F,V]=(0,t.useState)(null),[z,B]=(0,t.useState)(null),[q,W]=(0,t.useState)(null),[H,$]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==_&&_.setMap(y)}),[y]),(0,t.useEffect)((()=>{_&&i&&(null!==b&&google.maps.event.removeListener(b),E(google.maps.event.addListener(_,"dblclick",i)))}),[i]),(0,t.useEffect)((()=>{_&&s&&(null!==C&&google.maps.event.removeListener(C),S(google.maps.event.addListener(_,"mousedown",s)))}),[s]),(0,t.useEffect)((()=>{_&&o&&(null!==k&&google.maps.event.removeListener(k),I(google.maps.event.addListener(_,"mousemove",o)))}),[o]),(0,t.useEffect)((()=>{_&&a&&(null!==T&&google.maps.event.removeListener(T),x(google.maps.event.addListener(_,"mouseout",a)))}),[a]),(0,t.useEffect)((()=>{_&&l&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(_,"mouseover",l)))}),[l]),(0,t.useEffect)((()=>{_&&u&&(null!==N&&google.maps.event.removeListener(N),R(google.maps.event.addListener(_,"mouseup",u)))}),[u]),(0,t.useEffect)((()=>{_&&c&&(null!==O&&google.maps.event.removeListener(O),M(google.maps.event.addListener(_,"rightclick",c)))}),[c]),(0,t.useEffect)((()=>{_&&r&&(null!==A&&google.maps.event.removeListener(A),D(google.maps.event.addListener(_,"click",r)))}),[r]),(0,t.useEffect)((()=>{_&&h&&(null!==j&&google.maps.event.removeListener(j),U(google.maps.event.addListener(_,"addfeature",h)))}),[h]),(0,t.useEffect)((()=>{_&&d&&(null!==F&&google.maps.event.removeListener(F),V(google.maps.event.addListener(_,"removefeature",d)))}),[d]),(0,t.useEffect)((()=>{_&&p&&(null!==z&&google.maps.event.removeListener(z),B(google.maps.event.addListener(_,"removeproperty",p)))}),[p]),(0,t.useEffect)((()=>{_&&f&&(null!==q&&google.maps.event.removeListener(q),W(google.maps.event.addListener(_,"setgeometry",f)))}),[f]),(0,t.useEffect)((()=>{_&&g&&(null!==H&&google.maps.event.removeListener(H),$(google.maps.event.addListener(_,"setproperty",g)))}),[g]),(0,t.useEffect)((()=>{if(null!==y){var e=new google.maps.Data(tr(tr({},n),{},{map:y}));i&&E(google.maps.event.addListener(e,"dblclick",i)),s&&S(google.maps.event.addListener(e,"mousedown",s)),o&&I(google.maps.event.addListener(e,"mousemove",o)),a&&x(google.maps.event.addListener(e,"mouseout",a)),l&&P(google.maps.event.addListener(e,"mouseover",l)),u&&R(google.maps.event.addListener(e,"mouseup",u)),c&&M(google.maps.event.addListener(e,"rightclick",c)),r&&D(google.maps.event.addListener(e,"click",r)),h&&U(google.maps.event.addListener(e,"addfeature",h)),d&&V(google.maps.event.addListener(e,"removefeature",d)),p&&B(google.maps.event.addListener(e,"removeproperty",p)),f&&W(google.maps.event.addListener(e,"setgeometry",f)),g&&$(google.maps.event.addListener(e,"setproperty",g)),w(e),m&&m(e)}return()=>{_&&(null!==b&&google.maps.event.removeListener(b),null!==C&&google.maps.event.removeListener(C),null!==k&&google.maps.event.removeListener(k),null!==T&&google.maps.event.removeListener(T),null!==L&&google.maps.event.removeListener(L),null!==N&&google.maps.event.removeListener(N),null!==O&&google.maps.event.removeListener(O),null!==A&&google.maps.event.removeListener(A),null!==j&&google.maps.event.removeListener(j),null!==F&&google.maps.event.removeListener(F),null!==z&&google.maps.event.removeListener(z),null!==q&&google.maps.event.removeListener(q),null!==H&&google.maps.event.removeListener(H),v&&v(_),_.setMap(null))}}),[]),null}));class ir extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"state",{data:null}),Oe(this,"setDataCallback",(()=>{null!==this.state.data&&this.props.onLoad&&this.props.onLoad(this.state.data)}))}componentDidMount(){if(null!==this.context){var e=new google.maps.Data(tr(tr({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:rr,eventMap:nr,prevProps:{},nextProps:this.props,instance:e}),this.setState((()=>({data:e})),this.setDataCallback)}}componentDidUpdate(e){null!==this.state.data&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:rr,eventMap:nr,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){null!==this.state.data&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),ze(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oe(ir,"contextType",je);var ar={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},lr={options(e,t){e.setOptions(t)},url(e,t){e.setUrl(t)},zIndex(e,t){e.setZIndex(t)}};class ur extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"state",{kmlLayer:null}),Oe(this,"setKmlLayerCallback",(()=>{null!==this.state.kmlLayer&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)}))}componentDidMount(){var e=new google.maps.KmlLayer(or(or({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:lr,eventMap:ar,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{kmlLayer:e}}),this.setKmlLayerCallback)}componentDidUpdate(e){null!==this.state.kmlLayer&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:lr,eventMap:ar,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){null!==this.state.kmlLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),ze(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}function cr(e,t){return"function"===typeof t?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function hr(e,t){return new t(e.lat,e.lng)}function dr(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function pr(e,t,n,r){return void 0!==n?function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n.getNorthEast()),i=e&&e.fromLatLngToDivPixel(n.getSouthWest());return r&&i?{left:"".concat(i.x+t.x,"px"),top:"".concat(r.y+t.y,"px"),width:"".concat(r.x-i.x-t.x,"px"),height:"".concat(i.y-r.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}(e,t,(i=n,s=google.maps.LatLngBounds,o=dr,i instanceof s?i:o(i,s))):function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n);if(r){var{x:i,y:s}=r;return{left:"".concat(i+t.x,"px"),top:"".concat(s+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}(e,t,function(e,t,n){return e instanceof t?e:n(e,t)}(r,google.maps.LatLng,hr));var i,s,o}function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gr(e,t,n,r,i){class s extends google.maps.OverlayView{constructor(e,t,n,r){super(),this.container=e,this.pane=t,this.position=n,this.bounds=r}onAdd(){var e,t=null===(e=this.getPanes())||void 0===e?void 0:e[this.pane];null===t||void 0===t||t.appendChild(this.container)}draw(){var e=this.getProjection(),t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.container?cr(this.container,i):{x:0,y:0}),n=pr(e,t,this.bounds,this.position);for(var[r,s]of Object.entries(n))this.container.style[r]=s}onRemove(){null!==this.container.parentNode&&this.container.parentNode.removeChild(this.container)}}return new s(e,t,n,r)}function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vr(e){return e?(e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng))+"":""}function yr(e){return e?(e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west)))+"":""}Oe(ur,"contextType",je);(0,t.memo)((function(e){var{position:n,bounds:r,mapPaneName:i,zIndex:o,onLoad:a,onUnmount:l,getPixelPositionOffset:u,children:c}=e,h=(0,t.useContext)(je),d=(0,t.useMemo)((()=>{var e=document.createElement("div");return e.style.position="absolute",e}),[]),p=(0,t.useMemo)((()=>gr(d,i,n,r,u)),[d,i,n,r]);return(0,t.useEffect)((()=>(null===a||void 0===a||a(p),null===p||void 0===p||p.setMap(h),()=>{null===l||void 0===l||l(p),null===p||void 0===p||p.setMap(null)})),[h,p]),(0,t.useEffect)((()=>{d.style.zIndex="".concat(o)}),[o,d]),s.createPortal(c,d)}));class _r extends t.PureComponent{constructor(e){super(e),Oe(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),Oe(this,"updatePane",(()=>{var e=this.props.mapPaneName,t=this.overlayView.getPanes();De(!!e,"OverlayView requires props.mapPaneName but got %s",e),t?this.setState({paneEl:t[e]}):this.setState({paneEl:null})})),Oe(this,"onAdd",(()=>{var e,t;this.updatePane(),null===(e=(t=this.props).onLoad)||void 0===e||e.call(t,this.overlayView)})),Oe(this,"onPositionElement",(()=>{var e,t,n,r,i,s,o=this.overlayView.getProjection(),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({x:0,y:0},this.containerRef.current?cr(this.containerRef.current,this.props.getPixelPositionOffset):{}),l=pr(o,a,this.props.bounds,this.props.position);(i=l,s={left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height},i.left!==s.left||i.top!==s.top||i.width!==s.height||i.height!==s.height)&&this.setState({containerStyle:{top:null!==(e=l.top)&&void 0!==e?e:0,left:null!==(t=l.left)&&void 0!==t?t:0,width:null!==(n=l.width)&&void 0!==n?n:0,height:null!==(r=l.height)&&void 0!==r?r:0,position:"absolute"}})})),Oe(this,"draw",(()=>{this.onPositionElement()})),Oe(this,"onRemove",(()=>{var e,t;this.setState((()=>({paneEl:null}))),null===(e=(t=this.props).onUnmount)||void 0===e||e.call(t,this.overlayView)})),this.containerRef=(0,t.createRef)();var n=new google.maps.OverlayView;n.onAdd=this.onAdd,n.draw=this.draw,n.onRemove=this.onRemove,this.overlayView=n}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var t=vr(e.position),n=vr(this.props.position),r=yr(e.bounds),i=yr(this.props.bounds);t===n&&r===i||this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?s.createPortal((0,Pe.jsx)("div",{ref:this.containerRef,style:this.state.containerStyle,children:t.Children.only(this.props.children)}),e):null}}function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oe(_r,"FLOAT_PANE","floatPane"),Oe(_r,"MAP_PANE","mapPane"),Oe(_r,"MARKER_LAYER","markerLayer"),Oe(_r,"OVERLAY_LAYER","overlayLayer"),Oe(_r,"OVERLAY_MOUSE_TARGET","overlayMouseTarget"),Oe(_r,"contextType",je);var Er={onDblClick:"dblclick",onClick:"click"},Cr={opacity(e,t){e.setOpacity(t)}};(0,t.memo)((function(e){var{url:n,bounds:r,options:i,visible:s}=e,o=(0,t.useContext)(je),a=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east)),l=(0,t.useMemo)((()=>new google.maps.GroundOverlay(n,a,i)),[]);return(0,t.useEffect)((()=>{null!==l&&l.setMap(o)}),[o]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==l&&(l.set("url",n),l.setMap(o))}),[l,n]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==l&&l.setOpacity(s?1:0)}),[l,s]),(0,t.useEffect)((()=>{var e=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east));"undefined"!==typeof r&&null!==l&&(l.set("bounds",e),l.setMap(o))}),[l,r]),null}));class Sr extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"state",{groundOverlay:null}),Oe(this,"setGroundOverlayCallback",(()=>{null!==this.state.groundOverlay&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)}))}componentDidMount(){De(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,br(br({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:Cr,eventMap:Er,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{groundOverlay:e}}),this.setGroundOverlayCallback)}componentDidUpdate(e){null!==this.state.groundOverlay&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:Cr,eventMap:Er,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oe(Sr,"defaultProps",{onLoad:function(){}}),Oe(Sr,"contextType",je);var Tr={},xr={data(e,t){e.setData(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var{data:n,onLoad:r,onUnmount:i,options:s}=e,o=(0,t.useContext)(je),[a,l]=(0,t.useState)(null);return(0,t.useEffect)((()=>{google.maps.visualization||De(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)}),[]),(0,t.useEffect)((()=>{De(!!n,"data property is required in HeatmapLayer %s",n)}),[n]),(0,t.useEffect)((()=>{null!==a&&a.setMap(o)}),[o]),(0,t.useEffect)((()=>{s&&null!==a&&a.setOptions(s)}),[a,s]),(0,t.useEffect)((()=>{var e=new google.maps.visualization.HeatmapLayer(Ir(Ir({},s),{},{data:n,map:o}));return l(e),r&&r(e),()=>{null!==a&&(i&&i(a),a.setMap(null))}}),[]),null}));class Lr extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"state",{heatmapLayer:null}),Oe(this,"setHeatmapLayerCallback",(()=>{null!==this.state.heatmapLayer&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)}))}componentDidMount(){De(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),De(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Ir(Ir({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=Be({updaterMap:xr,eventMap:Tr,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{heatmapLayer:e}}),this.setHeatmapLayerCallback)}componentDidUpdate(e){ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:xr,eventMap:Tr,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){null!==this.state.heatmapLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),ze(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}Oe(Lr,"contextType",je);var Pr={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},Nr={register(e,t,n){e.registerPanoProvider(t,n)},links(e,t){e.setLinks(t)},motionTracking(e,t){e.setMotionTracking(t)},options(e,t){e.setOptions(t)},pano(e,t){e.setPano(t)},position(e,t){e.setPosition(t)},pov(e,t){e.setPov(t)},visible(e,t){e.setVisible(t)},zoom(e,t){e.setZoom(t)}};class Rr extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"state",{streetViewPanorama:null}),Oe(this,"setStreetViewPanoramaCallback",(()=>{null!==this.state.streetViewPanorama&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)}))}componentDidMount(){var e,t,n=null!==(e=null===(t=this.context)||void 0===t?void 0:t.getStreetView())&&void 0!==e?e:null;this.registeredEvents=Be({updaterMap:Nr,eventMap:Pr,prevProps:{},nextProps:this.props,instance:n}),this.setState((()=>({streetViewPanorama:n})),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){null!==this.state.streetViewPanorama&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:Nr,eventMap:Pr,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){null!==this.state.streetViewPanorama&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),ze(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}Oe(Rr,"contextType",je);class Or extends t.PureComponent{constructor(){super(...arguments),Oe(this,"state",{streetViewService:null}),Oe(this,"setStreetViewServiceCallback",(()=>{null!==this.state.streetViewService&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)}))}componentDidMount(){var e=new google.maps.StreetViewService;this.setState((function(){return{streetViewService:e}}),this.setStreetViewServiceCallback)}componentWillUnmount(){null!==this.state.streetViewService&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}Oe(Or,"contextType",je);t.PureComponent;var Mr={onDirectionsChanged:"directions_changed"},Ar={directions(e,t){e.setDirections(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},panel(e,t){e.setPanel(t)},routeIndex(e,t){e.setRouteIndex(t)}};class Dr extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"state",{directionsRenderer:null}),Oe(this,"setDirectionsRendererCallback",(()=>{null!==this.state.directionsRenderer&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))}))}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=Be({updaterMap:Ar,eventMap:Mr,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{directionsRenderer:e}}),this.setDirectionsRendererCallback)}componentDidUpdate(e){null!==this.state.directionsRenderer&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:Ar,eventMap:Mr,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){null!==this.state.directionsRenderer&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),ze(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}Oe(Dr,"contextType",je);t.PureComponent;var jr={onPlacesChanged:"places_changed"},Ur={bounds(e,t){e.setBounds(t)}};class Fr extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"containerElement",(0,t.createRef)()),Oe(this,"state",{searchBox:null}),Oe(this,"setSearchBoxCallback",(()=>{null!==this.state.searchBox&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)}))}componentDidMount(){if(De(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),null!==this.containerElement&&null!==this.containerElement.current){var e=this.containerElement.current.querySelector("input");if(null!==e){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=Be({updaterMap:Ur,eventMap:jr,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{searchBox:t}}),this.setSearchBoxCallback)}}}componentDidUpdate(e){null!==this.state.searchBox&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:Ur,eventMap:jr,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){null!==this.state.searchBox&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),ze(this.registeredEvents))}render(){return(0,Pe.jsx)("div",{ref:this.containerElement,children:t.Children.only(this.props.children)})}}Oe(Fr,"contextType",je);var Vr={onPlaceChanged:"place_changed"},zr={bounds(e,t){e.setBounds(t)},restrictions(e,t){e.setComponentRestrictions(t)},fields(e,t){e.setFields(t)},options(e,t){e.setOptions(t)},types(e,t){e.setTypes(t)}};class Br extends t.PureComponent{constructor(){super(...arguments),Oe(this,"registeredEvents",[]),Oe(this,"containerElement",(0,t.createRef)()),Oe(this,"state",{autocomplete:null}),Oe(this,"setAutocompleteCallback",(()=>{null!==this.state.autocomplete&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)}))}componentDidMount(){var e;De(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=null===(e=this.containerElement.current)||void 0===e?void 0:e.querySelector("input");if(t){var n=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=Be({updaterMap:zr,eventMap:Vr,prevProps:{},nextProps:this.props,instance:n}),this.setState((()=>({autocomplete:n})),this.setAutocompleteCallback)}}componentDidUpdate(e){ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:zr,eventMap:Vr,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){null!==this.state.autocomplete&&ze(this.registeredEvents)}render(){return(0,Pe.jsx)("div",{ref:this.containerElement,className:this.props.className,children:t.Children.only(this.props.children)})}}Oe(Br,"defaultProps",{className:""}),Oe(Br,"contextType",je);const qr={width:"100%",height:"400px"};const Wr=function(e){let{sourceLat:n,sourceLng:r,destinationLat:i,destinationLng:s}=e;const[o,a]=(0,t.useState)(null);return(0,Pe.jsx)(He,{mapContainerStyle:qr,center:{lat:n,lng:r},zoom:10,onLoad:e=>{if(window.google&&window.google.maps){(new window.google.maps.DirectionsService).route({origin:{lat:n,lng:r},destination:{lat:i,lng:s},travelMode:window.google.maps.TravelMode.DRIVING},((e,t)=>{t===window.google.maps.DirectionsStatus.OK?a(e):console.error(`Error fetching directions: ${t}`)}))}else console.error("Google Maps API is not loaded")},children:o&&(0,Pe.jsx)(Dr,{directions:o})})};const Hr=function(e){let{googleMapsApiKey:n,sourceLat:r,sourceLng:i,destinationLat:s,destinationLng:o}=e;const[a,l]=(0,t.useState)(null),[u,c]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{const e=new window.google.maps.DirectionsService,t={origin:new window.google.maps.LatLng(r,i),destination:new window.google.maps.LatLng(s,o),travelMode:window.google.maps.TravelMode.DRIVING};e.route(t,((e,t)=>{t===window.google.maps.DirectionsStatus.OK?l(e):console.error(`Error fetching directions: ${t}`)}))}),[u,r,i,s,o]),(0,Pe.jsx)(rt,{googleMapsApiKey:n,onLoad:()=>c(!0),children:(0,Pe.jsx)("div",{children:(0,Pe.jsx)(He,{mapContainerStyle:{width:"100%",height:"400px"},zoom:10,center:{lat:r,lng:i},children:a&&(0,Pe.jsx)(Dr,{directions:a})})})})};const $r=function(){return(0,Pe.jsxs)("div",{className:"home-container",children:[(0,Pe.jsxs)("div",{className:"header-text",children:[(0,Pe.jsx)("img",{src:"/BlaBlaCar.png",alt:"Logo",className:"logos"}),(0,Pe.jsx)("h1",{children:"Welcome to Blabla Ride Sharing"})]}),(0,Pe.jsx)("p",{className:"para",children:"Find and book a ride or offer one to others!"}),(0,Pe.jsxs)("div",{className:"link-container",children:[(0,Pe.jsx)(ke,{to:"/publish-ride",className:"home-link",children:"Publish a Ride"}),(0,Pe.jsx)(ke,{to:"/search-ride",className:"home-link",children:"Search for a Ride"}),(0,Pe.jsx)(ke,{to:"/profile",className:"home-link",children:"Profile"}),(0,Pe.jsx)(ke,{to:"/your-rides",className:"home-link",children:"Your Rides"})]})]})},Kr=!1,Gr=!1,Qr="${JSCORE_VERSION}",Yr=function(e,t){if(!e)throw Xr(t)},Xr=function(e){return new Error("Firebase Database ("+Qr+") INTERNAL ASSERT FAILED: "+e)},Jr=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Zr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Jr(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new ei;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ei extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ti=function(e){const t=Jr(e);return Zr.encodeByteArray(t,!0)},ni=function(e){return ti(e).replace(/\./g,"")},ri=function(e){try{return Zr.decodeString(e,!0)}catch(NS){console.error("base64Decode failed: ",NS)}return null};function ii(e){return si(void 0,e)}function si(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=si(e[n],t[n]));return e}const oi=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ai=()=>{try{return oi()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyASCnXS0GK9Fd2diDiMsVpLI30bMZtFk6c",REACT_APP_FIREBASE_AUTH_DOMAIN:"blabla-4493a.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://blabla-4493a-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"blabla-4493a",REACT_APP_GOOGLE_MAPS_API_KEY:"AlzaSyCfIZ_pMopID6nYkLALRIaWoXGuKb8esJq"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(NS){return}const t=e&&ri(e[1]);return t&&JSON.parse(t)})()}catch(NS){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${NS}`)}},li=e=>{var t,n;return null===(n=null===(t=ai())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},ui=e=>{const t=li(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},ci=()=>{var e;return null===(e=ai())||void 0===e?void 0:e.config},hi=e=>{var t;return null===(t=ai())||void 0===t?void 0:t[`_${e}`]};class di{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function pi(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ni(JSON.stringify({alg:"none",type:"JWT"})),ni(JSON.stringify(s)),""].join(".")}function fi(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function gi(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fi())}function mi(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function vi(){return!0===Kr||!0===Gr}function yi(){return!function(){var e;const t=null===(e=ai())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(NS){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _i(){try{return"object"===typeof indexedDB}catch(NS){return!1}}class wi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bi.prototype.create)}}class bi{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Ei,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new wi(n,s,t)}}const Ei=/\{\$([^}]+)}/g;function Ci(e){return JSON.parse(e)}function Si(e){return JSON.stringify(e)}const ki=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=Ci(ri(s[0])||""),n=Ci(ri(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(NS){}return{header:t,claims:n,data:r,signature:i}};function Ii(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ti(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function xi(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Li(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Pi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Ni(n)&&Ni(s)){if(!Pi(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ni(e){return null!==e&&"object"===typeof e}function Ri(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Oi(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Mi(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Ai{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let c=0;c<16;c++)n[c]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let c=0;c<16;c++)n[c]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let c=16;c<80;c++){const e=n[c-3]^n[c-8]^n[c-14]^n[c-16];n[c]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],u=this.chain_[4];for(let c=0;c<80;c++){c<40?c<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):c<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+u+i+n[c]&4294967295;u=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class Di{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ji),void 0===r.error&&(r.error=ji),void 0===r.complete&&(r.complete=ji);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(NS){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(NS){"undefined"!==typeof console&&console.error&&console.error(NS)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ji(){}function Ui(e,t){return`${e} failed: ${t} argument `}const Fi=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Vi(e){return e&&e._delegate?e._delegate:e}class zi{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Bi="[DEFAULT]";class qi{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new di;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(NS){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(NS){if(r)return null;throw NS}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch(NS){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(NS){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bi;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bi;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Bi?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bi;return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Wi{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qi(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Hi=[];var $i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}($i||($i={}));const Ki={debug:$i.DEBUG,verbose:$i.VERBOSE,info:$i.INFO,warn:$i.WARN,error:$i.ERROR,silent:$i.SILENT},Gi=$i.INFO,Qi={[$i.DEBUG]:"log",[$i.VERBOSE]:"log",[$i.INFO]:"info",[$i.WARN]:"warn",[$i.ERROR]:"error"},Yi=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Qi[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class Xi{constructor(e){this.name=e,this._logLevel=Gi,this._logHandler=Yi,this._userLogHandler=null,Hi.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ki[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$i.DEBUG,...t),this._logHandler(this,$i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$i.VERBOSE,...t),this._logHandler(this,$i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$i.INFO,...t),this._logHandler(this,$i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$i.WARN,...t),this._logHandler(this,$i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$i.ERROR,...t),this._logHandler(this,$i.ERROR,...t)}}let Ji,Zi;const es=new WeakMap,ts=new WeakMap,ns=new WeakMap,rs=new WeakMap,is=new WeakMap;let ss={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ts.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ns.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ls(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function os(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Zi||(Zi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(us(this),n),ls(es.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ls(e.apply(us(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(us(this),t,...r);return ns.set(s,t.sort?t.sort():[t]),ls(s)}}function as(e){return"function"===typeof e?os(e):(e instanceof IDBTransaction&&function(e){if(ts.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));ts.set(e,t)}(e),t=e,(Ji||(Ji=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,ss):e);var t}function ls(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ls(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&es.set(t,e)})).catch((()=>{})),is.set(t,e),t}(e);if(rs.has(e))return rs.get(e);const t=as(e);return t!==e&&(rs.set(e,t),is.set(t,e)),t}const us=e=>is.get(e);const cs=["get","getKey","getAll","getAllKeys","count"],hs=["put","add","delete","clear"],ds=new Map;function ps(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ds.get(t))return ds.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=hs.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!cs.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ds.set(t,s),s}ss=(e=>({...e,get:(t,n,r)=>ps(t,n)||e.get(t,n,r),has:(t,n)=>!!ps(t,n)||e.has(t,n)}))(ss);class fs{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const gs="@firebase/app",ms="0.10.15",vs=new Xi("@firebase/app"),ys="@firebase/app-compat",_s="@firebase/analytics-compat",ws="@firebase/analytics",bs="@firebase/app-check-compat",Es="@firebase/app-check",Cs="@firebase/auth",Ss="@firebase/auth-compat",ks="@firebase/database",Is="@firebase/data-connect",Ts="@firebase/database-compat",xs="@firebase/functions",Ls="@firebase/functions-compat",Ps="@firebase/installations",Ns="@firebase/installations-compat",Rs="@firebase/messaging",Os="@firebase/messaging-compat",Ms="@firebase/performance",As="@firebase/performance-compat",Ds="@firebase/remote-config",js="@firebase/remote-config-compat",Us="@firebase/storage",Fs="@firebase/storage-compat",Vs="@firebase/firestore",zs="@firebase/vertexai",Bs="@firebase/firestore-compat",qs="firebase",Ws="[DEFAULT]",Hs={[gs]:"fire-core",[ys]:"fire-core-compat",[ws]:"fire-analytics",[_s]:"fire-analytics-compat",[Es]:"fire-app-check",[bs]:"fire-app-check-compat",[Cs]:"fire-auth",[Ss]:"fire-auth-compat",[ks]:"fire-rtdb",[Is]:"fire-data-connect",[Ts]:"fire-rtdb-compat",[xs]:"fire-fn",[Ls]:"fire-fn-compat",[Ps]:"fire-iid",[Ns]:"fire-iid-compat",[Rs]:"fire-fcm",[Os]:"fire-fcm-compat",[Ms]:"fire-perf",[As]:"fire-perf-compat",[Ds]:"fire-rc",[js]:"fire-rc-compat",[Us]:"fire-gcs",[Fs]:"fire-gcs-compat",[Vs]:"fire-fst",[Bs]:"fire-fst-compat",[zs]:"fire-vertex","fire-js":"fire-js",[qs]:"fire-js-all"},$s=new Map,Ks=new Map,Gs=new Map;function Qs(e,t){try{e.container.addComponent(t)}catch(NS){vs.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,NS)}}function Ys(e){const t=e.name;if(Gs.has(t))return vs.debug(`There were multiple attempts to register component ${t}.`),!1;Gs.set(t,e);for(const n of $s.values())Qs(n,e);for(const n of Ks.values())Qs(n,e);return!0}function Xs(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Js(e){return void 0!==e.settings}const Zs=new bi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class eo{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new zi("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zs.create("app-deleted",{appName:this._name})}}const to="11.0.1";function no(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ws,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Zs.create("bad-app-name",{appName:String(i)});if(n||(n=ci()),!n)throw Zs.create("no-options");const s=$s.get(i);if(s){if(Pi(n,s.options)&&Pi(r,s.config))return s;throw Zs.create("duplicate-app",{appName:i})}const o=new Wi(i);for(const l of Gs.values())o.addComponent(l);const a=new eo(n,r,o);return $s.set(i,a),a}function ro(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ws;const t=$s.get(e);if(!t&&e===Ws&&ci())return no();if(!t)throw Zs.create("no-app",{appName:e});return t}function io(e,t,n){var r;let i=null!==(r=Hs[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void vs.warn(e.join(" "))}Ys(new zi(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const so="firebase-heartbeat-store";let oo=null;function ao(){return oo||(oo=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=ls(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(ls(o.result),e.oldVersion,e.newVersion,ls(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(so)}catch(NS){console.warn(NS)}}}).catch((e=>{throw Zs.create("idb-open",{originalErrorMessage:e.message})}))),oo}async function lo(e,t){try{const n=(await ao()).transaction(so,"readwrite"),r=n.objectStore(so);await r.put(t,uo(e)),await n.done}catch(NS){if(NS instanceof wi)vs.warn(NS.message);else{const t=Zs.create("idb-set",{originalErrorMessage:null===NS||void 0===NS?void 0:NS.message});vs.warn(t.message)}}}function uo(e){return`${e.name}!${e.options.appId}`}class co{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new po(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ho();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(NS){vs.warn(NS)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ho(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),fo(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),fo(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=ni(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(NS){return vs.warn(NS),""}}}function ho(){return(new Date).toISOString().substring(0,10)}class po{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!_i()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Ky){t(Ky)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ao()).transaction(so),n=await t.objectStore(so).get(uo(e));return await t.done,n}catch(NS){if(NS instanceof wi)vs.warn(NS.message);else{const t=Zs.create("idb-get",{originalErrorMessage:null===NS||void 0===NS?void 0:NS.message});vs.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return lo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return lo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function fo(e){return ni(JSON.stringify({version:2,heartbeats:e})).length}var go;go="",Ys(new zi("platform-logger",(e=>new fs(e)),"PRIVATE")),Ys(new zi("heartbeat",(e=>new co(e)),"PRIVATE")),io(gs,ms,go),io(gs,ms,"esm2017"),io("fire-js","");io("firebase","11.0.1","app");function mo(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function vo(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yo=vo,_o=new bi("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),wo=new Xi("@firebase/auth");function bo(e){if(wo.logLevel<=$i.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];wo.error(`Auth (${to}): ${e}`,...n)}}function Eo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Io(e,...n)}function Co(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Io(e,...n)}function So(e,t,n){const r=Object.assign(Object.assign({},yo()),{[t]:n});return new bi("auth","Firebase",r).create(t,{appName:e.name})}function ko(e){return So(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Io(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return _o.create(e,...n)}function To(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Io(t,...r)}}function xo(e){const t="INTERNAL ASSERTION FAILED: "+e;throw bo(t),new Error(t)}function Lo(e,t){e||xo(t)}function Po(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function No(){return"http:"===Ro()||"https:"===Ro()}function Ro(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Oo(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(No()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Mo{constructor(e,t){this.shortDelay=e,this.longDelay=t,Lo(t>e,"Short delay should be less than long delay!"),this.isMobile=gi()||mi()}get(){return Oo()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ao(e,t){Lo(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Do{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void xo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void xo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void xo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const jo={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Uo=new Mo(3e4,6e4);function Fo(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Vo(e,t,n,r){return zo(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Ri(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Do.fetch()(qo(e,e.config.apiHost,n,o),l)}))}async function zo(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},jo),t);try{const t=new Ho(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw $o(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw $o(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw $o(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw $o(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw So(e,a,o);Eo(e,a)}}catch(NS){if(NS instanceof wi)throw NS;Eo(e,"network-request-failed",{message:String(NS)})}}async function Bo(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Vo(e,t,n,r,i);return"mfaPendingCredential"in s&&Eo(e,"multi-factor-auth-required",{_serverResponse:s}),s}function qo(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Ao(e.config,i):`${e.config.apiScheme}://${i}`}function Wo(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ho{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Co(this.auth,"network-request-failed"))),Uo.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function $o(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Co(e,t,r);return i.customData._tokenResponse=n,i}function Ko(e){return void 0!==e&&void 0!==e.enterprise}class Go{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Wo(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Qo(e,t){return Vo(e,"GET","/v2/recaptchaConfig",Fo(e,t))}async function Yo(e,t){return Vo(e,"POST","/v1/accounts:lookup",t)}function Xo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(NS){}}function Jo(e){return 1e3*Number(e)}function Zo(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return bo("JWT malformed, contained fewer than 3 sections"),null;try{const e=ri(n);return e?JSON.parse(e):(bo("Failed to decode base64 JWT payload"),null)}catch(NS){return bo("Caught error parsing JWT payload as JSON",null===NS||void 0===NS?void 0:NS.toString()),null}}function ea(e){const t=Zo(e);return To(t,"internal-error"),To("undefined"!==typeof t.exp,"internal-error"),To("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ta(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(NS){throw NS instanceof wi&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(NS)&&e.auth.currentUser===e&&await e.auth.signOut(),NS}}class na{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(NS){return void("auth/network-request-failed"===(null===NS||void 0===NS?void 0:NS.code)&&this.schedule(!0))}this.schedule()}}class ra{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xo(this.lastLoginAt),this.creationTime=Xo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ia(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ta(e,Yo(n,{idToken:r}));To(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?sa(s.providerUserInfo):[],a=(l=e.providerData,u=o,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const c=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!c&&h,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ra(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,p)}function sa(e){return e.map((e=>{var{providerId:t}=e,n=mo(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){To(e.idToken,"internal-error"),To("undefined"!==typeof e.idToken,"internal-error"),To("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):ea(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){To(0!==e.length,"internal-error");const t=ea(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(To(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await zo(e,{},(async()=>{const n=Ri({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=qo(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Do.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new oa;return n&&(To("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(To("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(To("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oa,this.toJSON())}_performRefresh(){return xo("not implemented")}}function aa(e,t){To("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class la{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=mo(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new na(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ra(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ta(this,this.stsTokenManager.getToken(this.auth,e));return To(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Vi(e),r=await n.getIdToken(t),i=Zo(r);To(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xo(Jo(i.auth_time)),issuedAtTime:Xo(Jo(i.iat)),expirationTime:Xo(Jo(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Vi(e);await ia(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(To(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new la(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){To(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ia(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Js(this.auth.app))return Promise.reject(ko(this.auth));const e=await this.getIdToken();return await ta(this,async function(e,t){return Vo(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:E}=t;To(y&&E,e,"internal-error");const C=oa.fromJSON(this.name,E);To("string"===typeof y,e,"internal-error"),aa(c,e.name),aa(h,e.name),To("boolean"===typeof _,e,"internal-error"),To("boolean"===typeof w,e,"internal-error"),aa(d,e.name),aa(p,e.name),aa(f,e.name),aa(g,e.name),aa(m,e.name),aa(v,e.name);const S=new la({uid:y,auth:e,email:h,emailVerified:_,displayName:c,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:C,createdAt:m,lastLoginAt:v});return b&&Array.isArray(b)&&(S.providerData=b.map((e=>Object.assign({},e)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new oa;r.updateFromServerResponse(t);const i=new la({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ia(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];To(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?sa(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new oa;o.updateFromIdToken(n);const a=new la({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ra(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const ua=new Map;function ca(e){Lo(e instanceof Function,"Expected a class definition");let t=ua.get(e);return t?(Lo(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ua.set(e,t),t)}class ha{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ha.type="NONE";const da=ha;function pa(e,t,n){return`firebase:${e}:${t}:${n}`}class fa{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=pa(this.userKey,r.apiKey,i),this.fullPersistenceKey=pa("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?la._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new fa(ca(da),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ca(da);const s=pa(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){const n=la._fromJSON(e,t);u!==i&&(o=n),i=u;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new fa(i,e,n)):new fa(i,e,n)}}function ga(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_a(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ma(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ba(t))return"Blackberry";if(Ea(t))return"Webos";if(va(t))return"Safari";if((t.includes("chrome/")||ya(t))&&!t.includes("edge/"))return"Chrome";if(wa(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ma(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi();return/firefox\//i.test(e)}function va(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ya(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi();return/crios\//i.test(e)}function _a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi();return/iemobile/i.test(e)}function wa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi();return/android/i.test(e)}function ba(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi();return/blackberry/i.test(e)}function Ea(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi();return/webos/i.test(e)}function Ca(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Sa(){return function(){const e=fi();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ka(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi();return Ca(e)||wa(e)||Ea(e)||ba(e)||/windows phone/i.test(e)||_a(e)}function Ia(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ga(fi());break;case"Worker":t=`${ga(fi())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${to}/${r}`}class Ta{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(NS){r(NS)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(NS){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===NS||void 0===NS?void 0:NS.message})}}}class xa{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class La{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Na(this),this.idTokenSubscription=new Na(this),this.beforeStateQueue=new Ta(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_o,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ca(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await fa.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(NS){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Yo(this,{idToken:e}),n=await la._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Js(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(NS){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(NS)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return To(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(NS){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ia(e)}catch(NS){if("auth/network-request-failed"!==(null===NS||void 0===NS?void 0:NS.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Js(this.app))return Promise.reject(ko(this));const t=e?Vi(e):null;return t&&To(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&To(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Js(this.app)?Promise.reject(ko(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Js(this.app)?Promise.reject(ko(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(ca(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Vo(e,"GET","/v2/passwordPolicy",Fo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new xa(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bi("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Vo(e,"POST","/v2/accounts:revokeToken",Fo(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ca(e)||this._popupRedirectResolver;To(t,this,"argument-error"),this.redirectPersistenceManager=await fa.create(this,[ca(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(To(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return To(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ia(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(wo.logLevel<=$i.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];wo.warn(`Auth (${to}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Pa(e){return Vi(e)}class Na{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Di(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return To(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ra={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Oa(e){return Ra.loadJS(e)}function Ma(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Aa{constructor(){this.enterprise=new Da}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Da{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ja="NO_RECAPTCHA";class Ua{constructor(e){this.type="recaptcha-enterprise",this.auth=Pa(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ko(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(ja)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Aa).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Qo(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Go(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Ko(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ra.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Oa(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Fa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Ua(e);let o;if(i)o=ja;else try{o=await s.verify(n)}catch(Ky){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Va(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Fa(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Fa(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await Fa(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await Fa(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await Fa(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function za(e){const t=Pa(e),n=await Qo(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Go(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ua(t).verify()}}function Ba(e,t,n){const r=Pa(e);To(r._canInitEmulator,r,"emulator-config-failed"),To(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=qa(t),{host:o,port:a}=function(e){const t=qa(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Wa(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Wa(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function qa(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Wa(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ha{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xo("not implemented")}_getIdTokenResponse(e){return xo("not implemented")}_linkToIdToken(e,t){return xo("not implemented")}_getReauthenticationResolver(e){return xo("not implemented")}}async function $a(e,t){return Vo(e,"POST","/v1/accounts:signUp",t)}async function Ka(e,t){return Bo(e,"POST","/v1/accounts:signInWithPassword",Fo(e,t))}class Ga extends Ha{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ga(e,t,"password")}static _fromEmailAndCode(e,t){return new Ga(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Va(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ka,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Bo(e,"POST","/v1/accounts:signInWithEmailLink",Fo(e,t))}(e,{email:this._email,oobCode:this._password});default:Eo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Va(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$a,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Bo(e,"POST","/v1/accounts:signInWithEmailLink",Fo(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Eo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Qa(e,t){return Bo(e,"POST","/v1/accounts:signInWithIdp",Fo(e,t))}class Ya extends Ha{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Eo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=mo(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ya(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Qa(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qa(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qa(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ri(t)}return e}}async function Xa(e,t){return Vo(e,"POST","/v1/accounts:sendVerificationCode",Fo(e,t))}const Ja={USER_NOT_FOUND:"user-not-found"};class Za extends Ha{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Za({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Za({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Bo(e,"POST","/v1/accounts:signInWithPhoneNumber",Fo(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Bo(e,"POST","/v1/accounts:signInWithPhoneNumber",Fo(e,t));if(n.temporaryProof)throw $o(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Bo(e,"POST","/v1/accounts:signInWithPhoneNumber",Fo(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ja)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Za({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class el{constructor(e){var t,n,r,i,s,o;const a=Oi(Mi(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);To(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Oi(Mi(e)).link,n=t?Oi(Mi(t)).deep_link_id:null,r=Oi(Mi(e)).deep_link_id;return(r?Oi(Mi(r)).link:null)||r||n||t||e}(e);try{return new el(t)}catch(n){return null}}}class tl{constructor(){this.providerId=tl.PROVIDER_ID}static credential(e,t){return Ga._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=el.parseLink(t);return To(n,"argument-error"),Ga._fromEmailAndCode(e,n.code,n.tenantId)}}tl.PROVIDER_ID="password",tl.EMAIL_PASSWORD_SIGN_IN_METHOD="password",tl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class nl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class rl extends nl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class il extends rl{constructor(){super("facebook.com")}static credential(e){return Ya._fromParams({providerId:il.PROVIDER_ID,signInMethod:il.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return il.credentialFromTaggedObject(e)}static credentialFromError(e){return il.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return il.credential(t.oauthAccessToken)}catch(n){return null}}}il.FACEBOOK_SIGN_IN_METHOD="facebook.com",il.PROVIDER_ID="facebook.com";class sl extends rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ya._fromParams({providerId:sl.PROVIDER_ID,signInMethod:sl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return sl.credentialFromTaggedObject(e)}static credentialFromError(e){return sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return sl.credential(n,r)}catch(i){return null}}}sl.GOOGLE_SIGN_IN_METHOD="google.com",sl.PROVIDER_ID="google.com";class ol extends rl{constructor(){super("github.com")}static credential(e){return Ya._fromParams({providerId:ol.PROVIDER_ID,signInMethod:ol.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ol.credentialFromTaggedObject(e)}static credentialFromError(e){return ol.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ol.credential(t.oauthAccessToken)}catch(n){return null}}}ol.GITHUB_SIGN_IN_METHOD="github.com",ol.PROVIDER_ID="github.com";class al extends rl{constructor(){super("twitter.com")}static credential(e,t){return Ya._fromParams({providerId:al.PROVIDER_ID,signInMethod:al.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return al.credentialFromTaggedObject(e)}static credentialFromError(e){return al.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return al.credential(n,r)}catch(i){return null}}}async function ll(e,t){return Bo(e,"POST","/v1/accounts:signUp",Fo(e,t))}al.TWITTER_SIGN_IN_METHOD="twitter.com",al.PROVIDER_ID="twitter.com";class ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await la._fromIdTokenResponse(e,n,r),s=cl(n);return new ul({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=cl(n);return new ul({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function cl(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class hl extends wi{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,hl.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new hl(e,t,n,r)}}function dl(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw hl._fromErrorAndOperation(e,n,t,r);throw n}))}async function pl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ta(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ul._forOperation(e,"link",r)}async function fl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Js(r.app))return Promise.reject(ko(r));const i="reauthenticate";try{const s=await ta(e,dl(r,i,t,e),n);To(s.idToken,r,"internal-error");const o=Zo(s.idToken);To(o,r,"internal-error");const{sub:a}=o;return To(e.uid===a,r,"user-mismatch"),ul._forOperation(e,i,s)}catch(NS){throw"auth/user-not-found"===(null===NS||void 0===NS?void 0:NS.code)&&Eo(r,"user-mismatch"),NS}}async function gl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Js(e.app))return Promise.reject(ko(e));const r="signIn",i=await dl(e,r,t),s=await ul._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function ml(e,t){return gl(Pa(e),t)}async function vl(e){const t=Pa(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function yl(e,t){return Vo(e,"POST","/v2/accounts/mfaEnrollment:start",Fo(e,t))}new WeakMap;const _l="__sak";class wl{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_l,"1"),this.storage.removeItem(_l),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class bl extends wl{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ka(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Sa()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bl.type="LOCAL";const El=bl;class Cl extends wl{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Cl.type="SESSION";const Sl=Cl;class kl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new kl(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Il(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}kl.receivers=[];class Tl{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Il("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function xl(){return window}function Ll(){return"undefined"!==typeof xl().WorkerGlobalScope&&"function"===typeof xl().importScripts}const Pl="firebaseLocalStorageDb",Nl="firebaseLocalStorage",Rl="fbase_key";class Ol{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ml(e,t){return e.transaction([Nl],t?"readwrite":"readonly").objectStore(Nl)}function Al(){const e=indexedDB.open(Pl,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Nl,{keyPath:Rl})}catch(NS){n(NS)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Nl)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Pl);return new Ol(e).toPromise()}(),t(await Al()))}))}))}async function Dl(e,t,n){const r=Ml(e,!0).put({[Rl]:t,value:n});return new Ol(r).toPromise()}function jl(e,t){const n=Ml(e,!0).delete(t);return new Ol(n).toPromise()}class Ul{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Al()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(NS){if(t++>3)throw NS;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ll()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kl._getInstance(Ll()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Tl(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Al();return await Dl(e,_l,"1"),await jl(e,_l),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Dl(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ml(e,!1).get(t),r=await new Ol(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>jl(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ml(e,!1).getAll();return new Ol(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ul.type="LOCAL";const Fl=Ul;function Vl(e,t){return Vo(e,"POST","/v2/accounts/mfaSignIn:start",Fo(e,t))}Ma("rcb"),new Mo(3e4,6e4);const zl="recaptcha";async function Bl(e,t,n){var r;if(!e._getRecaptchaConfig())try{await za(e)}catch(Ky){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){To("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Va(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===ja){To((null===n||void 0===n?void 0:n.type)===zl,e,"argument-error");return yl(e,await ql(e,t,n))}return yl(e,t)}),"PHONE_PROVIDER"),o=await s.catch((e=>Promise.reject(e)));return o.phoneSessionInfo.sessionInfo}{To("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;To(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Va(e,o,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===ja){To((null===n||void 0===n?void 0:n.type)===zl,e,"argument-error");return Vl(e,await ql(e,t,n))}return Vl(e,t)}),"PHONE_PROVIDER"),l=await a.catch((e=>Promise.reject(e)));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Va(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===ja){To((null===n||void 0===n?void 0:n.type)===zl,e,"argument-error");return Xa(e,await ql(e,t,n))}return Xa(e,t)}),"PHONE_PROVIDER"),s=await r.catch((e=>Promise.reject(e)));return s.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function ql(e,t,n){To(n.type===zl,e,"argument-error");const r=await n.verify();To("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Wl{constructor(e){this.providerId=Wl.PROVIDER_ID,this.auth=Pa(e)}verifyPhoneNumber(e,t){return Bl(this.auth,e,Vi(t))}static credential(e,t){return Za._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Wl.credentialFromTaggedObject(t)}static credentialFromError(e){return Wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Za._fromTokenResponse(n,r):null}}function Hl(e,t){return t?ca(t):(To(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Wl.PROVIDER_ID="phone",Wl.PHONE_SIGN_IN_METHOD="phone";class $l extends Ha{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Kl(e){return gl(e.auth,new $l(e),e.bypassAuthState)}function Gl(e){const{auth:t,user:n}=e;return To(n,t,"internal-error"),fl(n,new $l(e),e.bypassAuthState)}async function Ql(e){const{auth:t,user:n}=e;return To(n,t,"internal-error"),pl(n,new $l(e),e.bypassAuthState)}class Yl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(NS){this.reject(NS)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(NS){this.reject(NS)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Kl;case"linkViaPopup":case"linkViaRedirect":return Ql;case"reauthViaPopup":case"reauthViaRedirect":return Gl;default:Eo(this.auth,"internal-error")}}resolve(e){Lo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xl=new Mo(2e3,1e4);class Jl extends Yl{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Jl.currentPopupAction&&Jl.currentPopupAction.cancel(),Jl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return To(e,this.auth,"internal-error"),e}async onExecution(){Lo(1===this.filter.length,"Popup operations only handle one event");const e=Il();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Co(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Co(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Co(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Xl.get())};e()}}Jl.currentPopupAction=null;const Zl=new Map;class eu extends Yl{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Zl.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ru(t),r=nu(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(NS){e=()=>Promise.reject(NS)}Zl.set(this.auth._key(),e)}return this.bypassAuthState||Zl.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function tu(e,t){Zl.set(e._key(),t)}function nu(e){return ca(e._redirectPersistence)}function ru(e){return pa("pendingRedirect",e.config.apiKey,e.name)}async function iu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Js(e.app))return Promise.reject(ko(e));const r=Pa(e),i=Hl(r,t),s=new eu(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class su{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return au(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!au(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Co(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ou(e))}saveEventToCache(e){this.cachedEventUids.add(ou(e)),this.lastProcessedEventTime=Date.now()}}function ou(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function au(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const lu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uu=/^https?/;async function cu(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Vo(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(hu(r))return}catch(n){}Eo(e,"unauthorized-domain")}function hu(e){const t=Po(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!uu.test(n))return!1;if(lu.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const du=new Mo(3e4,6e4);function pu(){const e=xl().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function fu(e){return new Promise(((t,n)=>{var r,i,s;function o(){pu(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{pu(),n(Co(e,"network-request-failed"))},timeout:du.get()})}if(null===(i=null===(r=xl().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=xl().gapi)||void 0===s?void 0:s.load)){const t=Ma("iframefcb");return xl()[t]=()=>{gapi.load?o():n(Co(e,"network-request-failed"))},Oa(`${Ra.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw gu=null,e}))}let gu=null;const mu=new Mo(5e3,15e3),vu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _u(e){const t=e.config;To(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ao(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:to},i=yu.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ri(r).slice(1)}`}async function wu(e){const t=await function(e){return gu=gu||fu(e),gu}(e),n=xl().gapi;return To(n,e,"internal-error"),t.open({where:document.body,url:_u(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vu,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Co(e,"network-request-failed"),s=xl().setTimeout((()=>{r(i)}),mu.get());function o(){xl().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const bu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Eu{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(NS){}}}function Cu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},bu),{width:r.toString(),height:i.toString(),top:s,left:o}),u=fi().toLowerCase();n&&(a=ya(u)?"_blank":n),ma(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return Ca(arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Eu(null);const h=window.open(t||"",a,c);To(h,e,"popup-blocked");try{h.focus()}catch(NS){}return new Eu(h)}const Su="__/auth/handler",ku="emulator/auth/handler",Iu=encodeURIComponent("fac");async function Tu(e,t,n,r,i,s){To(e.config.authDomain,e,"auth-domain-config-required"),To(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:to,eventId:i};if(t instanceof nl){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",xi(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof rl){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${Iu}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Su}`;return Ao(t,ku)}(e)}?${Ri(a).slice(1)}${u}`}const xu="webStorageSupport";const Lu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sl,this._completeRedirectFn=iu,this._overrideRedirectResult=tu}async _openPopup(e,t,n,r){var i;Lo(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Cu(e,await Tu(e,t,n,Po(),r),Il())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){xl().location.href=e}(await Tu(e,t,n,Po(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Lo(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await wu(e),n=new su(e);return t.register("authEvent",(t=>{To(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xu,{type:xu},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[xu];void 0!==i&&t(!!i),Eo(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cu(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ka()||va()||Ca()}};var Pu="@firebase/auth",Nu="1.8.0";class Ru{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){To(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ou=hi("authIdTokenMaxAge")||300;let Mu=null;var Au,Du;Au={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Co("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ra=Au,Du="Browser",Ys(new zi("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;To(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Du,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ia(Du)},u=new La(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ca);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ys(new zi("auth-internal",(e=>(e=>new Ru(e))(Pa(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),io(Pu,Nu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Du)),io(Pu,Nu,"esm2017");var ju,Uu,Fu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Vu={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(d(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(c(t))throw Error("division by zero");if(c(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=y(r,1),n=y(n,1)}return t=p(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=o(n)).j(t);h(u)||0<u.l(e);)u=(s=o(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=p(e,u)}return new g(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=p(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,p=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=p*m,f(n,2*i+2*s),n[2*i+2*s+1]+=l*m,f(n,2*i+2*s+1),n[2*i+2*s+1]+=p*g,f(n,2*i+2*s+1),n[2*i+2*s+2]+=l*g,f(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Uu=Vu.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(u))):i=(i=i.j(r)).add(o(u))}return i},ju=Vu.Integer=r}).apply("undefined"!==typeof Fu?Fu:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var zu,Bu,qu,Wu,Hu,$u,Ku,Gu,Qu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Yu={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Qu&&Qu];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var v=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function _(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function C(e){i.setTimeout((()=>{throw e}),0)}function S(){var e=L;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new I),(e=>e.reset()));class I{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,x=!1,L=new class{constructor(){this.h=this.g=null}add(e,t){const n=k.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(N)}};var N=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){C(n)}var t=k;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function R(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function A(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&A.aa.h.call(this)}}h(A,O);var D={2:"touch",3:"pen",4:"mouse"};A.prototype.h=function(){A.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new F(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),H={};function $(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)$(e,t[s],n,r,i);return null}return n=te(n),e&&e[j]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[W]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)M||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[j]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[j]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[j])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[W]=null)):V(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new A(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[W])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;b(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[j]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}h(le,R);var ue=[];function ce(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,pe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function fe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}fe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){O.call(this,"d")}function _e(){O.call(this,"c")}h(ye,O),h(_e,O);var we={},be=null;function Ee(){return be=be||new ne}function Ce(e){O.call(this,we.La,e)}function Se(e){const t=Ee();re(t,new Ce(t))}function ke(e,t){O.call(this,we.STAT_EVENT,e),this.stat=t}function Ie(e){const t=Ee();re(t,new ke(t,e))}function Te(e,t){O.call(this,we.Ma,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Le(){this.g=!0}function Pe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",h(Ce,O),we.STAT_EVENT="statevent",h(ke,O),we.Ma="timingevent",h(Te,O),Le.prototype.xa=function(){this.g=!1},Le.prototype.info=function(){};var Ne,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Me(){}function Ae(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}h(Me,fe),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},Ne=new Me;var je={},Ue={};function Fe(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new De,e.g=pn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ue[0]=i.toString()),i=ue);for(var s=0;s<i.length;s++){var o=$(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?_(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?je:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xe(u(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function $e(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}rn(n),Ie(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=xe(u(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!f(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(He(a),qe(a)),r.g=o}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=u[0]&&"close"!=u[0]||cn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?cn(n,7):Qt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Se()}catch(c){}}Ae.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||$t(this.g)))){this.J||4!=d||7==t||Se(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=$t(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),$e(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Ie(12),Ke(this),$e(this);break e}Pe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Ue){4==d&&(this.s=4,Ie(14),n=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}if(e==je){this.s=4,Ie(15),Pe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Pe(this.i,this.l,e,null),Ge(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ie(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Ie(11))}}else Pe(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),$e(this)}else Pe(this.i,this.l,a,null),Ge(this,a);4==d&&Ke(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),Ke(this),$e(this)}}}catch(Xu){}},Ae.prototype.cancel=function(){this.J=!0,Ke(this)},Ae.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Se(),Ie(17)),Ke(this),this.s=2,$e(this)):We(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ut(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ut(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ut(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ct(this,t),kt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,_t)),e.i=new bt(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function ht(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,wt)),e.join("")};var gt,mt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,_t=/[#\?@]/g,wt=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ct(e,t){Et(e),t=It(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return Et(e),t=It(e,t),e.g.has(t)}function kt(e,t,n){Ct(e,t),0<n.length&&(e.i=null,e.g.set(It(e,t),d(n)),e.h+=n.length)}function It(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function xt(){this.g=new pe}function Lt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(NS){throw t.push(r+"type="+encodeURIComponent("_badmap")),NS}}function Pt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Nt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Mt(e)}function Mt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function At(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Dt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=At(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function jt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){Et(this),this.i=null,e=It(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(It(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,St(this,e=It(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Pt,fe),Pt.prototype.g=function(){return new Nt(this.l,this.j)},Pt.prototype.i=(gt={},function(){return gt}),h(Nt,ne),(e=Nt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Mt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Mt(this)),this.g&&(this.readyState=3,Mt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Mt(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(jt,ne);var Ut=/^https?$/i,Ft=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),qt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ut.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Wt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(NS){}}}function Wt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function $t(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ec){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Le,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new xt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Xt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),en(e,n),(t=new Ae(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=pn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}hn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||P(),x||(T(),x=!0),L.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),en(e,r),e.m&&e.o&&Dt(r,e.m,e.o),n=new Ae(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function en(e,t){e.H&&y(e.H,(function(e,n){ct(t,n,e)})),e.l&&rt({},(function(e,n){ct(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Lt(a,e,"req"+n+"_")}catch(Xu){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||P(),x||(T(),x=!0),L.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=xe(u(e.Fa,e),un(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Dt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new Te(r,n)),Jt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=xe(u(e.Ga,e,t),un(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function un(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Le;if(i.Image){const r=new Image;r.onload=c(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Le;const n=new AbortController,r=setTimeout((()=>{n.abort(),Tt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Tt(0,0,!1,t)}))}(r.toString(),n)}else Ie(2);e.G=0,e.l&&e.l.sa(t),hn(e),Xt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),en(e,r),r}function pn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new jt(new Pt({eb:n})):new jt(e.pa)).Ha(e.J),t}function fn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _n(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){_e.call(this),this.status=1}function _n(e){this.g=e}(e=jt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ne.g(),this.v=this.o?ge(this.o):ge(Ne),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),jt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ie(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Ae(this,this.j,e);let s=this.o;if(this.S&&(s?(s=_(s),b(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ct(n=ot(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(At(s)))+"&"+t:this.m&&Dt(n,this.m,s)),et(this.h,i),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),i.T=!0,Fe(i,n,null)):Fe(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=xe(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ie(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Ie(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Qt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,mn.aa.N.call(this)},h(vn,ye),h(yn,_e),h(_n,fn),_n.prototype.ua=function(){re(this.g,"a")},_n.prototype.ta=function(e){re(this.g,new vn(e))},_n.prototype.sa=function(e){re(this.g,new yn)},_n.prototype.ra=function(){re(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Gu=Yu.createWebChannelTransport=function(){return new gn},Ku=Yu.getStatEventTarget=function(){return Ee()},$u=Yu.Event=we,Hu=Yu.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Wu=Yu.ErrorCode=Re,Oe.COMPLETE="complete",qu=Yu.EventType=Oe,me.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Bu=Yu.WebChannel=me,Yu.FetchXmlHttpFactory=Pt,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,zu=Yu.XhrIo=jt}).apply("undefined"!==typeof Qu?Qu:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Xu="@firebase/firestore";class Ju{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ju.UNAUTHENTICATED=new Ju(null),Ju.GOOGLE_CREDENTIALS=new Ju("google-credentials-uid"),Ju.FIRST_PARTY=new Ju("first-party-uid"),Ju.MOCK_USER=new Ju("mock-user");let Zu="11.0.0";const ec=new Xi("@firebase/firestore");function tc(){return ec.logLevel}function nc(e){if(ec.logLevel<=$i.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(sc);ec.debug(`Firestore (${Zu}): ${e}`,...i)}}function rc(e){if(ec.logLevel<=$i.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(sc);ec.error(`Firestore (${Zu}): ${e}`,...i)}}function ic(e){if(ec.logLevel<=$i.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(sc);ec.warn(`Firestore (${Zu}): ${e}`,...i)}}function sc(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function oc(){const e=`FIRESTORE (${Zu}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw rc(e),new Error(e)}function ac(e,t){e||oc()}function lc(e,t){return e}const uc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class cc extends wi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class dc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ju.UNAUTHENTICATED)))}shutdown(){}}class fc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class gc{constructor(e){this.t=e,this.currentUser=Ju.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ac(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new hc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new hc,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{nc("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(nc("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new hc)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(nc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ac("string"==typeof t.accessToken),new dc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ac(null===e||"string"==typeof e),new Ju(e)}}class mc{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ju.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vc{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new mc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ju.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _c{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ac(void 0===this.o);const n=e=>{null!=e.error&&nc("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,nc("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{nc("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):nc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ac("string"==typeof e.token),this.R=e.token,new yc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function wc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class bc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=wc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Ec(e,t){return e<t?-1:e>t?1:0}function Cc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Sc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new cc(uc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new cc(uc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new cc(uc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new cc(uc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sc.fromMillis(Date.now())}static fromDate(e){return Sc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Sc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ec(this.nanoseconds,e.nanoseconds):Ec(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class kc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kc(e)}static min(){return new kc(new Sc(0,0))}static max(){return new kc(new Sc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ic{constructor(e,t,n){void 0===t?t=0:t>e.length&&oc(),void 0===n?n=e.length-t:n>e.length-t&&oc(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ic.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ic?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Tc extends Ic{construct(e,t,n){return new Tc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new cc(uc.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new Tc(e)}static emptyPath(){return new Tc([])}}const xc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lc extends Ic{construct(e,t,n){return new Lc(e,t,n)}static isValidIdentifier(e){return xc.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lc.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Lc(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new cc(uc.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new cc(uc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new cc(uc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new cc(uc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lc(t)}static emptyPath(){return new Lc([])}}class Pc{constructor(e){this.path=e}static fromPath(e){return new Pc(Tc.fromString(e))}static fromName(e){return new Pc(Tc.fromString(e).popFirst(5))}static empty(){return new Pc(Tc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Tc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Tc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pc(new Tc(e.slice()))}}class Nc{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Nc.UNKNOWN_ID=-1;function Rc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=kc.fromTimestamp(1e9===r?new Sc(n+1,0):new Sc(n,r));return new Mc(i,Pc.empty(),t)}function Oc(e){return new Mc(e.readTime,e.key,-1)}class Mc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Mc(kc.min(),Pc.empty(),-1)}static max(){return new Mc(kc.max(),Pc.empty(),-1)}}function Ac(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Pc.comparator(e.documentKey,t.documentKey),0!==n?n:Ec(e.largestBatchId,t.largestBatchId))}const Dc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Uc(e){if(e.code!==uc.FAILED_PRECONDITION||e.message!==Dc)throw e;nc("LocalStore","Unexpectedly lost primary lease")}class Fc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&oc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Fc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Fc?t:Fc.resolve(t)}catch(e){return Fc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Fc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Fc.reject(t)}static resolve(e){return new Fc(((t,n)=>{t(e)}))}static reject(e){return new Fc(((t,n)=>{n(e)}))}static waitFor(e){return new Fc(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Fc.resolve(!1);for(const n of e)t=t.next((e=>e?Fc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Fc(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Fc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Vc(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zc(e){return"IndexedDbTransactionError"===e.name}class Bc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function qc(e){return null==e}function Wc(e){return 0===e&&1/e==-1/0}function Hc(e){return"number"==typeof e&&Number.isInteger(e)&&!Wc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function $c(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Gc(t)),t=Kc(e.get(n),t);return Gc(t)}function Kc(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Gc(e){return e+"\x01\x01"}Bc.oe=-1;const Qc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Yc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xc=Yc,Jc=[...Xc,"indexConfiguration","indexState","indexEntries"];function Zc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function eh(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function th(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class nh{constructor(e,t){this.comparator=e,this.root=t||ih.EMPTY}insert(e,t){return new nh(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ih.BLACK,null,null))}remove(e){return new nh(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ih.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rh(this.root,e,this.comparator,!1)}getReverseIterator(){return new rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rh(this.root,e,this.comparator,!0)}}class rh{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ih{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ih.RED,this.left=null!=r?r:ih.EMPTY,this.right=null!=i?i:ih.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ih(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ih.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ih.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ih.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ih.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oc();if(this.right.isRed())throw oc();const e=this.left.check();if(e!==this.right.check())throw oc();return e+(this.isRed()?0:1)}}ih.EMPTY=null,ih.RED=!0,ih.BLACK=!1,ih.EMPTY=new class{constructor(){this.size=0}get key(){throw oc()}get value(){throw oc()}get color(){throw oc()}get left(){throw oc()}get right(){throw oc()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ih(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sh{constructor(e){this.comparator=e,this.data=new nh(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new oh(this.data.getIterator())}getIteratorFrom(e){return new oh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof sh))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new sh(this.comparator);return t.data=e,t}}class oh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ah{constructor(e){this.fields=e,e.sort(Lc.comparator)}static empty(){return new ah([])}unionWith(e){let t=new sh(Lc.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ah(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class lh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class uh{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new lh("Invalid base64 string: "+e):e}}(e);return new uh(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new uh(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ec(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}uh.EMPTY_BYTE_STRING=new uh("");const ch=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hh(e){if(ac(!!e),"string"==typeof e){let t=0;const n=ch.exec(e);if(ac(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:dh(e.seconds),nanos:dh(e.nanos)}}function dh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ph(e){return"string"==typeof e?uh.fromBase64String(e):uh.fromUint8Array(e)}function fh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function gh(e){const t=e.mapValue.fields.__previous_value__;return fh(t)?gh(t):t}function mh(e){const t=hh(e.mapValue.fields.__local_write_time__.timestampValue);return new Sc(t.seconds,t.nanos)}class vh{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class yh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yh&&e.projectId===this.projectId&&e.database===this.database}}const _h={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function wh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?fh(e)?4:jh(e)?9007199254740991:Ah(e)?10:11:oc()}function bh(e,t){if(e===t)return!0;const n=wh(e);if(n!==wh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return mh(e).isEqual(mh(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=hh(e.timestampValue),r=hh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ph(e.bytesValue).isEqual(ph(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return dh(e.geoPointValue.latitude)===dh(t.geoPointValue.latitude)&&dh(e.geoPointValue.longitude)===dh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return dh(e.integerValue)===dh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=dh(e.doubleValue),r=dh(t.doubleValue);return n===r?Wc(n)===Wc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Cc(e.arrayValue.values||[],t.arrayValue.values||[],bh);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Zc(n)!==Zc(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!bh(n[i],r[i])))return!1;return!0}(e,t);default:return oc()}}function Eh(e,t){return void 0!==(e.values||[]).find((e=>bh(e,t)))}function Ch(e,t){if(e===t)return 0;const n=wh(e),r=wh(t);if(n!==r)return Ec(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ec(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=dh(e.integerValue||e.doubleValue),r=dh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Sh(e.timestampValue,t.timestampValue);case 4:return Sh(mh(e),mh(t));case 5:return Ec(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ph(e),r=ph(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ec(n[i],r[i]);if(0!==e)return e}return Ec(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ec(dh(e.latitude),dh(t.latitude));return 0!==n?n:Ec(dh(e.longitude),dh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return kh(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,u=null===(r=a.value)||void 0===r?void 0:r.arrayValue,c=Ec((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:kh(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===_h.mapValue&&t===_h.mapValue)return 0;if(e===_h.mapValue)return 1;if(t===_h.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Ec(r[o],s[o]);if(0!==e)return e;const t=Ch(n[r[o]],i[s[o]]);if(0!==t)return t}return Ec(r.length,s.length)}(e.mapValue,t.mapValue);default:throw oc()}}function Sh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ec(e,t);const n=hh(e),r=hh(t),i=Ec(n.seconds,r.seconds);return 0!==i?i:Ec(n.nanos,r.nanos)}function kh(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ch(n[i],r[i]);if(e)return e}return Ec(n.length,r.length)}function Ih(e){return Th(e)}function Th(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=hh(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ph(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Pc.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Th(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Th(e.fields[i])}`;return n+"}"}(e.mapValue):oc()}function xh(e){switch(wh(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=gh(e);return t?16+xh(t):16;case 5:return 2*e.stringValue.length;case 6:return ph(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+xh(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return eh(e.fields,((e,n)=>{t+=e.length+xh(n)})),t}(e.mapValue);default:throw oc()}}function Lh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ph(e){return!!e&&"integerValue"in e}function Nh(e){return!!e&&"arrayValue"in e}function Rh(e){return!!e&&"nullValue"in e}function Oh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mh(e){return!!e&&"mapValue"in e}function Ah(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Dh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return eh(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Dh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Dh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function jh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Uh{constructor(e){this.value=e}static empty(){return new Uh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Mh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dh(t)}setAll(e){let t=Lc.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Dh(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Mh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Mh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){eh(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Uh(Dh(this.value))}}function Fh(e){const t=[];return eh(e.fields,((e,n)=>{const r=new Lc([e]);if(Mh(n)){const e=Fh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ah(t)}class Vh{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Vh(e,0,kc.min(),kc.min(),kc.min(),Uh.empty(),0)}static newFoundDocument(e,t,n,r){return new Vh(e,1,t,kc.min(),n,r,0)}static newNoDocument(e,t){return new Vh(e,2,t,kc.min(),kc.min(),Uh.empty(),0)}static newUnknownDocument(e,t){return new Vh(e,3,t,kc.min(),kc.min(),Uh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(kc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Uh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Uh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zh{constructor(e,t){this.position=e,this.inclusive=t}}function Bh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Pc.comparator(Pc.fromName(o.referenceValue),n.key):Ch(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function qh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!bh(e.position[n],t.position[n]))return!1;return!0}class Wh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Hh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class $h{}class Kh extends $h{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new td(e,t,n):"array-contains"===t?new sd(e,n):"in"===t?new od(e,n):"not-in"===t?new ad(e,n):"array-contains-any"===t?new ld(e,n):new Kh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new nd(e,n):new rd(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ch(t,this.value)):null!==t&&wh(this.value)===wh(t)&&this.matchesComparison(Ch(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return oc()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gh extends $h{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Gh(e,t)}matches(e){return Qh(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qh(e){return"and"===e.op}function Yh(e){return Xh(e)&&Qh(e)}function Xh(e){for(const t of e.filters)if(t instanceof Gh)return!1;return!0}function Jh(e){if(e instanceof Kh)return e.field.canonicalString()+e.op.toString()+Ih(e.value);if(Yh(e))return e.filters.map((e=>Jh(e))).join(",");{const t=e.filters.map((e=>Jh(e))).join(",");return`${e.op}(${t})`}}function Zh(e,t){return e instanceof Kh?function(e,t){return t instanceof Kh&&e.op===t.op&&e.field.isEqual(t.field)&&bh(e.value,t.value)}(e,t):e instanceof Gh?function(e,t){return t instanceof Gh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Zh(n,t.filters[r])),!0)}(e,t):void oc()}function ed(e){return e instanceof Kh?function(e){return`${e.field.canonicalString()} ${e.op} ${Ih(e.value)}`}(e):e instanceof Gh?function(e){return e.op.toString()+" {"+e.getFilters().map(ed).join(" ,")+"}"}(e):"Filter"}class td extends Kh{constructor(e,t,n){super(e,t,n),this.key=Pc.fromName(n.referenceValue)}matches(e){const t=Pc.comparator(e.key,this.key);return this.matchesComparison(t)}}class nd extends Kh{constructor(e,t){super(e,"in",t),this.keys=id("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class rd extends Kh{constructor(e,t){super(e,"not-in",t),this.keys=id("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function id(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Pc.fromName(e.referenceValue)))}class sd extends Kh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nh(t)&&Eh(t.arrayValue,this.value)}}class od extends Kh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Eh(this.value.arrayValue,t)}}class ad extends Kh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Eh(this.value.arrayValue,t)}}class ld extends Kh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Eh(this.value.arrayValue,e)))}}class ud{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function cd(e){return new ud(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function hd(e){const t=lc(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Jh(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),qc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ih(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ih(e))).join(",")),t.ue=e}return t.ue}function dd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Hh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Zh(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qh(e.startAt,t.startAt)&&qh(e.endAt,t.endAt)}function pd(e){return Pc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class fd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gd(e,t,n,r,i,s,o,a){return new fd(e,t,n,r,i,s,o,a)}function md(e){return new fd(e)}function vd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function yd(e){return null!==e.collectionGroup}function _d(e){const t=lc(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new sh(Lc.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Wh(r,n))})),e.has(Lc.keyField().canonicalString())||t.ce.push(new Wh(Lc.keyField(),n))}return t.ce}function wd(e){const t=lc(e);return t.le||(t.le=bd(t,_d(e))),t.le}function bd(e,t){if("F"===e.limitType)return cd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Wh(e.field,t)}));const n=e.endAt?new zh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new zh(e.startAt.position,e.startAt.inclusive):null;return cd(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ed(e,t){const n=e.filters.concat([t]);return new fd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Cd(e,t,n){return new fd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Sd(e,t){return dd(wd(e),wd(t))&&e.limitType===t.limitType}function kd(e){return`${hd(wd(e))}|lt:${e.limitType}`}function Id(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>ed(e))).join(", ")}]`),qc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ih(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ih(e))).join(",")),`Target(${t})`}(wd(e))}; limitType=${e.limitType})`}function Td(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Pc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of _d(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Bh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,_d(e),t))&&!(e.endAt&&!function(e,t,n){const r=Bh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,_d(e),t))}(e,t)}function xd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ld(e){return(t,n)=>{let r=!1;for(const i of _d(e)){const e=Pd(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Pd(e,t,n){const r=e.field.isKeyField()?Pc.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ch(r,i):oc()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return oc()}}class Nd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){eh(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return th(this.inner)}size(){return this.innerSize}}const Rd=new nh(Pc.comparator);function Od(){return Rd}const Md=new nh(Pc.comparator);function Ad(){let e=Md;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Dd(e){let t=Md;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function jd(){return Fd()}function Ud(){return Fd()}function Fd(){return new Nd((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Vd=new nh(Pc.comparator),zd=new sh(Pc.comparator);function Bd(){let e=zd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const qd=new sh(Ec);function Wd(){return qd}function Hd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(t)?"-0":t}}function $d(e){return{integerValue:""+e}}function Kd(e,t){return Hc(t)?$d(t):Hd(e,t)}class Gd{constructor(){this._=void 0}}function Qd(e,t,n){return e instanceof Jd?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&fh(t)&&(t=gh(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Zd?ep(e,t):e instanceof tp?np(e,t):function(e,t){const n=Xd(e,t),r=ip(n)+ip(e.Pe);return Ph(n)&&Ph(e.Pe)?$d(r):Hd(e.serializer,r)}(e,t)}function Yd(e,t,n){return e instanceof Zd?ep(e,t):e instanceof tp?np(e,t):n}function Xd(e,t){return e instanceof rp?function(e){return Ph(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Jd extends Gd{}class Zd extends Gd{constructor(e){super(),this.elements=e}}function ep(e,t){const n=sp(t);for(const r of e.elements)n.some((e=>bh(e,r)))||n.push(r);return{arrayValue:{values:n}}}class tp extends Gd{constructor(e){super(),this.elements=e}}function np(e,t){let n=sp(t);for(const r of e.elements)n=n.filter((e=>!bh(e,r)));return{arrayValue:{values:n}}}class rp extends Gd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ip(e){return dh(e.integerValue||e.doubleValue)}function sp(e){return Nh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class op{constructor(e,t){this.version=e,this.transformResults=t}}class ap{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ap}static exists(e){return new ap(void 0,e)}static updateTime(e){return new ap(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class up{}function cp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new wp(e.key,ap.none()):new gp(e.key,e.data,ap.none());{const n=e.data,r=Uh.empty();let i=new sh(Lc.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new mp(e.key,r,new ah(i.toArray()),ap.none())}}function hp(e,t,n){e instanceof gp?function(e,t,n){const r=e.value.clone(),i=yp(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof mp?function(e,t,n){if(!lp(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=yp(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(vp(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function dp(e,t,n,r){return e instanceof gp?function(e,t,n,r){if(!lp(e.precondition,t))return n;const i=e.value.clone(),s=_p(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof mp?function(e,t,n,r){if(!lp(e.precondition,t))return n;const i=_p(e.fieldTransforms,r,t),s=t.data;return s.setAll(vp(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return lp(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function pp(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Xd(r.transform,e||null);null!=i&&(null===n&&(n=Uh.empty()),n.set(r.field,i))}return n||null}function fp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Cc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Zd&&t instanceof Zd||e instanceof tp&&t instanceof tp?Cc(e.elements,t.elements,bh):e instanceof rp&&t instanceof rp?bh(e.Pe,t.Pe):e instanceof Jd&&t instanceof Jd}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class gp extends up{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class mp extends up{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function vp(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function yp(e,t,n){const r=new Map;ac(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Yd(o,a,n[i]))}return r}function _p(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Qd(e,s,t))}return r}class wp extends up{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bp extends up{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ep{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&hp(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=dp(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=dp(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ud();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=cp(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(kc.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Bd())}isEqual(e){return this.batchId===e.batchId&&Cc(this.mutations,e.mutations,((e,t)=>fp(e,t)))&&Cc(this.baseMutations,e.baseMutations,((e,t)=>fp(e,t)))}}class Cp{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ac(e.mutations.length===n.length);let r=Vd;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Cp(e,t,n,r)}}class Sp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class kp{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ip,Tp;function xp(e){switch(e){default:return oc();case uc.CANCELLED:case uc.UNKNOWN:case uc.DEADLINE_EXCEEDED:case uc.RESOURCE_EXHAUSTED:case uc.INTERNAL:case uc.UNAVAILABLE:case uc.UNAUTHENTICATED:return!1;case uc.INVALID_ARGUMENT:case uc.NOT_FOUND:case uc.ALREADY_EXISTS:case uc.PERMISSION_DENIED:case uc.FAILED_PRECONDITION:case uc.ABORTED:case uc.OUT_OF_RANGE:case uc.UNIMPLEMENTED:case uc.DATA_LOSS:return!0}}function Lp(e){if(void 0===e)return rc("GRPC error has no .code"),uc.UNKNOWN;switch(e){case Ip.OK:return uc.OK;case Ip.CANCELLED:return uc.CANCELLED;case Ip.UNKNOWN:return uc.UNKNOWN;case Ip.DEADLINE_EXCEEDED:return uc.DEADLINE_EXCEEDED;case Ip.RESOURCE_EXHAUSTED:return uc.RESOURCE_EXHAUSTED;case Ip.INTERNAL:return uc.INTERNAL;case Ip.UNAVAILABLE:return uc.UNAVAILABLE;case Ip.UNAUTHENTICATED:return uc.UNAUTHENTICATED;case Ip.INVALID_ARGUMENT:return uc.INVALID_ARGUMENT;case Ip.NOT_FOUND:return uc.NOT_FOUND;case Ip.ALREADY_EXISTS:return uc.ALREADY_EXISTS;case Ip.PERMISSION_DENIED:return uc.PERMISSION_DENIED;case Ip.FAILED_PRECONDITION:return uc.FAILED_PRECONDITION;case Ip.ABORTED:return uc.ABORTED;case Ip.OUT_OF_RANGE:return uc.OUT_OF_RANGE;case Ip.UNIMPLEMENTED:return uc.UNIMPLEMENTED;case Ip.DATA_LOSS:return uc.DATA_LOSS;default:return oc()}}(Tp=Ip||(Ip={}))[Tp.OK=0]="OK",Tp[Tp.CANCELLED=1]="CANCELLED",Tp[Tp.UNKNOWN=2]="UNKNOWN",Tp[Tp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tp[Tp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tp[Tp.NOT_FOUND=5]="NOT_FOUND",Tp[Tp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tp[Tp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tp[Tp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tp[Tp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tp[Tp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tp[Tp.ABORTED=10]="ABORTED",Tp[Tp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tp[Tp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tp[Tp.INTERNAL=13]="INTERNAL",Tp[Tp.UNAVAILABLE=14]="UNAVAILABLE",Tp[Tp.DATA_LOSS=15]="DATA_LOSS";let Pp=null;function Np(){return new TextEncoder}const Rp=new ju([4294967295,4294967295],0);function Op(e){const t=Np().encode(e),n=new Uu;return n.update(t),new Uint8Array(n.digest())}function Mp(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ju([n,r],0),new ju([i,s],0)]}class Ap{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Dp(`Invalid padding: ${t}`);if(n<0)throw new Dp(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Dp(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Dp(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ju.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(ju.fromNumber(n)));return 1===r.compare(Rp)&&(r=new ju([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Op(e),[n,r]=Mp(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Ap(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=Op(e),[n,r]=Mp(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Dp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class jp{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Up.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new jp(kc.min(),r,new nh(Ec),Od(),Bd())}}class Up{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Up(n,t,Bd(),Bd(),Bd())}}class Fp{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Vp{constructor(e,t){this.targetId=e,this.me=t}}class zp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uh.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Bp{constructor(){this.fe=0,this.ge=Hp(),this.pe=uh.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Bd(),t=Bd(),n=Bd();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:oc()}})),new Up(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Hp()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ac(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class qp{constructor(e){this.Le=e,this.Be=new Map,this.ke=Od(),this.qe=Wp(),this.Qe=new nh(Ec)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:oc()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(pd(i))if(0===n){const e=new Pc(i.path);this.Ue(t,e,Vh.newNoDocument(e,kc.min()))}else ac(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Pp||Pp.et(function(e,t,n,r,i){var s,o,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=ph(n).toUint8Array()}catch(e){if(e instanceof lh)return ic("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Ap(s,r,i)}catch(e){return ic(e instanceof Dp?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&pd(i.target)){const t=new Pc(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Vh.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}}));let n=Bd();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new jp(e,t,this.Qe,this.ke,n);return this.ke=Od(),this.qe=Wp(),this.Qe=new nh(Ec),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Bp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new sh(Ec),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||nc("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Bp),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Wp(){return new nh(Pc.comparator)}function Hp(){return new nh(Pc.comparator)}const $p={asc:"ASCENDING",desc:"DESCENDING"},Kp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gp={and:"AND",or:"OR"};class Qp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yp(e,t){return e.useProto3Json||qc(t)?t:{value:t}}function Xp(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Zp(e,t){return Xp(e,t.toTimestamp())}function ef(e){return ac(!!e),kc.fromTimestamp(function(e){const t=hh(e);return new Sc(t.seconds,t.nanos)}(e))}function tf(e,t){return nf(e,t).canonicalString()}function nf(e,t){const n=function(e){return new Tc(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function rf(e){const t=Tc.fromString(e);return ac(Sf(t)),t}function sf(e,t){return tf(e.databaseId,t.path)}function of(e,t){const n=rf(t);if(n.get(1)!==e.databaseId.projectId)throw new cc(uc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new cc(uc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Pc(cf(n))}function af(e,t){return tf(e.databaseId,t)}function lf(e){const t=rf(e);return 4===t.length?Tc.emptyPath():cf(t)}function uf(e){return new Tc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function cf(e){return ac(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function hf(e,t,n){return{name:sf(e,t),fields:n.value.mapValue.fields}}function df(e,t){let n;if(t instanceof gp)n={update:hf(e,t.key,t.value)};else if(t instanceof wp)n={delete:sf(e,t.key)};else if(t instanceof mp)n={update:hf(e,t.key,t.data),updateMask:Cf(t.fieldMask)};else{if(!(t instanceof bp))return oc();n={verify:sf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Jd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof tp)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rp)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw oc()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Zp(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:oc()}(e,t.precondition)),n}function pf(e,t){return{documents:[af(e,t.path)]}}function ff(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=af(e,i);const s=function(e){if(0!==e.length)return Ef(Gh.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:wf(e.field),direction:vf(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Yp(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function gf(e){let t=lf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ac(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=mf(e);return t instanceof Gh&&Yh(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Wh(bf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,qc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new zh(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new zh(n,t)}(n.endAt)),gd(t,i,o,s,a,"F",l,u)}function mf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=bf(e.unaryFilter.field);return Kh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=bf(e.unaryFilter.field);return Kh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=bf(e.unaryFilter.field);return Kh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=bf(e.unaryFilter.field);return Kh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return oc()}}(e):void 0!==e.fieldFilter?function(e){return Kh.create(bf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oc()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Gh.create(e.compositeFilter.filters.map((e=>mf(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return oc()}}(e.compositeFilter.op))}(e):oc()}function vf(e){return $p[e]}function yf(e){return Kp[e]}function _f(e){return Gp[e]}function wf(e){return{fieldPath:e.canonicalString()}}function bf(e){return Lc.fromServerFormat(e.fieldPath)}function Ef(e){return e instanceof Kh?function(e){if("=="===e.op){if(Oh(e.value))return{unaryFilter:{field:wf(e.field),op:"IS_NAN"}};if(Rh(e.value))return{unaryFilter:{field:wf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Oh(e.value))return{unaryFilter:{field:wf(e.field),op:"IS_NOT_NAN"}};if(Rh(e.value))return{unaryFilter:{field:wf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wf(e.field),op:yf(e.op),value:e.value}}}(e):e instanceof Gh?function(e){const t=e.getFilters().map((e=>Ef(e)));return 1===t.length?t[0]:{compositeFilter:{op:_f(e.op),filters:t}}}(e):oc()}function Cf(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Sf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class kf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:kc.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:kc.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:uh.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new kf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new kf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class If{constructor(e){this.ct=e}}function Tf(e){const t=gf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Cd(t,t.limit,"L"):t}class xf{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(dh(e.integerValue));else if("doubleValue"in e){const n=dh(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Wc(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=hh(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ph(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?jh(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ah(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):oc()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(dh(o)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Pc.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}xf.vt=new xf;class Lf{constructor(){this.un=new Pf}addToCollectionParentIndex(e,t){return this.un.add(t),Fc.resolve()}getCollectionParents(e,t){return Fc.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Fc.resolve()}deleteFieldIndex(e,t){return Fc.resolve()}deleteAllFieldIndexes(e){return Fc.resolve()}createTargetIndexes(e,t){return Fc.resolve()}getDocumentsMatchingTarget(e,t){return Fc.resolve(null)}getIndexType(e,t){return Fc.resolve(0)}getFieldIndexes(e,t){return Fc.resolve([])}getNextCollectionGroupToUpdate(e){return Fc.resolve(null)}getMinOffset(e,t){return Fc.resolve(Mc.min())}getMinOffsetFromCollectionGroup(e,t){return Fc.resolve(Mc.min())}updateCollectionGroup(e,t,n){return Fc.resolve()}updateIndexEntries(e,t){return Fc.resolve()}}class Pf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new sh(Tc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new sh(Tc.comparator)).toArray()}}new Uint8Array(0);const Nf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Rf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Rf(e,Rf.DEFAULT_COLLECTION_PERCENTILE,Rf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Rf.DEFAULT_COLLECTION_PERCENTILE=10,Rf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rf.DEFAULT=new Rf(41943040,Rf.DEFAULT_COLLECTION_PERCENTILE,Rf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rf.DISABLED=new Rf(-1,0,0);class Of{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Of(0)}static kn(){return new Of(-1)}}function Mf(e,t){let[n,r]=e,[i,s]=t;const o=Ec(n,i);return 0===o?Ec(r,s):o}class Af{constructor(e){this.Un=e,this.buffer=new sh(Mf),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Mf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Df{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){nc("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){zc(e)?nc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Uc(e)}await this.Hn(3e5)}))}}class jf{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Fc.resolve(Bc.oe);const n=new Af(t);return this.Jn.forEachTarget(e,(e=>n.zn(e.sequenceNumber))).next((()=>this.Jn.Zn(e,(e=>n.zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(nc("LruGarbageCollector","Garbage collection skipped; disabled"),Fc.resolve(Nf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(nc("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nf):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(nc("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),tc()<=$i.DEBUG&&nc("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-u}ms`),Fc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Uf(e,t){return new jf(e,t)}class Ff{constructor(){this.changes=new Nd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Fc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Vf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&dp(n.mutation,e,ah.empty(),Sc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Bd()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bd();const r=jd();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Ad();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=jd();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Bd())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Od();const s=Fd(),o=Fd();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof mp)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),dp(o.mutation,t,o.mutation.getFieldMask(),Sc.now())):s.set(t.key,ah.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Vf(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Fd();let r=new nh(((e,t)=>e-t)),i=Bd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ah.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Bd()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=Ud();l.forEach((e=>{if(!i.has(e)){const r=cp(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return Fc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Pc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Fc.resolve(jd());let o=-1,a=i;return s.next((t=>Fc.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Fc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Bd()))).next((e=>({batchId:o,changes:Dd(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pc(t)).next((e=>{let t=Ad();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Ad();return this.indexManager.getCollectionParents(e,i).next((o=>Fc.forEach(o,(o=>{const a=function(e,t){return new fd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Vh.newInvalidDocument(r)))}));let n=Ad();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&dp(s.mutation,r,ah.empty(),Sc.now()),Td(t,r)&&(n=n.insert(e,r))})),n}))}}class Bf{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Fc.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ef(e.createTime)}}(t)),Fc.resolve()}getNamedQuery(e,t){return Fc.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Tf(e.bundledQuery),readTime:ef(e.readTime)}}(t)),Fc.resolve()}}class qf{constructor(){this.overlays=new nh(Pc.comparator),this.Ir=new Map}getOverlay(e,t){return Fc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=jd();return Fc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Fc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),Fc.resolve()}getOverlaysForCollection(e,t,n){const r=jd(),i=t.length+1,s=new Pc(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Fc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new nh(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=jd(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=jd(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Fc.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Sp(t,n));let i=this.Ir.get(t);void 0===i&&(i=Bd(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class Wf{constructor(){this.sessionToken=uh.EMPTY_BYTE_STRING}getSessionToken(e){return Fc.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Fc.resolve()}}class Hf{constructor(){this.Tr=new sh($f.Er),this.dr=new sh($f.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new $f(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new $f(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new Pc(new Tc([])),n=new $f(t,e),r=new $f(t,e+1),i=[];return this.dr.forEachInRange([n,r],(e=>{this.Vr(e),i.push(e.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Pc(new Tc([])),n=new $f(t,e),r=new $f(t,e+1);let i=Bd();return this.dr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new $f(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class $f{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Pc.comparator(e.key,t.key)||Ec(e.wr,t.wr)}static Ar(e,t){return Ec(e.wr,t.wr)||Pc.comparator(e.key,t.key)}}class Kf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new sh($f.Er)}checkEmpty(e){return Fc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ep(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.br=this.br.add(new $f(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Fc.resolve(s)}lookupMutationBatch(e,t){return Fc.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Fc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Fc.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Fc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new $f(t,0),r=new $f(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],(e=>{const t=this.Dr(e.wr);i.push(t)})),Fc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new sh(Ec);return t.forEach((e=>{const t=new $f(e,0),r=new $f(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],(e=>{n=n.add(e.wr)}))})),Fc.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Pc.isDocumentKey(i)||(i=i.child(""));const s=new $f(new Pc(i),0);let o=new sh(Ec);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.wr)),!0)}),s),Fc.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ac(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Fc.forEach(t.mutations,(r=>{const i=new $f(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new $f(t,0),r=this.br.firstAfterOrEqual(n);return Fc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Fc.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Gf{constructor(e){this.Mr=e,this.docs=new nh(Pc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Fc.resolve(n?n.document.mutableCopy():Vh.newInvalidDocument(t))}getEntries(e,t){let n=Od();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Vh.newInvalidDocument(e))})),Fc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Od();const s=t.path,o=new Pc(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ac(Oc(o),n)<=0||(r.has(o.key)||Td(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Fc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){oc()}Or(e,t){return Fc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Qf(this)}getSize(e){return Fc.resolve(this.size)}}class Qf extends Ff{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)})),Fc.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Yf{constructor(e){this.persistence=e,this.Nr=new Nd((e=>hd(e)),dd),this.lastRemoteSnapshotVersion=kc.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hf,this.targetCount=0,this.kr=Of.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),Fc.resolve()}getLastRemoteSnapshotVersion(e){return Fc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fc.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Fc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Fc.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Of(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Fc.resolve()}updateTargetData(e,t){return this.Kn(t),Fc.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Fc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Fc.waitFor(i).next((()=>r))}getTargetCount(e){return Fc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Fc.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Fc.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Fc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Fc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Fc.resolve(n)}containsKey(e,t){return Fc.resolve(this.Br.containsKey(t))}}class Xf{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Bc(0),this.Kr=!1,this.Kr=!0,this.$r=new Wf,this.referenceDelegate=e(this),this.Ur=new Yf(this),this.indexManager=new Lf,this.remoteDocumentCache=function(e){return new Gf(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new If(t),this.Gr=new Bf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Kf(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){nc("MemoryPersistence","Starting transaction:",e);const r=new Jf(this.Qr.next());return this.referenceDelegate.zr(),n(r).next((e=>this.referenceDelegate.jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Hr(e,t){return Fc.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class Jf extends jc{constructor(e){super(),this.currentSequenceNumber=e}}class Zf{constructor(e){this.persistence=e,this.Jr=new Hf,this.Yr=null}static Zr(e){return new Zf(e)}get Xr(){if(this.Yr)return this.Yr;throw oc()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Fc.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Fc.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Fc.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fc.forEach(this.Xr,(n=>{const r=Pc.fromPath(n);return this.ei(e,r).next((e=>{e||t.removeEntry(r,kc.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Fc.or([()=>Fc.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class eg{constructor(e,t){this.persistence=e,this.ti=new Nd((e=>$c(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Uf(this,t)}static Zr(e,t){return new eg(e,t)}zr(){}jr(e){return Fc.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Yn(e){const t=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}er(e){let t=0;return this.Zn(e,(e=>{t++})).next((()=>t))}Zn(e,t){return Fc.forEach(this.ti,((n,r)=>this.nr(e,n,r).next((e=>e?Fc.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Or(e,(r=>this.nr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,kc.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.ti.set(t,e.currentSequenceNumber),Fc.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.ti.set(n,e.currentSequenceNumber),Fc.resolve()}removeReference(e,t,n){return this.ti.set(n,e.currentSequenceNumber),Fc.resolve()}updateLimboDocument(e,t){return this.ti.set(t,e.currentSequenceNumber),Fc.resolve()}Wr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xh(e.data.value)),t}nr(e,t,n){return Fc.or([()=>this.persistence.Hr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.ti.get(t);return Fc.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class tg{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Bd(),r=Bd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new tg(e,t.fromCache,n,r)}}class ng{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class rg{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=yi()?8:Vc(fi())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Zi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new ng;return this.Xi(e,t,n).next((r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)}))})).next((()=>i.result))}es(e,t,n,r){return n.documentReadCount<this.ji?(tc()<=$i.DEBUG&&nc("QueryEngine","SDK will not create cache indexes for query:",Id(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Fc.resolve()):(tc()<=$i.DEBUG&&nc("QueryEngine","Query:",Id(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(tc()<=$i.DEBUG&&nc("QueryEngine","The SDK decides to create cache indexes for query:",Id(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wd(t))):Fc.resolve())}Yi(e,t){if(vd(t))return Fc.resolve(null);let n=wd(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Cd(t,null,"F"),n=wd(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Bd(...r);return this.Ji.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,Cd(t,null,"F")):this.rs(e,s,t,n)}))))})))))}Zi(e,t,n,r){return vd(t)||r.isEqual(kc.min())?Fc.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?Fc.resolve(null):(tc()<=$i.DEBUG&&nc("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Id(t)),this.rs(e,s,t,Rc(r,-1)).next((e=>e)))}))}ts(e,t){let n=new sh(Ld(e));return t.forEach(((t,r)=>{Td(e,r)&&(n=n.add(r))})),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return tc()<=$i.DEBUG&&nc("QueryEngine","Using full collection scan to execute query:",Id(t)),this.Ji.getDocumentsMatchingQuery(e,t,Mc.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class ig{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new nh(Ec),this._s=new Nd((e=>hd(e)),dd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function sg(e,t,n,r){return new ig(e,t,n,r)}async function og(e,t){const n=lc(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Bd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({hs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function ag(e){const t=lc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function lg(e,t,n){let r=Bd(),i=Bd();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Od();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(kc.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):nc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Ps:r,Is:i}}))}function ug(e,t){const n=lc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function cg(e,t){const n=lc(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ur.getTargetData(e,t).next((i=>i?(r=i,Fc.resolve(r)):n.Ur.allocateTargetId(e).next((i=>(r=new kf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}async function hg(e,t,n){const r=lc(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!zc(e))throw e;nc("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function dg(e,t,n){const r=lc(e);let i=kc.min(),s=Bd();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=lc(e),i=r._s.get(n);return void 0!==i?Fc.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,wd(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:kc.min(),n?s:Bd()))).next((e=>(pg(r,xd(t),e),{documents:e,Ts:s})))))}function pg(e,t,n){let r=e.us.get(t)||kc.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.us.set(t,r)}class fg{constructor(){this.activeTargetIds=Wd()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gg{constructor(){this.so=new fg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new fg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mg{_o(e){}shutdown(){}}class vg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){nc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){nc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let yg=null;function _g(){return null===yg?yg=268435456+Math.round(2147483648*Math.random()):yg++,"0x"+yg.toString(16)}const wg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bg{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Eg="WebChannelConnection";class Cg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=_g(),o=this.xo(e,t.toUriEncodedString());nc("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,i),this.No(e,o,a,n).then((t=>(nc("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw ic("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=wg[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=_g();return new Promise(((s,o)=>{const a=new zu;a.setWithCredentials(!0),a.listenOnce(qu.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Wu.NO_ERROR:const t=a.getResponseJson();nc(Eg,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Wu.TIMEOUT:nc(Eg,`RPC '${e}' ${i} timed out`),o(new cc(uc.DEADLINE_EXCEEDED,"Request time out"));break;case Wu.HTTP_ERROR:const n=a.getStatus();if(nc(Eg,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(uc).indexOf(t)>=0?t:uc.UNKNOWN}(t.status);o(new cc(e,t.message))}else o(new cc(uc.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new cc(uc.UNAVAILABLE,"Connection failed."));break;default:oc()}}finally{nc(Eg,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);nc(Eg,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Bo(e,t,n){const r=_g(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Gu(),o=Ku(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");nc(Eg,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const p=new bg({Io:t=>{d?nc(Eg,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(nc(Eg,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),nc(Eg,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},To:()=>c.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(c,Bu.EventType.OPEN,(()=>{d||(nc(Eg,`RPC '${e}' stream ${r} transport opened.`),p.yo())})),f(c,Bu.EventType.CLOSE,(()=>{d||(d=!0,nc(Eg,`RPC '${e}' stream ${r} transport closed`),p.So())})),f(c,Bu.EventType.ERROR,(t=>{d||(d=!0,ic(Eg,`RPC '${e}' stream ${r} transport errored:`,t),p.So(new cc(uc.UNAVAILABLE,"The operation could not be completed")))})),f(c,Bu.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];ac(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){nc(Eg,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Ip[e];if(void 0!==t)return Lp(t)}(t),i=o.message;void 0===n&&(n=uc.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,p.So(new cc(n,i)),c.close()}else nc(Eg,`RPC '${e}' stream ${r} received:`,i),p.bo(i)}})),f(o,$u.STAT_EVENT,(t=>{t.stat===Hu.PROXY?nc(Eg,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Hu.NOPROXY&&nc(Eg,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.wo()}),0),p}}function Sg(){return"undefined"!=typeof document?document:null}function kg(e){return new Qp(e,!0)}class Ig{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&nc("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Tg{constructor(e,t,n,r,i,s,o,a){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ig(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===uc.RESOURCE_EXHAUSTED?(rc(t.toString()),rc("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===uc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)}),(t=>{e((()=>{const e=new cc(uc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return nc("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(nc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xg extends Tg{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:oc()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ac(void 0===t||"string"==typeof t),uh.fromBase64String(t||"")):(ac(void 0===t||t instanceof Buffer||t instanceof Uint8Array),uh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?uc.UNKNOWN:Lp(e.code);return new cc(t,e.message||"")}(o);n=new zp(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=of(e,r.document.name),s=ef(r.document.updateTime),o=r.document.createTime?ef(r.document.createTime):kc.min(),a=new Uh({mapValue:{fields:r.document.fields}}),l=Vh.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Fp(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=of(e,r.document),s=r.readTime?ef(r.readTime):kc.min(),o=Vh.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Fp([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=of(e,r.document),s=r.removedTargetIds||[];n=new Fp([],s,i,null)}else{if(!("filter"in t))return oc();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new kp(r,i),o=e.targetId;n=new Vp(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return kc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?kc.min():t.readTime?ef(t.readTime):kc.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=uf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=pd(r)?{documents:pf(e,r)}:{query:ff(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Jp(e,t.resumeToken);const r=Yp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(kc.min())>0){n.readTime=Xp(e,t.snapshotVersion.toTimestamp());const r=Yp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oc()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=uf(this.serializer),t.removeTarget=e,this.a_(t)}}class Lg extends Tg{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ac(!!e.streamToken),this.lastStreamToken=e.streamToken,ac(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){ac(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(ac(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?ef(e.updateTime):ef(t);return n.isEqual(kc.min())&&(n=ef(t)),new op(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ef(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=uf(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>df(this.serializer,e)))};this.a_(t)}}class Pg extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new cc(uc.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Mo(e,nf(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===uc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new cc(uc.UNKNOWN,e.toString())}))}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Lo(e,nf(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===uc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new cc(uc.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Ng{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rc(t),this.D_=!1):nc("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Rg{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((e=>{n.enqueueAndForget((async()=>{zg(this)&&(nc("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=lc(e);t.L_.add(4),await Mg(t),t.q_.set("Unknown"),t.L_.delete(4),await Og(t)}(this))}))})),this.q_=new Ng(n,r)}}async function Og(e){if(zg(e))for(const t of e.B_)await t(!0)}async function Mg(e){for(const t of e.B_)await t(!1)}function Ag(e,t){const n=lc(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Vg(n)?Fg(n):om(n).r_()&&jg(n,t))}function Dg(e,t){const n=lc(e),r=om(n);n.N_.delete(t),r.r_()&&Ug(n,t),0===n.N_.size&&(r.r_()?r.o_():zg(n)&&n.q_.set("Unknown"))}function jg(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(kc.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}om(e).A_(t)}function Ug(e,t){e.Q_.xe(t),om(e).R_(t)}function Fg(e){e.Q_=new qp({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),om(e).start(),e.q_.v_()}function Vg(e){return zg(e)&&!om(e).n_()&&e.N_.size>0}function zg(e){return 0===lc(e).L_.size}function Bg(e){e.Q_=void 0}async function qg(e){e.q_.set("Online")}async function Wg(e){e.N_.forEach(((t,n)=>{jg(e,t)}))}async function Hg(e,t){Bg(e),Vg(e)?(e.q_.M_(t),Fg(e)):e.q_.set("Unknown")}async function $g(e,t,n){if(e.q_.set("Online"),t instanceof zp&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){nc("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Kg(e,n)}else if(t instanceof Fp?e.Q_.Ke(t):t instanceof Vp?e.Q_.He(t):e.Q_.We(t),!n.isEqual(kc.min()))try{const t=await ag(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(uh.EMPTY_BYTE_STRING,r.snapshotVersion)),Ug(e,t);const i=new kf(r.target,t,n,r.sequenceNumber);jg(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){nc("RemoteStore","Failed to raise snapshot:",t),await Kg(e,t)}}async function Kg(e,t,n){if(!zc(t))throw t;e.L_.add(1),await Mg(e),e.q_.set("Offline"),n||(n=()=>ag(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{nc("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Og(e)}))}function Gg(e,t){return t().catch((n=>Kg(e,n,t)))}async function Qg(e){const t=lc(e),n=am(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Yg(t);)try{const e=await ug(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Xg(t,e)}catch(e){await Kg(t,e)}Jg(t)&&Zg(t)}function Yg(e){return zg(e)&&e.O_.length<10}function Xg(e,t){e.O_.push(t);const n=am(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Jg(e){return zg(e)&&!am(e).n_()&&e.O_.length>0}function Zg(e){am(e).start()}async function em(e){am(e).p_()}async function tm(e){const t=am(e);for(const n of e.O_)t.m_(n.mutations)}async function nm(e,t,n){const r=e.O_.shift(),i=Cp.from(r,t,n);await Gg(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Qg(e)}async function rm(e,t){t&&am(e).V_&&await async function(e,t){if(function(e){return xp(e)&&e!==uc.ABORTED}(t.code)){const n=e.O_.shift();am(e).s_(),await Gg(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Qg(e)}}(e,t),Jg(e)&&Zg(e)}async function im(e,t){const n=lc(e);n.asyncQueue.verifyOperationInProgress(),nc("RemoteStore","RemoteStore received new credentials");const r=zg(n);n.L_.add(3),await Mg(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Og(n)}async function sm(e,t){const n=lc(e);t?(n.L_.delete(2),await Og(n)):t||(n.L_.add(2),await Mg(n),n.q_.set("Unknown"))}function om(e){return e.K_||(e.K_=function(e,t,n){const r=lc(e);return r.w_(),new xg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:qg.bind(null,e),Ro:Wg.bind(null,e),mo:Hg.bind(null,e),d_:$g.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),Vg(e)?Fg(e):e.q_.set("Unknown")):(await e.K_.stop(),Bg(e))}))),e.K_}function am(e){return e.U_||(e.U_=function(e,t,n){const r=lc(e);return r.w_(),new Lg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:em.bind(null,e),mo:rm.bind(null,e),f_:tm.bind(null,e),g_:nm.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await Qg(e)):(await e.U_.stop(),e.O_.length>0&&(nc("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))}))),e.U_}class lm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new hc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new lm(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new cc(uc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function um(e,t){if(rc("AsyncQueue",`${t}: ${e}`),zc(e))return new cc(uc.UNAVAILABLE,`${t}: ${e}`);throw e}class cm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Pc.comparator(t.key,n.key):(e,t)=>Pc.comparator(e.key,t.key),this.keyedMap=Ad(),this.sortedSet=new nh(this.comparator)}static emptySet(e){return new cm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new cm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class hm{constructor(){this.W_=new nh(Pc.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):oc():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class dm{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new dm(e,t,cm.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class pm{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class fm{constructor(){this.queries=gm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=lc(e),r=n.queries;n.queries=gm(),r.forEach(((e,n)=>{for(const r of n.j_)r.onError(t)}))}(this,new cc(uc.ABORTED,"Firestore shutting down"))}}function gm(){return new Nd((e=>kd(e)),Sd)}async function mm(e,t){const n=lc(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new pm,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=um(e,`Initialization of query '${Id(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&wm(n)}async function vm(e,t){const n=lc(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ym(e,t){const n=lc(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&wm(n)}function _m(e,t,n){const r=lc(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function wm(e){e.Y_.forEach((e=>{e.next()}))}var bm,Em;(Em=bm||(bm={})).ea="default",Em.Cache="cache";class Cm{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new dm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=dm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bm.Cache}}class Sm{constructor(e){this.key=e}}class km{constructor(e){this.key=e}}class Im{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Bd(),this.mutatedKeys=Bd(),this.Aa=Ld(e),this.Ra=new cm(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new hm,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Td(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let p=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),p=!0):this.ga(u,c)||(n.track({type:2,doc:c}),p=!0,(a&&this.Aa(c,a)>0||l&&this.Aa(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),p=!0):u&&!c&&(n.track({type:1,doc:u}),p=!0,(a||l)&&(o=!0)),p&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:o,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oc()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),r=null!=r&&r;const o=t&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,l=a!==this.Ea;return this.Ea=a,0!==s.length||l?{snapshot:new dm(this.query,e.Ra,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Bd(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new km(e))})),this.da.forEach((n=>{e.has(n)||t.push(new Sm(n))})),t}ba(e){this.Ta=e.Ts,this.da=Bd();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return dm.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Tm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class xm{constructor(e){this.key=e,this.va=!1}}class Lm{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Nd((e=>kd(e)),Sd),this.Ma=new Map,this.xa=new Set,this.Oa=new nh(Pc.comparator),this.Na=new Map,this.La=new Hf,this.Ba={},this.ka=new Map,this.qa=Of.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Pm(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Xm(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Rm(r,t,n,!0),i}async function Nm(e,t){const n=Xm(e);await Rm(n,t,!0,!1)}async function Rm(e,t,n,r){const i=await cg(e.localStore,wd(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Om(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Ag(e.remoteStore,i),a}async function Om(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await dg(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ma(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Hm(e,t.targetId,a.wa),a.snapshot}(e,t,n,r);const s=await dg(e.localStore,t,!0),o=new Im(t,s.Ts),a=o.ma(s.documents),l=Up.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);Hm(e,n,u.wa);const c=new Tm(t,n,o);return e.Fa.set(t,c),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),u.snapshot}async function Mm(e,t,n){const r=lc(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter((e=>!Sd(e,t)))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await hg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Dg(r.remoteStore,i.targetId),qm(r,i.targetId)})).catch(Uc)):(qm(r,i.targetId),await hg(r.localStore,i.targetId,!0))}async function Am(e,t){const n=lc(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dg(n.remoteStore,r.targetId))}async function Dm(e,t){const n=lc(e);try{const e=await function(e,t){const n=lc(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Ur.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(uh.EMPTY_BYTE_STRING,kc.min()).withLastLimboFreeSnapshotVersion(kc.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Ur.updateTargetData(e,u))}));let a=Od(),l=Bd();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(lg(e,s,t.documentUpdates).next((e=>{a=e.Ps,l=e.Is}))),!r.isEqual(kc.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Fc.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.os=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Na.get(t);r&&(ac(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?ac(r.va):e.removedDocuments.size>0&&(ac(r.va),r.va=!1))})),await Gm(n,e,t)}catch(e){await Uc(e)}}function jm(e,t,n){const r=lc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach(((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=lc(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)})),r&&wm(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Um(e,t,n){const r=lc(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new nh(Pc.comparator);e=e.insert(s,Vh.newNoDocument(s,kc.min()));const n=Bd().add(s),i=new jp(kc.min(),new Map,new nh(Ec),e,n);await Dm(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),Km(r)}else await hg(r.localStore,t,!1).then((()=>qm(r,t,n))).catch(Uc)}async function Fm(e,t){const n=lc(e),r=t.batch.batchId;try{const e=await function(e,t){const n=lc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Fc.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);ac(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Bd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Bm(n,r,null),zm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gm(n,e)}catch(e){await Uc(e)}}async function Vm(e,t,n){const r=lc(e);try{const e=await function(e,t){const n=lc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ac(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Bm(r,t,n),zm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Gm(r,e)}catch(n){await Uc(n)}}function zm(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function Bm(e,t,n){const r=lc(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function qm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||Wm(e,t)}))}function Wm(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Dg(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Km(e))}function Hm(e,t,n){for(const r of n)r instanceof Sm?(e.La.addReference(r.key,t),$m(e,r)):r instanceof km?(nc("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Wm(e,r.key)):oc()}function $m(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(nc("SyncEngine","New document in limbo: "+n),e.xa.add(r),Km(e))}function Km(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Pc(Tc.fromString(t)),r=e.qa.next();e.Na.set(r,new xm(n)),e.Oa=e.Oa.insert(n,r),Ag(e.remoteStore,new kf(wd(md(n.path)),r,"TargetPurposeLimboResolution",Bc.oe))}}async function Gm(e,t,n){const r=lc(e),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach(((e,a)=>{o.push(r.Ka(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=tg.Wi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Ca.d_(i),await async function(e,t){const n=lc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Fc.forEach(t,(t=>Fc.forEach(t.$i,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Fc.forEach(t.Ui,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!zc(e))throw e;nc("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function Qm(e,t){const n=lc(e);if(!n.currentUser.isEqual(t)){nc("SyncEngine","User change. New user:",t.toKey());const e=await og(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new cc(uc.CANCELLED,t))}))})),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Gm(n,e.hs)}}function Ym(e,t){const n=lc(e),r=n.Na.get(t);if(r&&r.va)return Bd().add(r.key);{let e=Bd();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Xm(e){const t=lc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ym.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Um.bind(null,t),t.Ca.d_=ym.bind(null,t.eventManager),t.Ca.$a=_m.bind(null,t.eventManager),t}function Jm(e){const t=lc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vm.bind(null,t),t}class Zm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return sg(this.persistence,new rg,e.initialUser,this.serializer)}Ga(e){return new Xf(Zf.Zr,this.serializer)}Wa(e){return new gg}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zm.provider={build:()=>new Zm};class ev extends Zm{constructor(e){super(),this.cacheSizeBytes=e}ja(e,t){ac(this.persistence.referenceDelegate instanceof eg);const n=this.persistence.referenceDelegate.garbageCollector;return new Df(n,e.asyncQueue,t)}Ga(e){const t=void 0!==this.cacheSizeBytes?Rf.withCacheSize(this.cacheSizeBytes):Rf.DEFAULT;return new Xf((e=>eg.Zr(e,t)),this.serializer)}}class tv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>jm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qm.bind(null,this.syncEngine),await sm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new fm}createDatastore(e){const t=kg(e.databaseInfo.databaseId),n=function(e){return new Cg(e)}(e.databaseInfo);return function(e,t,n,r){return new Pg(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Rg(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>jm(this.syncEngine,e,0)),vg.D()?new vg:new mg)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Lm(e,t,n,r,i,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=lc(e);nc("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Mg(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}tv.provider={build:()=>new tv};class nv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rc("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class rv{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ju.UNAUTHENTICATED,this.clientId=bc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{nc("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(nc("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=um(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function iv(e,t){e.asyncQueue.verifyOperationInProgress(),nc("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await og(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function sv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ov(e);nc("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>im(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>im(t.remoteStore,n))),e._onlineComponents=t}async function ov(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){nc("FirestoreClient","Using user provided OfflineComponentProvider");try{await iv(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===uc.FAILED_PRECONDITION||e.code===uc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ic("Error using user provided cache. Falling back to memory cache: "+n),await iv(e,new Zm)}}else nc("FirestoreClient","Using default OfflineComponentProvider"),await iv(e,new ev(void 0));return e._offlineComponents}async function av(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(nc("FirestoreClient","Using user provided OnlineComponentProvider"),await sv(e,e._uninitializedComponentsProvider._online)):(nc("FirestoreClient","Using default OnlineComponentProvider"),await sv(e,new tv))),e._onlineComponents}function lv(e){return av(e).then((e=>e.syncEngine))}async function uv(e){const t=await av(e),n=t.eventManager;return n.onListen=Pm.bind(null,t.syncEngine),n.onUnlisten=Mm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Nm.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Am.bind(null,t.syncEngine),n}function cv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new hc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new nv({next:a=>{s.Za(),t.enqueueAndForget((()=>vm(e,o)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new cc(uc.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new cc(uc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Cm(md(n.path),s,{includeMetadataChanges:!0,_a:!0});return mm(e,o)}(await uv(e),e.asyncQueue,t,n,r))),r.promise}function hv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new hc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new nv({next:n=>{s.Za(),t.enqueueAndForget((()=>vm(e,o))),n.fromCache&&"server"===r.source?i.reject(new cc(uc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Cm(n,s,{includeMetadataChanges:!0,_a:!0});return mm(e,o)}(await uv(e),e.asyncQueue,t,n,r))),r.promise}function dv(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const pv=new Map;function fv(e,t,n){if(!n)throw new cc(uc.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function gv(e){if(!Pc.isDocumentKey(e))throw new cc(uc.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function mv(e){if(Pc.isDocumentKey(e))throw new cc(uc.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function vv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":oc()}function yv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new cc(uc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vv(e);throw new cc(uc.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class _v{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new cc(uc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new cc(uc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new cc(uc.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dv(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new cc(uc.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new cc(uc.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new cc(uc.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wv{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _v({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new cc(uc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new cc(uc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _v(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new pc;switch(e.type){case"firstParty":return new vc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new cc(uc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pv.get(e);t&&(nc("ComponentProvider","Removing Datastore"),pv.delete(e),t.terminate())}(this),Promise.resolve()}}class bv{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new bv(this.firestore,e,this._query)}}class Ev{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ev(this.firestore,e,this._key)}}class Cv extends bv{constructor(e,t,n){super(e,t,md(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ev(this.firestore,null,new Pc(e))}withConverter(e){return new Cv(this.firestore,e,this._path)}}function Sv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Vi(e),fv("collection","path",t),e instanceof wv){const n=Tc.fromString(t,...r);return mv(n),new Cv(e,null,n)}{if(!(e instanceof Ev||e instanceof Cv))throw new cc(uc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Tc.fromString(t,...r));return mv(n),new Cv(e.firestore,null,n)}}function kv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Vi(e),1===arguments.length&&(t=bc.newId()),fv("doc","path",t),e instanceof wv){const n=Tc.fromString(t,...r);return gv(n),new Ev(e,null,new Pc(n))}{if(!(e instanceof Ev||e instanceof Cv))throw new cc(uc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Tc.fromString(t,...r));return gv(n),new Ev(e.firestore,e instanceof Cv?e.converter:null,new Pc(n))}}class Iv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ig(this,"async_queue_retry"),this.Vu=()=>{const e=Sg();e&&nc("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Sg();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Sg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new hc;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(NS){if(!zc(NS))throw NS;nc("AsyncQueue","Operation failed with retryable error: "+NS)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw rc("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=lm.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(r),r}fu(){this.Eu&&oc()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Tv extends wv{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Iv,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Iv(e),this._firestoreClient=void 0,await e}}}function xv(e){if(e._terminated)throw new cc(uc.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Lv(e),e._firestoreClient}function Lv(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new vh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,dv(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new rv(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Pv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pv(uh.fromBase64String(e))}catch(e){throw new cc(uc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Pv(uh.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new cc(uc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lc(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rv{constructor(e){this._methodName=e}}class Ov{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new cc(uc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new cc(uc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ec(this._lat,e._lat)||Ec(this._long,e._long)}}class Mv{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Av=/^__.*__$/;class Dv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new mp(e,this.data,this.fieldMask,t,this.fieldTransforms):new gp(e,this.data,t,this.fieldTransforms)}}class jv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new mp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Uv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oc()}}class Fv{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Fv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ey(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Uv(this.Cu)&&Av.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Vv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||kg(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Fv({Cu:e,methodName:t,qu:n,path:Lc.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zv(e){const t=e._freezeSettings(),n=kg(e._databaseId);return new Vv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Bv(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);Yv("Data must be an object, but it was:",o,r);const a=Gv(r,o);let l,u;if(s.merge)l=new ah(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Xv(t,r,n);if(!o.contains(i))throw new cc(uc.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);ty(e,i)||e.push(i)}l=new ah(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new Dv(new Uh(a),l,u)}class qv extends Rv{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qv}}function Wv(e,t,n,r){const i=e.Qu(1,t,n);Yv("Data must be an object, but it was:",i,r);const s=[],o=Uh.empty();eh(r,((e,r)=>{const a=Zv(t,e,n);r=Vi(r);const l=i.Nu(a);if(r instanceof qv)s.push(a);else{const e=Kv(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new ah(s);return new jv(o,a,i.fieldTransforms)}function Hv(e,t,n,r,i,s){const o=e.Qu(1,t,n),a=[Xv(t,r,n)],l=[i];if(s.length%2!=0)throw new cc(uc.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Xv(t,s[d])),l.push(s[d+1]);const u=[],c=Uh.empty();for(let d=a.length-1;d>=0;--d)if(!ty(u,a[d])){const e=a[d];let t=l[d];t=Vi(t);const n=o.Nu(e);if(t instanceof qv)u.push(e);else{const r=Kv(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new ah(u);return new jv(c,h,o.fieldTransforms)}function $v(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Kv(n,e.Qu(r?4:3,t))}function Kv(e,t){if(Qv(e=Vi(e)))return Yv("Unsupported field value:",t,e),Gv(e,t);if(e instanceof Rv)return function(e,t){if(!Uv(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Kv(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Vi(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Kd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Sc.fromDate(e);return{timestampValue:Xp(t.serializer,n)}}if(e instanceof Sc){const n=new Sc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xp(t.serializer,n)}}if(e instanceof Ov)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Pv)return{bytesValue:Jp(t.serializer,e._byteString)};if(e instanceof Ev){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:tf(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Mv)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Hd(t.serializer,e)}))}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${vv(e)}`)}(e,t)}function Gv(e,t){const n={};return th(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):eh(e,((e,r)=>{const i=Kv(r,t.Mu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Qv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Sc||e instanceof Ov||e instanceof Pv||e instanceof Ev||e instanceof Rv||e instanceof Mv)}function Yv(e,t,n){if(!Qv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=vv(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Xv(e,t,n){if((t=Vi(t))instanceof Nv)return t._internalPath;if("string"==typeof t)return Zv(e,t);throw ey("Field path arguments must be of type string or ",e,!1,void 0,n)}const Jv=new RegExp("[~\\*/\\[\\]]");function Zv(e,t,n){if(t.search(Jv)>=0)throw ey(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Nv(...t.split("."))._internalPath}catch(r){throw ey(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ey(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new cc(uc.INVALID_ARGUMENT,a+e+l)}function ty(e,t){return e.some((e=>e.isEqual(t)))}class ny{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ev(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ry(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ry extends ny{data(){return super.data()}}function iy(e,t){return"string"==typeof t?Zv(e,t):t instanceof Nv?t._internalPath:t._delegate._internalPath}function sy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new cc(uc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oy{}class ay extends oy{}function ly(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof oy&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof hy)).length,n=e.filter((e=>e instanceof uy)).length;if(t>1||t>0&&n>0)throw new cc(uc.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class uy extends ay{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new uy(e,t,n)}_apply(e){const t=this._parse(e);return fy(e._query,t),new bv(e.firestore,e.converter,Ed(e._query,t))}_parse(e){const t=zv(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new cc(uc.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){py(o,s);const t=[];for(const n of o)t.push(dy(r,e,n));a={arrayValue:{values:t}}}else a=dy(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||py(o,s),a=$v(n,t,o,"in"===s||"not-in"===s);return Kh.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function cy(e,t,n){const r=t,i=iy("where",e);return uy._create(i,r,n)}class hy extends oy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hy(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Gh.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)fy(n,i),n=Ed(n,i)}(e._query,t),new bv(e.firestore,e.converter,Ed(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function dy(e,t,n){if("string"==typeof(n=Vi(n))){if(""===n)throw new cc(uc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yd(t)&&-1!==n.indexOf("/"))throw new cc(uc.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Tc.fromString(n));if(!Pc.isDocumentKey(r))throw new cc(uc.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lh(e,new Pc(r))}if(n instanceof Ev)return Lh(e,n._key);throw new cc(uc.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vv(n)}.`)}function py(e,t){if(!Array.isArray(e)||0===e.length)throw new cc(uc.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function fy(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new cc(uc.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new cc(uc.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class gy{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(wh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ph(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw oc()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return eh(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>dh(e.doubleValue)));return new Mv(i)}convertGeoPoint(e){return new Ov(dh(e.latitude),dh(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=gh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(mh(e));default:return null}}convertTimestamp(e){const t=hh(e);return new Sc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Tc.fromString(e);ac(Sf(n));const r=new yh(n.get(1),n.get(3)),i=new Pc(n.popFirst(5));return r.isEqual(t)||rc(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function my(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class vy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yy extends ny{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new _y(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(iy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class _y extends yy{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class wy{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new vy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new _y(this._firestore,this._userDataWriter,n.key,n,new vy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new cc(uc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new _y(e._firestore,e._userDataWriter,n.doc.key,n.doc,new vy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new _y(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:by(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function by(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oc()}}function Ey(e){e=yv(e,Ev);const t=yv(e.firestore,Tv);return cv(xv(t),e._key).then((n=>xy(t,e,n)))}class Cy extends gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ev(this.firestore,null,t)}}function Sy(e){e=yv(e,bv);const t=yv(e.firestore,Tv),n=xv(t),r=new Cy(t);return sy(e._query),hv(n,e._query).then((n=>new wy(t,r,e,n)))}function ky(e,t,n){e=yv(e,Ev);const r=yv(e.firestore,Tv),i=zv(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Vi(t))||t instanceof Nv?Hv(i,"updateDoc",e._key,t,n,a):Wv(i,"updateDoc",e._key,t),Ty(r,[s.toMutation(e._key,ap.exists(!0))])}function Iy(e,t){const n=yv(e.firestore,Tv),r=kv(e),i=my(e.converter,t);return Ty(n,[Bv(zv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ap.exists(!1))]).then((()=>r))}function Ty(e,t){return function(e,t){const n=new hc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Jm(e);try{const e=await function(e,t){const n=lc(e),r=Sc.now(),i=t.reduce(((e,t)=>e.add(t.key)),Bd());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Od(),l=Bd();return n.cs.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=pp(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new mp(e.key,t,Fh(t.value.mapValue),ap.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Dd(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new nh(Ec)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Gm(r,e.changes),await Qg(r.remoteStore)}catch(e){const t=um(e,"Failed to persist write");n.reject(t)}}(await lv(e),t,n))),n.promise}(xv(e),t)}function xy(e,t,n){const r=n.docs.get(t._key),i=new Cy(e);return new yy(e,i,t._key,r,new vy(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Zu=e}(to),Ys(new zi("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Tv(new gc(e.getProvider("auth-internal")),new _c(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new cc(uc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yh(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),io(Xu,"4.7.4",e),io(Xu,"4.7.4","esm2017")}();const Ly="@firebase/database",Py="1.0.9";let Ny="";function Ry(e){Ny=e}class Oy{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Si(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ci(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class My{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ii(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Ay=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Oy(t)}}catch(NS){}return new My},Dy=Ay("localStorage"),jy=Ay("sessionStorage"),Uy=new Xi("@firebase/database"),Fy=function(){let e=1;return function(){return e++}}(),Vy=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Yr(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Ai;n.update(t);const r=n.digest();return Zr.encodeByteArray(r)},zy=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=zy.apply(null,n):e+="object"===typeof n?Si(n):n,e+=" "}return e};let By=null,qy=!0;const Wy=function(e,t){Yr(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Uy.logLevel=$i.VERBOSE,By=Uy.log.bind(Uy),t&&jy.set("logging_enabled",!0)):"function"===typeof e?By=e:(By=null,jy.remove("logging_enabled"))},Hy=function(){if(!0===qy&&(qy=!1,null===By&&!0===jy.get("logging_enabled")&&Wy(!0)),By){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=zy.apply(null,t);By(r)}},$y=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Hy(e,...n)}},Ky=function(){const e="FIREBASE INTERNAL ERROR: "+zy(...arguments);Uy.error(e)},Gy=function(){const e=`FIREBASE FATAL ERROR: ${zy(...arguments)}`;throw Uy.error(e),new Error(e)},Qy=function(){const e="FIREBASE WARNING: "+zy(...arguments);Uy.warn(e)},Yy=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Xy="[MIN_NAME]",Jy="[MAX_NAME]",Zy=function(e,t){if(e===t)return 0;if(e===Xy||t===Jy)return-1;if(t===Xy||e===Jy)return 1;{const n=a_(e),r=a_(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},e_=function(e,t){return e===t?0:e<t?-1:1},t_=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Si(t))},n_=function(e){if("object"!==typeof e||null===e)return Si(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Si(t[r]),n+=":",n+=n_(e[t[r]]);return n+="}",n},r_=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function i_(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const s_=function(e){Yr(!Yy(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let u="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()};const o_=new RegExp("^-?(0*)\\d{1,10}$"),a_=function(e){if(o_.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},l_=function(e){try{e()}catch(NS){setTimeout((()=>{const t=NS.stack||"";throw Qy("Exception was thrown by user callback.",t),NS}),Math.floor(0))}},u_=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class c_{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Qy(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class h_{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Hy("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qy(e)}}class d_{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}d_.OWNER="owner";const p_="5",f_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,g_="ac",m_="websocket",v_="long_polling";class y_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Dy.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Dy.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function __(e,t,n){let r;if(Yr("string"===typeof t,"typeof type must == string"),Yr("object"===typeof n,"typeof params must == object"),t===m_)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==v_)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return i_(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class w_{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ii(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return ii(this.counters_)}}const b_={},E_={};function C_(e){const t=e.toString();return b_[t]||(b_[t]=new w_),b_[t]}class S_{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&l_((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const k_="start";class I_{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$y(e),this.stats_=C_(t),this.urlFn=e=>(this.appCheckToken&&(e[g_]=this.appCheckToken),__(t,v_,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new S_(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(vi()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new T_((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===k_)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[k_]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=p_,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[g_]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&f_.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){I_.forceAllow_=!0}static forceDisallow(){I_.forceDisallow_=!0}static isAvailable(){return!vi()&&(!!I_.forceAllow_||!I_.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Si(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=ti(t),r=r_(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(vi())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Si(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class T_{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,vi())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Fy(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=T_.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(NS){Hy("frame writing exception"),NS.stack&&Hy(NS.stack),Hy(NS)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Hy("No IE domain setting required")}catch(NS){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){vi()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Hy("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(NS){}}),Math.floor(1))}}let x_=null;"undefined"!==typeof MozWebSocket?x_=MozWebSocket:"undefined"!==typeof WebSocket&&(x_=WebSocket);class L_{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$y(this.connId),this.stats_=C_(t),this.connURL=L_.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=p_,!vi()&&"undefined"!==typeof location&&location.hostname&&f_.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[g_]=r),i&&(s.p=i),__(e,m_,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Dy.set("previous_websocket_failure",!0);try{let e;if(vi()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${p_}/${Ny}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyASCnXS0GK9Fd2diDiMsVpLI30bMZtFk6c",REACT_APP_FIREBASE_AUTH_DOMAIN:"blabla-4493a.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://blabla-4493a-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"blabla-4493a",REACT_APP_GOOGLE_MAPS_API_KEY:"AlzaSyCfIZ_pMopID6nYkLALRIaWoXGuKb8esJq"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new x_(this.connURL,[],e)}catch(NS){this.log_("Error instantiating WebSocket.");const t=NS.message||NS.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){L_.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==x_&&!L_.forceDisallow_}static previouslyFailed(){return Dy.isInMemoryStorage||!0===Dy.get("previous_websocket_failure")}markConnectionHealthy(){Dy.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Ci(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Yr(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Si(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=r_(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(NS){this.log_("Exception thrown from WebSocket.send():",NS.message||NS.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}L_.responsesRequiredToBeHealthy=2,L_.healthyTimeout=3e4;class P_{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[I_,L_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=L_&&L_.isAvailable();let n=t&&!L_.previouslyFailed();if(e.webSocketOnly&&(t||Qy("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[L_];else{const e=this.transports_=[];for(const t of P_.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);P_.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}P_.globalTransportInitialized_=!1;class N_{constructor(e,t,n,r,i,s,o,a,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$y("c:"+this.id+":"),this.transportManager_=new P_(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=u_((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=t_("t",e),n=t_("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=t_("t",e),n=t_("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=t_("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Ky("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ky("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),p_!==n&&Qy("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),u_((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):u_((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Dy.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class R_{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class O_{constructor(e){this.allowedEvents_=e,this.listeners_={},Yr(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Yr(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class M_ extends O_{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||gi()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new M_}getInitialEvent(e){return Yr("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class A_{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function D_(){return new A_("")}function j_(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function U_(e){return e.pieces_.length-e.pieceNum_}function F_(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new A_(e.pieces_,t)}function V_(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function z_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function B_(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new A_(t,0)}function q_(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof A_)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new A_(n,0)}function W_(e){return e.pieceNum_>=e.pieces_.length}function H_(e,t){const n=j_(e),r=j_(t);if(null===n)return t;if(n===r)return H_(F_(e),F_(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function $_(e,t){const n=z_(e,0),r=z_(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=Zy(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function K_(e,t){if(U_(e)!==U_(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function G_(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(U_(e)>U_(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Q_{constructor(e,t){this.errorPrefix_=t,this.parts_=z_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Fi(this.parts_[n]);Y_(this)}}function Y_(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+X_(e))}function X_(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class J_ extends O_{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new J_}getInitialEvent(e){return Yr("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Z_=1e3;class ew extends R_{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=ew.nextPersistentConnectionId_++,this.log_=$y("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Z_,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!vi())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");J_.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&M_.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Si(i)),Yr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new di,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Yr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Yr(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;ew.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Ii(e,"w")){const n=Ti(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Qy(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=ki(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=ki(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Yr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Si(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Ky("Unrecognized action received from server: "+Si(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Yr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Z_,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Z_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Z_),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ew.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Yr(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?Hy("getToken() completed but was canceled"):(Hy("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new N_(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Qy(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Ky){this.log_("Failed to get token: "+Ky),s||(this.repoInfo_.nodeAdmin&&Qy(Ky),a())}}}interrupt(e){Hy("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Hy("Resuming connection for reason: "+e),delete this.interruptReasons_[e],xi(this.interruptReasons_)&&(this.reconnectDelay_=Z_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>n_(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new A_(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Hy("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Hy("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";vi()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Ny.replace(/\./g,"-")]=1,gi()?e["framework.cordova"]=1:mi()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=M_.getInstance().currentlyOnline();return xi(this.interruptReasons_)&&e}}ew.nextPersistentConnectionId_=0,ew.nextConnectionId_=0;class tw{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new tw(e,t)}}class nw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new tw(Xy,e),r=new tw(Xy,t);return 0!==this.compare(n,r)}minPost(){return tw.MIN}}let rw;class iw extends nw{static get __EMPTY_NODE(){return rw}static set __EMPTY_NODE(e){rw=e}compare(e,t){return Zy(e.name,t.name)}isDefinedOn(e){throw Xr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return tw.MIN}maxPost(){return new tw(Jy,rw)}makePost(e,t){return Yr("string"===typeof e,"KeyIndex indexValue must always be a string."),new tw(e,rw)}toString(){return".key"}}const sw=new iw;class ow{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class aw{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:aw.RED,this.left=null!=r?r:lw.EMPTY_NODE,this.right=null!=i?i:lw.EMPTY_NODE}copy(e,t,n,r,i){return new aw(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return lw.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return lw.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,aw.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,aw.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}aw.RED=!0,aw.BLACK=!1;class lw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lw.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new lw(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,aw.BLACK,null,null))}remove(e){return new lw(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,aw.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ow(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ow(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ow(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ow(this.root_,null,this.comparator_,!0,e)}}function uw(e,t){return Zy(e.name,t.name)}function cw(e,t){return Zy(e,t)}let hw;lw.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new aw(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const dw=function(e){return"number"===typeof e?"number:"+s_(e):"string:"+e},pw=function(e){if(e.isLeafNode()){const t=e.val();Yr("string"===typeof t||"number"===typeof t||"object"===typeof t&&Ii(t,".sv"),"Priority must be a string or number.")}else Yr(e===hw||e.isEmpty(),"priority of unexpected type.");Yr(e===hw||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let fw,gw,mw;class vw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vw.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Yr(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),pw(this.priorityNode_)}static set __childrenNodeConstructor(e){fw=e}static get __childrenNodeConstructor(){return fw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new vw(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:vw.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return W_(e)?this:".priority"===j_(e)?this.priorityNode_:vw.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:vw.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=j_(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Yr(".priority"!==n||1===U_(e),".priority must be the last token in a path"),this.updateImmediateChild(n,vw.__childrenNodeConstructor.EMPTY_NODE.updateChild(F_(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+dw(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?s_(this.value_):this.value_,this.lazyHash_=Vy(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===vw.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof vw.__childrenNodeConstructor?-1:(Yr(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=vw.VALUE_TYPE_ORDER.indexOf(t),i=vw.VALUE_TYPE_ORDER.indexOf(n);return Yr(r>=0,"Unknown leaf type: "+t),Yr(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}vw.VALUE_TYPE_ORDER=["object","boolean","number","string"];const yw=new class extends nw{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Zy(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return tw.MIN}maxPost(){return new tw(Jy,new vw("[PRIORITY-POST]",mw))}makePost(e,t){const n=gw(e);return new tw(t,new vw("[PRIORITY-POST]",n))}toString(){return".priority"}},_w=Math.log(2);class ww{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/_w,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const bw=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new aw(a,o.node,aw.BLACK,null,null);{const l=parseInt(s/2,10)+t,u=i(t,l),c=i(l+1,r);return o=e[l],a=n?n(o):o,new aw(a,o.node,aw.BLACK,u,c)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const u=i(s+1,a),c=e[s],h=n?n(c):c;l(new aw(h,c.node,r,null,u))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,aw.BLACK):(a(r,aw.BLACK),a(r,aw.RED))}return s}(new ww(e.length));return new lw(r||t,s)};let Ew;const Cw={};class Sw{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Yr(Cw&&yw,"ChildrenNode.ts has not been loaded"),Ew=Ew||new Sw({".priority":Cw},{".priority":yw}),Ew}get(e){const t=Ti(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof lw?t:null}hasIndex(e){return Ii(this.indexSet_,e.toString())}addIndex(e,t){Yr(e!==sw,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(tw.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?bw(n,e.getCompare()):Cw;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const u=Object.assign({},this.indexes_);return u[a]=s,new Sw(u,l)}addToIndexes(e,t){const n=Li(this.indexes_,((n,r)=>{const i=Ti(this.indexSet_,r);if(Yr(i,"Missing index implementation for "+r),n===Cw){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(tw.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),bw(n,i.getCompare())}return Cw}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new tw(e.name,r))),i.insert(e,e.node)}}));return new Sw(n,this.indexSet_)}removeFromIndexes(e,t){const n=Li(this.indexes_,(n=>{if(n===Cw)return n;{const r=t.get(e.name);return r?n.remove(new tw(e.name,r)):n}}));return new Sw(n,this.indexSet_)}}let kw;class Iw{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&pw(this.priorityNode_),this.children_.isEmpty()&&Yr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return kw||(kw=new Iw(new lw(cw),null,Sw.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||kw}updatePriority(e){return this.children_.isEmpty()?this:new Iw(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?kw:t}}getChild(e){const t=j_(e);return null===t?this:this.getImmediateChild(t).getChild(F_(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Yr(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new tw(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?kw:this.priorityNode_;return new Iw(r,s,i)}}updateChild(e,t){const n=j_(e);if(null===n)return t;{Yr(".priority"!==j_(e)||1===U_(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(F_(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(yw,((s,o)=>{t[s]=o.val(e),n++,i&&Iw.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+dw(this.getPriority().val())+":"),this.forEachChild(yw,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Vy(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new tw(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new tw(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new tw(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,tw.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,tw.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Tw?-1:0}withIndex(e){if(e===sw||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Iw(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===sw||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(yw),n=t.getIterator(yw);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===sw?null:this.indexMap_.get(e.toString())}}Iw.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Tw=new class extends Iw{constructor(){super(new lw(cw),Iw.EMPTY_NODE,Sw.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Iw.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(tw,{MIN:{value:new tw(Xy,Iw.EMPTY_NODE)},MAX:{value:new tw(Jy,Tw)}}),iw.__EMPTY_NODE=Iw.EMPTY_NODE,vw.__childrenNodeConstructor=Iw,hw=Tw,function(e){mw=e}(Tw);function xw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Iw.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Yr(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new vw(e,xw(t))}if(e instanceof Array){let n=Iw.EMPTY_NODE;return i_(e,((t,r)=>{if(Ii(e,t)&&"."!==t.substring(0,1)){const e=xw(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(xw(t))}{const n=[];let r=!1;if(i_(e,((e,t)=>{if("."!==e.substring(0,1)){const i=xw(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new tw(e,i)))}})),0===n.length)return Iw.EMPTY_NODE;const i=bw(n,uw,(e=>e.name),cw);if(r){const e=bw(n,yw.getCompare());return new Iw(i,xw(t),new Sw({".priority":e},{".priority":yw}))}return new Iw(i,xw(t),Sw.Default)}}!function(e){gw=e}(xw);class Lw extends nw{constructor(e){super(),this.indexPath_=e,Yr(!W_(e)&&".priority"!==j_(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Zy(e.name,t.name):i}makePost(e,t){const n=xw(e),r=Iw.EMPTY_NODE.updateChild(this.indexPath_,n);return new tw(t,r)}maxPost(){const e=Iw.EMPTY_NODE.updateChild(this.indexPath_,Tw);return new tw(Jy,e)}toString(){return z_(this.indexPath_,0).join("/")}}const Pw=new class extends nw{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Zy(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return tw.MIN}maxPost(){return tw.MAX}makePost(e,t){const n=xw(e);return new tw(t,n)}toString(){return".value"}};function Nw(e){return{type:"value",snapshotNode:e}}function Rw(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ow(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Mw(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Aw{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Yr(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Ow(t,o)):Yr(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Rw(t,n)):s.trackChildChange(Mw(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(yw,((e,r)=>{t.hasChild(e)||n.trackChildChange(Ow(e,r))})),t.isLeafNode()||t.forEachChild(yw,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Mw(t,r,i))}else n.trackChildChange(Rw(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Iw.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Dw{constructor(e){this.indexedFilter_=new Aw(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Dw.getStartPost_(e),this.endPost_=Dw.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new tw(t,n))||(n=Iw.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Iw.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Iw.EMPTY_NODE);const i=this;return t.forEachChild(yw,((e,t)=>{i.matches(new tw(e,t))||(r=r.updateImmediateChild(e,Iw.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class jw{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Dw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new tw(t,n))||(n=Iw.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Iw.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Iw.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(Iw.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Iw.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Yr(o.numChildren()===this.limit_,"");const a=new tw(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),u=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let c=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=c&&(c.name===t||o.hasChild(c.name));)c=r.getChildAfterChild(this.index_,c,this.reverse_);const h=null==c?1:s(c,a);if(u&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(Mw(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Ow(t,e));const n=o.updateImmediateChild(t,Iw.EMPTY_NODE);return null!=c&&this.rangedFilter_.matches(c)?(null!=i&&i.trackChildChange(Rw(c.name,c.node)),n.updateImmediateChild(c.name,c.node)):n}}return n.isEmpty()?e:u&&s(l,a)>=0?(null!=i&&(i.trackChildChange(Ow(l.name,l.node)),i.trackChildChange(Rw(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,Iw.EMPTY_NODE)):e}}class Uw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yw}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Yr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Yr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xy}hasEnd(){return this.endSet_}getIndexEndValue(){return Yr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Yr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Jy}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Yr(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yw}copy(){const e=new Uw;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Fw(e){const t={};if(e.isDefault())return t;let n;if(e.index_===yw?n="$priority":e.index_===Pw?n="$value":e.index_===sw?n="$key":(Yr(e.index_ instanceof Lw,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Si(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Si(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Si(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Si(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Si(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Vw(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==yw&&(t.i=e.index_.toString()),t}class zw extends R_{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=$y("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Yr(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=zw.getListenId_(e,n),o={};this.listens_[s]=o;const a=Fw(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),Ti(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=zw.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Fw(e._queryParams),n=e._path.toString(),r=new di;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ri(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=Ci(a.responseText)}catch(NS){Qy("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&Qy("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class Bw{constructor(){this.rootNode_=Iw.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function qw(){return{value:null,children:new Map}}function Ww(e,t,n){if(W_(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=j_(t);e.children.has(r)||e.children.set(r,qw());Ww(e.children.get(r),t=F_(t),n)}}function Hw(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Hw(r,new A_(t.toString()+"/"+e),n)}))}class $w{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&i_(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Kw{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new $w(e);const n=1e4+2e4*Math.random();u_(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;i_(e,((e,r)=>{r>0&&Ii(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),u_(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Gw;function Qw(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Gw||(Gw={}));class Yw{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Gw.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(W_(this.path)){if(null!=this.affectedTree.value)return Yr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new A_(e));return new Yw(D_(),t,this.revert)}}return Yr(j_(this.path)===e,"operationForChild called for unrelated child."),new Yw(F_(this.path),this.affectedTree,this.revert)}}class Xw{constructor(e,t){this.source=e,this.path=t,this.type=Gw.LISTEN_COMPLETE}operationForChild(e){return W_(this.path)?new Xw(this.source,D_()):new Xw(this.source,F_(this.path))}}class Jw{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Gw.OVERWRITE}operationForChild(e){return W_(this.path)?new Jw(this.source,D_(),this.snap.getImmediateChild(e)):new Jw(this.source,F_(this.path),this.snap)}}class Zw{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Gw.MERGE}operationForChild(e){if(W_(this.path)){const t=this.children.subtree(new A_(e));return t.isEmpty()?null:t.value?new Jw(this.source,D_(),t.value):new Zw(this.source,D_(),t)}return Yr(j_(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Zw(this.source,F_(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class eb{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(W_(e))return this.isFullyInitialized()&&!this.filtered_;const t=j_(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class tb{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function nb(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Xr("Should only compare child_ events.");const r=new tw(t.childName,t.snapshotNode),i=new tw(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function rb(e,t){return{eventCache:e,serverCache:t}}function ib(e,t,n,r){return rb(new eb(t,n,r),e.serverCache)}function sb(e,t,n,r){return rb(e.eventCache,new eb(t,n,r))}function ob(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ab(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let lb;class ub{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(lb||(lb=new lw(e_)),lb);this.value=e,this.children=t}static fromObject(e){let t=new ub(null);return i_(e,((e,n)=>{t=t.set(new A_(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:D_(),value:this.value};if(W_(e))return null;{const n=j_(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(F_(e),t);if(null!=i){return{path:q_(new A_(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(W_(e))return this;{const t=j_(e),n=this.children.get(t);return null!==n?n.subtree(F_(e)):new ub(null)}}set(e,t){if(W_(e))return new ub(t,this.children);{const n=j_(e),r=(this.children.get(n)||new ub(null)).set(F_(e),t),i=this.children.insert(n,r);return new ub(this.value,i)}}remove(e){if(W_(e))return this.children.isEmpty()?new ub(null):new ub(null,this.children);{const t=j_(e),n=this.children.get(t);if(n){const r=n.remove(F_(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new ub(null):new ub(this.value,i)}return this}}get(e){if(W_(e))return this.value;{const t=j_(e),n=this.children.get(t);return n?n.get(F_(e)):null}}setTree(e,t){if(W_(e))return t;{const n=j_(e),r=(this.children.get(n)||new ub(null)).setTree(F_(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new ub(this.value,i)}}fold(e){return this.fold_(D_(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(q_(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,D_(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(W_(e))return null;{const r=j_(e),i=this.children.get(r);return i?i.findOnPath_(F_(e),q_(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,D_(),t)}foreachOnPath_(e,t,n){if(W_(e))return this;{this.value&&n(t,this.value);const r=j_(e),i=this.children.get(r);return i?i.foreachOnPath_(F_(e),q_(t,r),n):new ub(null)}}foreach(e){this.foreach_(D_(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(q_(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class cb{constructor(e){this.writeTree_=e}static empty(){return new cb(new ub(null))}}function hb(e,t,n){if(W_(t))return new cb(new ub(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=H_(i,t);return s=s.updateChild(o,n),new cb(e.writeTree_.set(i,s))}{const r=new ub(n),i=e.writeTree_.setTree(t,r);return new cb(i)}}}function db(e,t,n){let r=e;return i_(n,((e,n)=>{r=hb(r,q_(t,e),n)})),r}function pb(e,t){if(W_(t))return cb.empty();{const n=e.writeTree_.setTree(t,new ub(null));return new cb(n)}}function fb(e,t){return null!=gb(e,t)}function gb(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(H_(n.path,t)):null}function mb(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(yw,((e,n)=>{t.push(new tw(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new tw(e,n.value))})),t}function vb(e,t){if(W_(t))return e;{const n=gb(e,t);return new cb(null!=n?new ub(n):e.writeTree_.subtree(t))}}function yb(e){return e.writeTree_.isEmpty()}function _b(e,t){return wb(D_(),e.writeTree_,t)}function wb(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Yr(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=wb(q_(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(q_(e,".priority"),r)),n}}function bb(e,t){return Mb(t,e)}function Eb(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Yr(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&Cb(t,r.path)?i=!1:G_(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=kb(e.allWrites,Sb,D_()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=pb(e.visibleWrites,r.path);else{i_(r.children,(t=>{e.visibleWrites=pb(e.visibleWrites,q_(r.path,t))}))}return!0}return!1}function Cb(e,t){if(e.snap)return G_(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&G_(q_(e.path,n),t))return!0;return!1}function Sb(e){return e.visible}function kb(e,t,n){let r=cb.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)G_(n,e)?(t=H_(n,e),r=hb(r,t,s.snap)):G_(e,n)&&(t=H_(e,n),r=hb(r,D_(),s.snap.getChild(t)));else{if(!s.children)throw Xr("WriteRecord should have .snap or .children");if(G_(n,e))t=H_(n,e),r=db(r,t,s.children);else if(G_(e,n))if(t=H_(e,n),W_(t))r=db(r,D_(),s.children);else{const e=Ti(s.children,j_(t));if(e){const n=e.getChild(F_(t));r=hb(r,D_(),n)}}}}}return r}function Ib(e,t,n,r,i){if(r||i){const s=vb(e.visibleWrites,t);if(!i&&yb(s))return n;if(i||null!=n||fb(s,D_())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(G_(e.path,t)||G_(t,e.path))};return _b(kb(e.allWrites,s,t),n||Iw.EMPTY_NODE)}return null}{const r=gb(e.visibleWrites,t);if(null!=r)return r;{const r=vb(e.visibleWrites,t);if(yb(r))return n;if(null!=n||fb(r,D_())){return _b(r,n||Iw.EMPTY_NODE)}return null}}}function Tb(e,t,n,r){return Ib(e.writeTree,e.treePath,t,n,r)}function xb(e,t){return function(e,t,n){let r=Iw.EMPTY_NODE;const i=gb(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(yw,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=vb(e.visibleWrites,t);return n.forEachChild(yw,((e,t)=>{const n=_b(vb(i,new A_(e)),t);r=r.updateImmediateChild(e,n)})),mb(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return mb(vb(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Lb(e,t,n,r){return function(e,t,n,r,i){Yr(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=q_(t,n);if(fb(e.visibleWrites,s))return null;{const t=vb(e.visibleWrites,s);return yb(t)?i.getChild(n):_b(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Pb(e,t){return function(e,t){return gb(e.visibleWrites,t)}(e.writeTree,q_(e.treePath,t))}function Nb(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=vb(e.visibleWrites,t),u=gb(l,D_());if(null!=u)a=u;else{if(null==n)return[];a=_b(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function Rb(e,t,n){return function(e,t,n,r){const i=q_(t,n),s=gb(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return _b(vb(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Ob(e,t){return Mb(q_(e.treePath,t),e.writeTree)}function Mb(e,t){return{treePath:e,writeTree:t}}class Ab{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Yr("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Yr(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Mw(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Ow(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Rw(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Xr("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Mw(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Db=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class jb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new eb(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rb(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ab(this.viewCache_),i=Nb(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function Ub(e,t,n,r,i){const s=new Ab;let o,a;if(n.type===Gw.OVERWRITE){const l=n;l.source.fromUser?o=zb(e,t,l.path,l.snap,r,i,s):(Yr(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!W_(l.path),o=Vb(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===Gw.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const u=q_(n,r);Bb(t,j_(u))&&(a=zb(e,a,u,l,i,s,o))})),r.foreach(((r,l)=>{const u=q_(n,r);Bb(t,j_(u))||(a=zb(e,a,u,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(Yr(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=Wb(e,t,l.path,l.children,r,i,a,s))}else if(n.type===Gw.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=Pb(r,n))return t;{const a=new jb(r,t,i),l=t.eventCache.getNode();let u;if(W_(n)||".priority"===j_(n)){let n;if(t.serverCache.isFullyInitialized())n=Tb(r,ab(t));else{const e=t.serverCache.getNode();Yr(e instanceof Iw,"serverChildren would be complete if leaf node"),n=xb(r,e)}u=e.filter.updateFullNode(l,n,s)}else{const i=j_(n);let c=Rb(r,i,t.serverCache);null==c&&t.serverCache.isCompleteForChild(i)&&(c=l.getImmediateChild(i)),u=null!=c?e.filter.updateChild(l,i,c,F_(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Iw.EMPTY_NODE,F_(n),a,s):l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Tb(r,ab(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Pb(r,D_()),ib(t,u,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=Pb(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(W_(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Vb(e,t,n,l.getNode().getChild(n),i,s,a,o);if(W_(n)){let r=new ub(null);return l.getNode().forEachChild(sw,((e,t)=>{r=r.set(new A_(e),t)})),Wb(e,t,n,r,i,s,a,o)}return t}{let u=new ub(null);return r.foreach(((e,t)=>{const r=q_(n,e);l.isCompleteForPath(r)&&(u=u.set(e,l.getNode().getChild(r)))})),Wb(e,t,n,u,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==Gw.LISTEN_COMPLETE)throw Xr("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=sb(t,s.getNode(),s.isFullyInitialized()||W_(n),s.isFiltered());return Fb(e,o,n,r,Db,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ob(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Nw(ob(t)))}}(t,o,l),{viewCache:o,changes:l}}function Fb(e,t,n,r,i,s){const o=t.eventCache;if(null!=Pb(r,n))return t;{let a,l;if(W_(n))if(Yr(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=ab(t),i=xb(r,n instanceof Iw?n:Iw.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Tb(r,ab(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const u=j_(n);if(".priority"===u){Yr(1===U_(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=Lb(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const c=F_(n);let h;if(o.isCompleteForChild(u)){l=t.serverCache.getNode();const e=Lb(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(u).updateChild(c,e):o.getNode().getImmediateChild(u)}else h=Rb(r,u,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),u,h,c,i,s):o.getNode()}}return ib(t,a,o.isFullyInitialized()||W_(n),e.filter.filtersNodes())}}function Vb(e,t,n,r,i,s,o,a){const l=t.serverCache;let u;const c=o?e.filter:e.filter.getIndexedFilter();if(W_(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),e,null)}else{const e=j_(n);if(!l.isCompleteForPath(n)&&U_(n)>1)return t;const i=F_(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);u=".priority"===e?c.updatePriority(l.getNode(),s):c.updateChild(l.getNode(),e,s,i,Db,null)}const h=sb(t,u,l.isFullyInitialized()||W_(n),c.filtersNodes());return Fb(e,h,n,i,new jb(i,h,s),a)}function zb(e,t,n,r,i,s,o){const a=t.eventCache;let l,u;const c=new jb(i,t,s);if(W_(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=ib(t,u,!0,e.filter.filtersNodes());else{const i=j_(n);if(".priority"===i)u=e.filter.updatePriority(t.eventCache.getNode(),r),l=ib(t,u,a.isFullyInitialized(),a.isFiltered());else{const s=F_(n),u=a.getNode().getImmediateChild(i);let h;if(W_(s))h=r;else{const e=c.getCompleteChild(i);h=null!=e?".priority"===V_(s)&&e.getChild(B_(s)).isEmpty()?e:e.updateChild(s,r):Iw.EMPTY_NODE}if(u.equals(h))l=t;else{l=ib(t,e.filter.updateChild(a.getNode(),i,h,s,c,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function Bb(e,t){return e.eventCache.isCompleteForChild(t)}function qb(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Wb(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,u=t;l=W_(n)?r:new ub(null).setTree(n,r);const c=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(c.hasChild(n)){const l=qb(0,t.serverCache.getNode().getImmediateChild(n),r);u=Vb(e,u,new A_(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!l){const l=qb(0,t.serverCache.getNode().getImmediateChild(n),r);u=Vb(e,u,new A_(n),l,i,s,o,a)}})),u}class Hb{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Aw(n.getIndex()),i=(s=n).loadsAllData()?new Aw(s.getIndex()):s.hasLimit()?new jw(s):new Dw(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(Iw.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Iw.EMPTY_NODE,a.getNode(),null),c=new eb(l,o.isFullyInitialized(),r.filtersNodes()),h=new eb(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=rb(h,c),this.eventGenerator_=new tb(this.query_)}get query(){return this.query_}}function $b(e,t){const n=ab(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!W_(t)&&!n.getImmediateChild(j_(t)).isEmpty())?n.getChild(t):null}function Kb(e){return 0===e.eventRegistrations_.length}function Gb(e,t,n){const r=[];if(n){Yr(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Qb(e,t,n,r){t.type===Gw.MERGE&&null!==t.source.queryId&&(Yr(ab(e.viewCache_),"We should always have a full cache before handling merges"),Yr(ob(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=Ub(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Yr(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Yr(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Yr(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Yb(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Yb(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),nb(e,i,"child_removed",t,r,n),nb(e,i,"child_added",t,r,n),nb(e,i,"child_moved",s,r,n),nb(e,i,"child_changed",t,r,n),nb(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Xb,Jb;class Zb{constructor(){this.views=new Map}}function eE(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Yr(null!=s,"SyncTree gave us an op for an invalid query."),Qb(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(Qb(s,t,n,r));return i}}function tE(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=Tb(n,i?r:null),s=!1;e?s=!0:r instanceof Iw?(e=xb(n,r),s=!1):(e=Iw.EMPTY_NODE,s=!1);const o=rb(new eb(e,s,!1),new eb(r,i,!1));return new Hb(t,o)}return o}function nE(e,t,n,r,i,s){const o=tE(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(yw,((e,t)=>{r.push(Rw(e,t))}));return n.isFullyInitialized()&&r.push(Nw(n.getNode())),Yb(e,r,n.getNode(),t)}(o,n)}function rE(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=lE(e);if("default"===i)for(const[l,u]of e.views.entries())o=o.concat(Gb(u,n,r)),Kb(u)&&(e.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const t=e.views.get(i);t&&(o=o.concat(Gb(t,n,r)),Kb(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!lE(e)&&s.push(new(Yr(Xb,"Reference.ts has not been loaded"),Xb)(t._repo,t._path)),{removed:s,events:o}}function iE(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function sE(e,t){let n=null;for(const r of e.views.values())n=n||$b(r,t);return n}function oE(e,t){if(t._queryParams.loadsAllData())return uE(e);{const n=t._queryIdentifier;return e.views.get(n)}}function aE(e,t){return null!=oE(e,t)}function lE(e){return null!=uE(e)}function uE(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let cE=1;class hE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ub(null),this.pendingWriteTree_={visibleWrites:cb.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dE(e,t,n,r,i){return function(e,t,n,r,i){Yr(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=hb(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?wE(e,new Jw({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function pE(e,t,n,r){!function(e,t,n,r){Yr(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=db(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=ub.fromObject(n);return wE(e,new Zw({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function fE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Eb(e.pendingWriteTree_,t)){let t=new ub(null);return null!=r.snap?t=t.set(D_(),!0):i_(r.children,(e=>{t=t.set(new A_(e),!0)})),wE(e,new Yw(r.path,t,n))}return[]}function gE(e,t,n){return wE(e,new Jw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function mE(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||aE(o,t))){const l=rE(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!i){const n=-1!==u.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>lE(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&lE(t)){return[uE(t)]}{let e=[];return t&&(e=iE(t)),i_(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=CE(e,r);e.listenProvider_.startListening(LE(i),SE(e,i),s.hashFn,s.onComplete)}}}if(!i&&u.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(LE(t),n)}else u.forEach((t=>{const n=e.queryToTagMap.get(kE(t));e.listenProvider_.stopListening(LE(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=kE(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,u)}return a}function vE(e,t,n,r){const i=IE(e,r);if(null!=i){const r=TE(i),s=r.path,o=r.queryId,a=H_(s,t);return xE(e,s,new Jw(Qw(o),a,n))}return[]}function yE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=H_(e,i);s=s||sE(t,n),o=o||lE(t)}));let a,l=e.syncPointTree_.get(i);if(l?(o=o||lE(l),s=s||sE(l,D_())):(l=new Zb,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=Iw.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=sE(t,D_());n&&(s=s.updateImmediateChild(e,n))}))}const u=aE(l,t);if(!u&&!t._queryParams.loadsAllData()){const n=kE(t);Yr(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=cE++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let c=nE(l,t,n,bb(e.pendingWriteTree_,i),s,a);if(!u&&!o&&!r){const n=oE(l,t);c=c.concat(function(e,t,n){const r=t._path,i=SE(e,t),s=CE(e,n),o=e.listenProvider_.startListening(LE(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)Yr(!lE(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!W_(e)&&t&&lE(t))return[uE(t).query];{let e=[];return t&&(e=e.concat(iE(t).map((e=>e.query)))),i_(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(LE(r),SE(e,r))}}return o}(e,t,n))}return c}function _E(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=sE(n,H_(e,t));if(r)return r}));return Ib(r,t,i,n,!0)}function wE(e,t){return bE(t,e.syncPointTree_,null,bb(e.pendingWriteTree_,D_()))}function bE(e,t,n,r){if(W_(e.path))return EE(e,t,n,r);{const i=t.get(D_());null==n&&null!=i&&(n=sE(i,D_()));let s=[];const o=j_(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=Ob(r,o);s=s.concat(bE(a,l,e,t))}return i&&(s=s.concat(eE(i,e,r,n))),s}}function EE(e,t,n,r){const i=t.get(D_());null==n&&null!=i&&(n=sE(i,D_()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=Ob(r,t),l=e.operationForChild(t);l&&(s=s.concat(EE(l,i,o,a)))})),i&&(s=s.concat(eE(i,e,r,n))),s}function CE(e,t){const n=t.query,r=SE(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Iw.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=IE(e,n);if(r){const n=TE(r),i=n.path,s=n.queryId,o=H_(i,t);return xE(e,i,new Xw(Qw(s),o))}return[]}(e,n._path,r):function(e,t){return wE(e,new Xw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return mE(e,n,null,r)}}}}function SE(e,t){const n=kE(t);return e.queryToTagMap.get(n)}function kE(e){return e._path.toString()+"$"+e._queryIdentifier}function IE(e,t){return e.tagToQueryMap.get(t)}function TE(e){const t=e.indexOf("$");return Yr(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new A_(e.substr(0,t))}}function xE(e,t,n){const r=e.syncPointTree_.get(t);Yr(r,"Missing sync point for query tag that we're tracking");return eE(r,n,bb(e.pendingWriteTree_,t),null)}function LE(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Yr(Jb,"Reference.ts has not been loaded"),Jb)(e._repo,e._path):e}class PE{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new PE(t)}node(){return this.node_}}class NE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=q_(this.path_,e);return new NE(this.syncTree_,t)}node(){return _E(this.syncTree_,this.path_)}}const RE=function(e,t,n){return e&&"object"===typeof e?(Yr(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?OE(e[".sv"],t,n):"object"===typeof e[".sv"]?ME(e[".sv"],t):void Yr(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},OE=function(e,t,n){if("timestamp"===e)return n.timestamp;Yr(!1,"Unexpected server value: "+e)},ME=function(e,t,n){e.hasOwnProperty("increment")||Yr(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Yr(!1,"Unexpected increment value: "+r);const i=t.node();if(Yr(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},AE=function(e,t,n,r){return jE(t,new NE(n,e),r)},DE=function(e,t,n){return jE(e,new PE(t),n)};function jE(e,t,n){const r=e.getPriority().val(),i=RE(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=RE(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new vw(s,xw(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new vw(i))),r.forEachChild(yw,((e,r)=>{const i=jE(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class UE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function FE(e,t){let n=t instanceof A_?t:new A_(t),r=e,i=j_(n);for(;null!==i;){const e=Ti(r.node.children,i)||{children:{},childCount:0};r=new UE(i,r,e),n=F_(n),i=j_(n)}return r}function VE(e){return e.node.value}function zE(e,t){e.node.value=t,$E(e)}function BE(e){return e.node.childCount>0}function qE(e,t){i_(e.node.children,((n,r)=>{t(new UE(n,e,r))}))}function WE(e,t,n,r){n&&!r&&t(e),qE(e,(e=>{WE(e,t,!0,r)})),n&&r&&t(e)}function HE(e){return new A_(null===e.parent?e.name:HE(e.parent)+"/"+e.name)}function $E(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===VE(e)&&!BE(e)}(n),i=Ii(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,$E(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,$E(e))}(e.parent,e.name,e)}const KE=/[\[\].#$\/\u0000-\u001F\u007F]/,GE=/[\[\].#$\u0000-\u001F\u007F]/,QE=10485760,YE=function(e){return"string"===typeof e&&0!==e.length&&!KE.test(e)},XE=function(e){return"string"===typeof e&&0!==e.length&&!GE.test(e)},JE=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Yy(e)||e&&"object"===typeof e&&Ii(e,".sv")},ZE=function(e,t,n,r){r&&void 0===t||eC(Ui(e,"value"),t,n)},eC=function(e,t,n){const r=n instanceof A_?new Q_(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+X_(r));if("function"===typeof t)throw new Error(e+"contains a function "+X_(r)+" with contents = "+t.toString());if(Yy(t))throw new Error(e+"contains "+t.toString()+" "+X_(r));if("string"===typeof t&&t.length>QE/3&&Fi(t)>QE)throw new Error(e+"contains a string greater than "+QE+" utf8 bytes "+X_(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(i_(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!YE(t)))throw new Error(e+" contains an invalid key ("+t+") "+X_(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Fi(t),Y_(e)}(r,t),eC(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=Fi(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+X_(r)+" in addition to actual children.")}},tC=function(e,t,n,r){if(r&&void 0===t)return;const i=Ui(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];i_(t,((e,t)=>{const r=new A_(e);if(eC(i,t,q_(n,r)),".priority"===V_(r)&&!JE(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=z_(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!YE(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort($_);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&G_(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},nC=function(e,t,n,r){if((!r||void 0!==n)&&!XE(n))throw new Error(Ui(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},rC=function(e,t){if(".info"===j_(t))throw new Error(e+" failed = Can't modify data under /.info/")},iC=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!YE(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),XE(e)}(n))throw new Error(Ui(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class sC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function oC(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||K_(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function aC(e,t,n){oC(e,n),uC(e,(e=>K_(e,t)))}function lC(e,t,n){oC(e,n),uC(e,(e=>G_(e,t)||G_(t,e)))}function uC(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(cC(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function cC(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();By&&Hy("event: "+n.toString()),l_(r)}}}const hC="repo_interrupt";class dC{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qw(),this.transactionQueueTree_=new UE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pC(e,t,n){if(e.stats_=C_(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new zw(e.repoInfo_,((t,n,r,i)=>{mC(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>vC(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Si(n)}catch(NS){throw new Error("Invalid authOverride provided: "+NS)}}e.persistentConnection_=new ew(e.repoInfo_,t,((t,n,r,i)=>{mC(e,t,n,r,i)}),(t=>{vC(e,t)}),(t=>{!function(e,t){i_(t,((t,n)=>{yC(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return E_[n]||(E_[n]=t()),E_[n]}(e.repoInfo_,(()=>new Kw(e.stats_,e.server_))),e.infoData_=new Bw,e.infoSyncTree_=new hE({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=gE(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),yC(e,"connected",!1),e.serverSyncTree_=new hE({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);lC(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function fC(e){const t=e.infoData_.getNode(new A_(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function gC(e){return(t=(t={timestamp:fC(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function mC(e,t,n,r,i){e.dataUpdateCount++;const s=new A_(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=Li(n,(e=>xw(e)));o=function(e,t,n,r){const i=IE(e,r);if(i){const r=TE(i),s=r.path,o=r.queryId,a=H_(s,t),l=ub.fromObject(n);return xE(e,s,new Zw(Qw(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=xw(n);o=vE(e.serverSyncTree_,s,t,i)}else if(r){const t=Li(n,(e=>xw(e)));o=function(e,t,n){const r=ub.fromObject(n);return wE(e,new Zw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=xw(n);o=gE(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=TC(e,s)),lC(e.eventQueue_,a,o)}function vC(e,t){yC(e,"connected",t),!1===t&&function(e){CC(e,"onDisconnectEvents");const t=gC(e),n=qw();Hw(e.onDisconnect_,D_(),((r,i)=>{const s=AE(r,i,e.serverSyncTree_,t);Ww(n,r,s)}));let r=[];Hw(n,D_(),((t,n)=>{r=r.concat(gE(e.serverSyncTree_,t,n));const i=RC(e,t);TC(e,i)})),e.onDisconnect_=qw(),lC(e.eventQueue_,D_(),r)}(e)}function yC(e,t,n){const r=new A_("/.info/"+t),i=xw(n);e.infoData_.updateSnapshot(r,i);const s=gE(e.infoSyncTree_,r,i);lC(e.eventQueue_,r,s)}function _C(e){return e.nextWriteId_++}function wC(e,t,n,r,i){CC(e,"set",{path:t.toString(),value:n,priority:r});const s=gC(e),o=xw(n,r),a=_E(e.serverSyncTree_,t),l=DE(o,a,s),u=_C(e),c=dE(e.serverSyncTree_,t,l,u,!0);oC(e.eventQueue_,c),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||Qy("set at "+t+" failed: "+n);const o=fE(e.serverSyncTree_,u,!s);lC(e.eventQueue_,t,o),SC(e,i,n,r)}));const h=RC(e,t);TC(e,h),lC(e.eventQueue_,h,[])}function bC(e,t,n){let r;r=".info"===j_(t._path)?mE(e.infoSyncTree_,t,n):mE(e.serverSyncTree_,t,n),aC(e.eventQueue_,t._path,r)}function EC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(hC)}function CC(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Hy(t,...r)}function SC(e,t,n,r){t&&l_((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function kC(e,t,n){return _E(e.serverSyncTree_,t,n)||Iw.EMPTY_NODE}function IC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||NC(e,t),VE(t)){const n=LC(e,t);Yr(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=kC(e,t,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const e=n[u];Yr(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=H_(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{CC(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(fE(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();NC(e,FE(e.transactionQueueTree_,t)),IC(e,e.transactionQueueTree_),lC(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)l_(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Qy("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}TC(e,t)}}),o)}(e,HE(t),n)}else BE(t)&&qE(t,(t=>{IC(e,t)}))}function TC(e,t){const n=xC(e,t),r=HE(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],u=H_(n,s.path);let c,h=!1;if(Yr(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)h=!0,c=s.abortReason,i=i.concat(fE(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)h=!0,c="maxretry",i=i.concat(fE(e.serverSyncTree_,s.currentWriteId,!0));else{const n=kC(e,s.path,o);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){eC("transaction failed: Data returned ",r,s.path);let t=xw(r);"object"===typeof r&&null!=r&&Ii(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=gC(e),u=DE(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=u,s.currentWriteId=_C(e),o.splice(o.indexOf(a),1),i=i.concat(dE(e.serverSyncTree_,s.path,u,s.currentWriteId,s.applyLocally)),i=i.concat(fE(e.serverSyncTree_,a,!0))}else h=!0,c="nodata",i=i.concat(fE(e.serverSyncTree_,s.currentWriteId,!0))}lC(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===c?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(c),!1,null)))))}var a;NC(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)l_(r[l]);IC(e,e.transactionQueueTree_)}(e,LC(e,n),r),r}function xC(e,t){let n,r=e.transactionQueueTree_;for(n=j_(t);null!==n&&void 0===VE(r);)r=FE(r,n),n=j_(t=F_(t));return r}function LC(e,t){const n=[];return PC(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function PC(e,t,n){const r=VE(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);qE(t,(t=>{PC(e,t,n)}))}function NC(e,t){const n=VE(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,zE(t,n.length>0?n:void 0)}qE(t,(t=>{NC(e,t)}))}function RC(e,t){const n=HE(xC(e,t)),r=FE(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{OC(e,t)})),OC(e,r),WE(r,(t=>{OC(e,t)})),n}function OC(e,t){const n=VE(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Yr(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Yr(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(fE(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?zE(t,void 0):n.length=s+1,lC(e.eventQueue_,HE(t),i);for(let e=0;e<r.length;e++)l_(r[e])}}const MC=function(e,t){const n=AC(e),r=n.namespace;"firebase.com"===n.domain&&Gy(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Gy("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qy("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new y_(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new A_(n.pathString)}},AC=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let u=e.indexOf("//");u>=0&&(a=e.substring(0,u-1),e=e.substring(u+2));let c=e.indexOf("/");-1===c&&(c=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(NS){}t+="/"+e}return t}(e.substring(c,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Qy(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));u=t.indexOf(":"),u>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(u+1),10)):u=t.length;const p=t.slice(0,u);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},DC="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",jC=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=DC.charAt(n%64),n=Math.floor(n/64);Yr(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=DC.charAt(t[i]);return Yr(20===o.length,"nextPushId: Length should be 20."),o}}();class UC{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Si(this.snapshot.exportVal())}}class FC{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class VC{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Yr(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class zC{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return W_(this._path)?null:V_(this._path)}get ref(){return new BC(this._repo,this._path)}get _queryIdentifier(){const e=Vw(this._queryParams),t=n_(e);return"{}"===t?"default":t}get _queryObject(){return Vw(this._queryParams)}isEqual(e){if(!((e=Vi(e))instanceof zC))return!1;const t=this._repo===e._repo,n=K_(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class BC extends zC{constructor(e,t){super(e,t,new Uw,!1)}get parent(){const e=B_(this._path);return null===e?null:new BC(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class qC{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new A_(e),n=HC(this.ref,e);return new qC(this._node.getChild(t),n,yw)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new qC(n,HC(this.ref,t),yw))))}hasChild(e){const t=new A_(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function WC(e,t){return(e=Vi(e))._checkNotDeleted("ref"),void 0!==t?HC(e._root,t):e._root}function HC(e,t){var n,r,i,s;return null===j_((e=Vi(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),nC(n,r,i,s)):nC("child","path",t,!1),new BC(e._repo,q_(e._path,t))}function $C(e,t){e=Vi(e),rC("set",e._path),ZE("set",t,e._path,!1);const n=new di;return wC(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function KC(e,t){tC("update",t,e._path,!1);const n=new di;return function(e,t,n,r){CC(e,"update",{path:t.toString(),value:n});let i=!0;const s=gC(e),o={};if(i_(n,((n,r)=>{i=!1,o[n]=AE(q_(t,n),xw(r),e.serverSyncTree_,s)})),i)Hy("update() called with empty data.  Don't do anything."),SC(0,r,"ok",void 0);else{const i=_C(e),s=pE(e.serverSyncTree_,t,o,i);oC(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||Qy("update at "+t+" failed: "+n);const a=fE(e.serverSyncTree_,i,!o),l=a.length>0?TC(e,t):t;lC(e.eventQueue_,l,a),SC(0,r,n,s)})),i_(n,(n=>{const r=RC(e,q_(t,n));TC(e,r)})),lC(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}class GC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new UC("value",this,new qC(e.snapshotNode,new BC(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new FC(this,e,t):null}matches(e){return e instanceof GC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class QC{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new FC(this,e,t):null}createEvent(e,t){Yr(null!=e.childName,"Child events should have a childName.");const n=HC(new BC(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new UC(e.type,this,new qC(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof QC&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function YC(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{bC(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new VC(n,s||void 0),a="value"===t?new GC(o):new QC(t,o);return function(e,t,n){let r;r=".info"===j_(t._path)?yE(e.infoSyncTree_,t,n):yE(e.serverSyncTree_,t,n),aC(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>bC(e._repo,e,a)}function XC(e,t,n,r){return YC(e,"value",t,n,r)}!function(e){Yr(!Xb,"__referenceConstructor has already been defined"),Xb=e}(BC),function(e){Yr(!Jb,"__referenceConstructor has already been defined"),Jb=e}(BC);const JC={};let ZC=!1;function eS(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||Gy("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hy("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=MC(s,i),u=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyASCnXS0GK9Fd2diDiMsVpLI30bMZtFk6c",REACT_APP_FIREBASE_AUTH_DOMAIN:"blabla-4493a.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://blabla-4493a-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"blabla-4493a",REACT_APP_GOOGLE_MAPS_API_KEY:"AlzaSyCfIZ_pMopID6nYkLALRIaWoXGuKb8esJq"}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${u.namespace}`,l=MC(s,i),u=l.repoInfo):o=!l.repoInfo.secure;const c=i&&o?new d_(d_.OWNER):new h_(e.name,e.options,t);iC("Invalid Firebase Database URL",l),W_(l.path)||Gy("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=JC[t.name];i||(i={},JC[t.name]=i);let s=i[e.toURLString()];s&&Gy("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new dC(e,ZC,n,r),i[e.toURLString()]=s,s}(u,e,c,new c_(e.name,n));return new tS(h,e)}class tS{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(pC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new BC(this._repo,D_())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=JC[t];n&&n[e.key]===e||Gy(`Database ${t}(${e.repoInfo_}) has already been deleted.`),EC(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Gy("Cannot call "+e+" on a deleted database.")}}ew.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ew.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Ry(to),Ys(new zi("database",((e,t)=>{let{instanceIdentifier:n}=t;return eS(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),io(Ly,Py,e),io(Ly,Py,"esm2017")}();const nS=no({apiKey:"AIzaSyASCnXS0GK9Fd2diDiMsVpLI30bMZtFk6c",authDomain:"blabla-4493a.firebaseapp.com",projectId:"blabla-4493a",databaseURL:"https://blabla-4493a-default-rtdb.firebaseio.com",storageBucket:"blabla-4493a.appspot.com",messagingSenderId:"963094400663",appId:"1:963094400663:web:dfae5db63a5b68a6f623d2",measurementId:"G-YZ37JNB5RM"}),rS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ro();const t=Xs(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Xs(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Pi(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Eo(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Lu,persistence:[Fl,El,Sl]}),r=hi("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ou)return;const r=null===t||void 0===t?void 0:t.token;Mu!==r&&(Mu=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Vi(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Vi(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=li("auth");return s&&Ba(n,`http://${s}`),n}(nS),iS=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Xs("object"==typeof e?e:ro(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=ui("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=yv(e,wv))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ic("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ju.MOCK_USER;else{t=pi(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new cc(uc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ju(s)}e._authCredentials=new fc(new dc(t,n))}}(r,...e)}return r}(nS),sS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ro(),t=arguments.length>1?arguments[1]:void 0;const n=Xs(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=ui("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Vi(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Gy("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Gy('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new d_(d_.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:pi(r.mockUserToken,e.app.options.projectId);s=new d_(t)}!function(e,t,n,r){e.repoInfo_=new y_(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(n,...e)}return n}(nS);const oS=function(){const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),s=ee();return(0,Pe.jsxs)("div",{className:"login-container",children:[(0,Pe.jsx)("img",{src:"/BlaBlaCar.png",alt:"Logo",className:"logo"}),(0,Pe.jsx)("h2",{children:"Log In"}),(0,Pe.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await function(e,t,n){return Js(e.app)?Promise.reject(ko(e)):ml(Vi(e),tl.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&vl(e),t}))}(rS,e,r);console.log("userDetails=",t),alert("Login successful!"),s("/home")}catch(Ky){alert("Login Failed!")}},children:[(0,Pe.jsx)("input",{type:"email",placeholder:"Email",value:e,onChange:e=>n(e.target.value),required:!0}),(0,Pe.jsx)("input",{type:"password",placeholder:"Password",value:r,onChange:e=>i(e.target.value),required:!0}),(0,Pe.jsx)("button",{type:"submit",className:"login-btn",children:"Log In"})]})]})};const aS=function(){const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,o]=(0,t.useState)(""),[a,l]=(0,t.useState)(""),u=ee();return(0,Pe.jsxs)("div",{className:"signup-container",children:[(0,Pe.jsx)("img",{src:"/BlaBlaCar.png",alt:"Logo",className:"logo"}),(0,Pe.jsx)("h2",{children:"Create an Account"}),(0,Pe.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await async function(e,t,n){if(Js(e.app))return Promise.reject(ko(e));const r=Pa(e),i=Va(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ll,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&vl(e),t})),o=await ul._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(rS,e,r),n=t.user;await function(e,t,n){e=yv(e,Ev);const r=yv(e.firestore,Tv),i=my(e.converter,t,n);return Ty(r,[Bv(zv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ap.none())])}(kv(iS,"users",n.uid),{email:n.email,uid:n.uid,name:s,contact:a,createdAt:new Date}),alert("Signup Successful!"),u("/login")}catch(Ky){console.error("Signup Failed: ",Ky),alert("Signup Failed!")}},children:[(0,Pe.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value),placeholder:"Username",required:!0}),(0,Pe.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Contact Number",required:!0}),(0,Pe.jsx)("input",{type:"email",value:e,onChange:e=>n(e.target.value),placeholder:"Email",required:!0}),(0,Pe.jsx)("input",{type:"password",value:r,onChange:e=>i(e.target.value),placeholder:"Password",required:!0}),(0,Pe.jsx)("button",{type:"submit",className:"signup-btn",children:"Sign Up"})]})]})};const lS=function(){const[e,n]=(0,t.useState)({});return(0,t.useEffect)((()=>{!async function(){const e=await Ey(kv(iS,"users",rS.currentUser.uid));e.exists()&&n(e.data())}()}),[]),(0,Pe.jsxs)("div",{className:"profile-container",children:[(0,Pe.jsx)("img",{src:"/BlaBlaCar.png",alt:"Logo",className:"logo"}),(0,Pe.jsxs)("div",{className:"profile-card",children:[(0,Pe.jsx)("h2",{className:"profile-heading",children:"Your Profile"}),(0,Pe.jsxs)("div",{className:"profile-info",children:[(0,Pe.jsxs)("p",{children:[(0,Pe.jsx)("strong",{children:"Name:"})," ",e.name]}),(0,Pe.jsxs)("p",{children:[(0,Pe.jsx)("strong",{children:"Email:"})," ",e.email]})]})]})]})},uS=(0,t.createContext)();function cS(){return(0,t.useContext)(uS)}function hS(e){let{children:n}=e;const[r,i]=(0,t.useState)(null),[s,o]=(0,t.useState)(!0);(0,t.useEffect)((()=>{const e=function(e,t,n,r){return Vi(e).onAuthStateChanged(t,n,r)}(rS,(async e=>{if(e)try{const t=kv(iS,"users",e.uid),n=await Ey(t);n.exists()?i({uid:e.uid,email:e.email,...n.data()}):(console.error("No Firestore document found for user."),i(e))}catch(Ky){console.error("Error fetching user data from Firestore:",Ky),i(e)}else i(null);o(!1)}));return e}),[]);const a={currentUser:r,logout:function(){return function(e){return Vi(e).signOut()}(rS)},loading:s};return(0,Pe.jsxs)(uS.Provider,{value:a,children:[!s&&n," "]})}const dS=(0,t.createContext)();function pS(e){let{children:n}=e;const{currentUser:r}=cS(),[i,s]=(0,t.useState)([]),[o,a]=(0,t.useState)([]),l=(0,t.useCallback)((async()=>{try{const e=(await Sy(Sv(iS,"rides"))).docs.map((e=>({id:e.id,...e.data()})));console.log("Fetched Rides:",e),s(e)}catch(Ky){console.error("Error fetching rides: ",Ky)}}),[]),u=(0,t.useCallback)((()=>{if(null!==r&&void 0!==r&&r.uid){const e=WC(sS,`notifications/${r.uid}`);return XC(e,(e=>{const t=e.val(),n=t?Object.keys(t).map((e=>({id:e,...t[e]}))):[];a(n)})),()=>function(e,t,n){let r=null;const i=n?new VC(n):null;"value"===t?r=new GC(i):t&&(r=new QC(t,i)),bC(e._repo,e,r)}(e)}}),[r]);(0,t.useEffect)((()=>{r&&(l(),u())}),[r,u,l]);return(0,Pe.jsx)(dS.Provider,{value:{rides:i,notifications:o,publishRide:async e=>{try{const t=await Iy(Sv(iS,"rides"),e);console.log("Ride published with ID: ",t.id),l()}catch(Ky){console.error("Error adding document: ",Ky)}},sendNotification:e=>{null!==r&&void 0!==r&&r.uid?function(e,t){e=Vi(e),rC("push",e._path),ZE("push",t,e._path,!0);const n=fC(e._repo),r=jC(n),i=HC(e,r),s=HC(e,r);let o;o=null!=t?$C(s,t).then((()=>s)):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0)}(WC(sS,`notifications/${r.uid}`),e):console.error("Driver ID (currentUser) is not available.")},fetchRides:l,fetchNotifications:u,updateNotificationStatus:(e,t)=>{if(null!==r&&void 0!==r&&r.uid){KC(WC(sS,`notifications/${r.uid}/${e}`),{status:t})}},addRideRequest:async e=>{try{const t=await Iy(Sv(iS,"userRide"),e);console.log("Ride added with ID: ",t.id)}catch(Ky){console.error("Error adding document: ",Ky)}},fetchRideRequests:async()=>{if(null!==r&&void 0!==r&&r.uid)try{const e=(await Sy(Sv(iS,"userRide"))).docs.map((e=>({id:e.id,...e.data()}))).filter((e=>e.publisherId===r.uid));return e}catch(Ky){return console.error("Error fetching ride requests:",Ky),[]}},updateRideRequestStatus:async(e,t)=>{try{const n=kv(iS,"userRide",e);await ky(n,{status:t}),console.log(`Request ${e} status updated to ${t}`)}catch(Ky){console.error("Error updating request status:",Ky)}}},children:n})}const fS=()=>(0,t.useContext)(dS);const gS=function(e){let{googleMapsApiKey:n}=e;const[r,i]=(0,t.useState)(),[s,o]=(0,t.useState)(),[a,l]=(0,t.useState)(),[u,c]=(0,t.useState)(),[h,d]=(0,t.useState)(),[p,f]=(0,t.useState)(),[g,m]=(0,t.useState)(""),[v,y]=(0,t.useState)(1),{rides:_,fetchRides:w}=fS(),b=ee();return(0,t.useEffect)((()=>{w()}),[w]),(0,t.useEffect)((()=>{(e=>new Promise((t=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onload=()=>t(),document.body.appendChild(n)})))(`https://maps.gomaps.pro/maps/api/js?key=${n}&libraries=places`).then((()=>{const e=new window.google.maps.places.Autocomplete(document.getElementById("autocomplete-source"),{types:["(cities)"],componentRestrictions:{country:"IN"}}),t=new window.google.maps.places.Autocomplete(document.getElementById("autocomplete-destination"),{types:["(cities)"],componentRestrictions:{country:"IN"}});e.addListener("place_changed",(()=>{const t=e.getPlace();i(t.formatted_address),l(t.geometry.location.lat()),c(t.geometry.location.lng())})),t.addListener("place_changed",(()=>{const e=t.getPlace();o(e.formatted_address),d(e.geometry.location.lat()),f(e.geometry.location.lng())}))}))}),[n]),(0,Pe.jsxs)("div",{className:"search-ride-container",children:[(0,Pe.jsxs)("div",{className:"logo-container",children:[(0,Pe.jsx)("img",{src:"/BlaBlaCar_logo.png",alt:"Logo",className:"blabla-logo"}),(0,Pe.jsx)("h1",{className:"heading",children:"Search for a Ride"})]}),(0,Pe.jsxs)("div",{className:"s-form-container",children:[(0,Pe.jsx)("input",{id:"autocomplete-source",type:"text",placeholder:"Enter source",value:r,onChange:e=>i(e.target.value),className:"s-input"}),(0,Pe.jsx)("input",{id:"autocomplete-destination",type:"text",placeholder:"Enter destination",value:s,onChange:e=>o(e.target.value),className:"s-input"}),(0,Pe.jsx)("input",{type:"date",value:g,onChange:e=>m(e.target.value),className:"s-input"}),(0,Pe.jsx)("input",{type:"number",placeholder:"Seats",value:v,onChange:e=>y(e.target.value),min:"1",className:"s-input"}),(0,Pe.jsx)("button",{onClick:async()=>{const e=(e,n,r,i)=>{const s=t(e),o=t(r),a=o-s,l=t(n),u=t(i)-l,c=Math.sin(a/2)*Math.sin(a/2)+Math.cos(s)*Math.cos(o)*Math.sin(u/2)*Math.sin(u/2),h=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return Math.round(6371e3*h)},t=e=>e*Math.PI/180,n=[];for(const r of _){const t=e(a,u,r.sourceLat,r.sourceLng),i=e(h,p,r.destinationLat,r.destinationLng);(t<=5e4||i<=5e4)&&n.push(r)}n.length>0?b("/available-rides",{state:{results:n,sourceLat:a,sourceLng:u,destinationLat:h,destinationLng:p}}):alert("No rides found matching your search criteria and nearby locations.")},className:"search-btn",children:"Search Ride"})]})]})};const mS=function(e){let{googleMapsApiKey:n}=e;const[r,i]=(0,t.useState)(""),[s,o]=(0,t.useState)(""),[a,l]=(0,t.useState)(null),[u,c]=(0,t.useState)(null),[h,d]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[g,m]=(0,t.useState)(""),[v,y]=(0,t.useState)(""),[_,w]=(0,t.useState)(""),[b,E]=(0,t.useState)(""),[C,S]=(0,t.useState)(""),[k,I]=(0,t.useState)(""),[T,x]=(0,t.useState)("instant"),{publishRide:L}=fS(),P=ee();return(0,t.useEffect)((()=>{(async()=>{const e=rS.currentUser;if(e){const t=await Ey(kv(iS,"users",e.uid));if(t.exists()){const e=t.data();S(e.name),I(e.contact)}}})()}),[]),(0,t.useEffect)((()=>{(async()=>{await(async e=>{const t=document.createElement("script");t.src=e,t.async=!0,document.body.appendChild(t),await new Promise((e=>t.onload=e))})(`https://maps.gomaps.pro/maps/api/js?key=${n}&libraries=places`);const e=new window.google.maps.places.Autocomplete(document.getElementById("autocomplete-source"),{types:["(cities)"],componentRestrictions:{country:"IN"}}),t=new window.google.maps.places.Autocomplete(document.getElementById("autocomplete-destination"),{types:["(cities)"],componentRestrictions:{country:"IN"}});e.addListener("place_changed",(()=>{const t=e.getPlace();i(t.formatted_address),l(t.geometry.location.lat()),c(t.geometry.location.lng())})),t.addListener("place_changed",(()=>{const e=t.getPlace();o(e.formatted_address),d(e.geometry.location.lat()),f(e.geometry.location.lng())}))})()}),[n]),(0,Pe.jsxs)("div",{className:"publish-ride-container",children:[(0,Pe.jsx)("img",{src:"/BlaBlaCar_logo.png",alt:"Banner",className:"banner-img"}),(0,Pe.jsxs)("div",{className:"form-container",children:[(0,Pe.jsx)("h2",{children:"Publish a Ride"}),(0,Pe.jsx)("input",{id:"autocomplete-source",type:"text",placeholder:"Enter Source",className:"input-field"}),(0,Pe.jsx)("input",{id:"autocomplete-destination",type:"text",placeholder:"Enter Destination",className:"input-field"}),(0,Pe.jsx)("input",{type:"text",placeholder:"Car Model",value:g,onChange:e=>m(e.target.value),className:"input-field"}),(0,Pe.jsx)("input",{type:"date",value:v,onChange:e=>y(e.target.value),className:"input-field"}),(0,Pe.jsx)("input",{type:"number",placeholder:"Number of Seats",value:_,onChange:e=>w(e.target.value),className:"input-field"}),(0,Pe.jsx)("input",{type:"number",placeholder:"Price per Seat (\u20b9)",value:b,onChange:e=>E(e.target.value),className:"input-field"}),(0,Pe.jsxs)("select",{value:T,onChange:e=>x(e.target.value),className:"select-field",children:[(0,Pe.jsx)("option",{value:"instant",children:"Instant Approval"}),(0,Pe.jsx)("option",{value:"requestcycle",children:"Request Cycle"})]}),(0,Pe.jsx)("button",{onClick:async()=>{if(!r||!s||!g||!v||!_||!b)return void alert("Please fill in all fields!");const e={sourceLat:a,sourceLng:u,destinationLat:h,destinationLng:p,source:r,destination:s,carModel:g,date:v,seats:_,price:b,driverName:C,driverContact:k,approvaltype:T,status:"available"};await L(e),alert("Ride Published!"),P("/home")},className:"publish-btn",children:"Publish Ride"})]})]})};const vS=function(){const e=J(),t=ee(),{rides:n}=fS(),{ride:r}=e.state||{},i=r||n.find((t=>{var n;return t.id===(null===(n=e.state)||void 0===n?void 0:n.rideId)}));return i?(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("h2",{children:"Confirm Ride Details"}),(0,Pe.jsxs)("p",{children:["From: ",i.source]}),(0,Pe.jsxs)("p",{children:["To: ",i.destination]}),(0,Pe.jsxs)("p",{children:["Car Model: ",i.carModel]}),(0,Pe.jsxs)("p",{children:["Date: ",i.date]}),(0,Pe.jsx)("button",{onClick:()=>{t("/payment",{state:{ride:i}})},children:"Proceed to Payment"})]}):(0,Pe.jsx)("p",{children:"No ride selected"})};const yS=function(){const e=ee(),{notifications:n,fetchNotifications:r,updateNotificationStatus:i}=fS();return(0,t.useEffect)((()=>{r()}),[r]),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("h2",{children:"Notifications"}),n&&n.length>0?n.map((t=>(0,Pe.jsxs)("div",{style:{border:"1px solid #ddd",padding:"10px",margin:"10px 0"},children:[(0,Pe.jsxs)("p",{children:["Status: ",t.status||"Pending"]}),(0,Pe.jsx)("button",{onClick:()=>{return n=t.id,r=t.rideId,i(n,"accepted"),alert("Ride accepted!"),void e(`/payment/${String(r)}`);var n,r},children:"Accept"}),(0,Pe.jsx)("button",{onClick:()=>{return e=t.id,i(e,"rejected"),void alert("Ride rejected!");var e},children:"Reject"})]},t.id))):(0,Pe.jsx)("p",{children:"No notifications available"})]})};const _S=function(){const e=ee();return(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("h2",{children:"Payment Page"}),(0,Pe.jsx)("p",{children:"Processing payment for ride........."}),(0,Pe.jsx)("button",{onClick:()=>{console.log("Proceeding to Payment for Ride"),alert("Payment successful!"),e("/your-rides")},children:"Proceed to Payment"})]})};const wS=function(){const{currentUser:e}=cS(),[n,r]=(0,t.useState)(null),[i,s]=(0,t.useState)([]),[o,a]=(0,t.useState)([]),[l,u]=(0,t.useState)(null),c=ee();(0,t.useEffect)((()=>{e&&h()}),[e]),(0,t.useEffect)((()=>{n&&(d(),p())}),[n]);const h=async()=>{try{const t=kv(iS,"users",e.uid),n=await Ey(t);n.exists()?r(n.data().role):console.error("User document not found")}catch(Ky){console.error("Error fetching user role:",Ky)}},d=async()=>{try{if(null===e||void 0===e||!e.uid||!n)return;const t=[];if("driver"===n){const n=ly(Sv(iS,"rides"),cy("driverId","==",e.uid)),r=await Sy(n);for(const e of r.docs){const n=ly(Sv(iS,"userRide"),cy("tripId","==",e.id)),r=await Sy(n);for(const i of r.docs){const n=kv(iS,"users",i.data().userId),r=await Ey(n);r.exists()&&t.push({...i.data(),id:i.id,name:r.data().name,email:r.data().email,contact:r.data().contact,preferences:r.data().preferences||[],status:i.data().status,tripId:e.id})}}s(t)}if("passenger"===n){const t=ly(Sv(iS,"userRide"),cy("userId","==",e.uid)),n=await Sy(t);for(const e of n.docs){const t=kv(iS,"rides",e.data().tripId),n=await Ey(t);if(n.exists()){const t={...e.data(),id:e.id,driverName:n.data().driverName,driverContact:n.data().driverContact,status:e.data().status,tripId:e.data().tripId};"accepted"===e.data().status&&u(t)}}}}catch(Ky){console.error("Error fetching booking requests:",Ky)}},p=async()=>{try{if(null===e||void 0===e||!e.uid||!n)return;const t=[];if("driver"===n){const n=ly(Sv(iS,"rides"),cy("driverId","==",e.uid)),r=await Sy(n);for(const e of r.docs){const n=ly(Sv(iS,"userRide"),cy("tripId","==",e.id),cy("status","==","completed")),r=await Sy(n);for(const i of r.docs){const n=kv(iS,"users",i.data().userId),r=await Ey(n);r.exists()&&t.push({...i.data(),id:i.id,name:r.data().name,email:r.data().email,contact:r.data().contact,preferences:r.data().preferences||[],status:i.data().status,tripId:e.id})}}a(t)}if("passenger"===n){const t=ly(Sv(iS,"userRide"),cy("userId","==",e.uid),cy("status","==","completed")),n=await Sy(t);for(const e of n.docs){const t=kv(iS,"rides",e.data().tripId),n=await Ey(t);if(n.exists()){const t={...e.data(),id:e.id,driverName:n.data().driverName,driverContact:n.data().driverContact,status:e.data().status,tripId:e.data().tripId};a((e=>[...e,t]))}}}}catch(Ky){console.error("Error fetching completed trips:",Ky)}},f=async(e,t)=>{try{const n=kv(iS,"userRide",e);if(await ky(n,{status:t}),"accepted"===t){const t=(await Ey(n)).data(),r=kv(iS,"users",t.userId),i=await Ey(r);i.exists()&&u({...t,id:e,name:i.data().name,contact:i.data().contact,preferences:i.data().preferences||[],tripId:t.tripId})}s((t=>t.filter((t=>t.id!==e)))),alert(`Ride request ${t}!`)}catch(Ky){console.error(`Error ${t} ride request:`,Ky)}};return(0,Pe.jsxs)("div",{className:"your-rides",children:[(0,Pe.jsx)("h1",{className:"title",children:"Your Rides"}),(0,Pe.jsxs)("div",{className:"section",children:[(0,Pe.jsx)("h2",{className:"section-title",children:"Booking Requests"}),i.length>0?i.map((e=>(0,Pe.jsxs)("div",{className:"card",children:[(0,Pe.jsxs)("p",{children:[(0,Pe.jsx)("strong",{children:"Passenger:"})," ",e.name]}),(0,Pe.jsxs)("p",{children:[(0,Pe.jsx)("strong",{children:"Status:"})," ",e.status]}),"pending"===e.status&&(0,Pe.jsxs)("div",{className:"button-group",children:[(0,Pe.jsx)("button",{className:"btn accept",onClick:()=>f(e.id,"accepted"),children:"Accept"}),(0,Pe.jsx)("button",{className:"btn reject",onClick:()=>f(e.id,"rejected"),children:"Reject"})]})]},e.id))):(0,Pe.jsx)("p",{className:"placeholder",children:"No booking requests."})]}),(0,Pe.jsxs)("div",{className:"section",children:[(0,Pe.jsx)("h2",{className:"section-title",children:"Completed Trips"}),o.length>0?o.map((t=>(0,Pe.jsxs)("div",{className:"card",children:[(0,Pe.jsxs)("p",{children:[(0,Pe.jsx)("strong",{children:"Driver Name:"})," ",t.driverName]}),(0,Pe.jsxs)("p",{children:[(0,Pe.jsx)("strong",{children:"Status:"})," ",t.status]}),"rated"!==t.status&&(0,Pe.jsx)("button",{className:"btn rate",onClick:()=>{(async t=>{try{c("/rate-driver",{state:{tripId:t,passengerId:e.uid}})}catch(Ky){console.error("Error navigating to rating page:",Ky)}})(t.tripId),(async e=>{try{const t=kv(iS,"userRide",e);await ky(t,{status:"rated"}),a((t=>t.filter((t=>t.tripId!==e))))}catch(Ky){console.error("Error marking trip as rated:",Ky)}})(t.id)},children:"Rate Driver"})]},t.tripId))):(0,Pe.jsx)("p",{className:"placeholder",children:"No completed trips."})]}),l&&(0,Pe.jsxs)("div",{className:"section trip-details",children:[(0,Pe.jsx)("h2",{className:"section-title",children:"Trip Details"}),(0,Pe.jsxs)("p",{children:[(0,Pe.jsx)("strong",{children:"Passenger:"})," ",l.name]}),(0,Pe.jsxs)("p",{children:[(0,Pe.jsx)("strong",{children:"Contact:"})," ",l.contact]}),(0,Pe.jsx)("button",{className:"btn complete",onClick:async()=>{try{null!==l&&void 0!==l&&l.id&&(await ky(kv(iS,"userRide",l.id),{status:"completed"}),c("/ratings",{state:{driverId:e.uid,userId:l.userId,tripId:l.tripId}}))}catch(Ky){console.error("Error completing trip:",Ky)}},children:"Complete Trip"})]})]})};var bS=n(105);const ES=function(){const{currentUser:e}=cS(),n=J(),[r,i]=(0,t.useState)([]),[s,o]=(0,t.useState)({}),[a,l]=(0,t.useState)({}),[u,c]=(0,t.useState)(!0),{driverId:h,userId:d}=n.state||{};(0,t.useEffect)((()=>{p()}),[h,d]);const p=async()=>{c(!0);try{const e=[],t=ly(Sv(iS,"userRide"),cy("userId","==",d),cy("status","==","completed"));(await Sy(t)).forEach((t=>{f(d).then((e=>{l((t=>({...t,[d]:e})))})),e.push({id:t.id,role:"driver",tripId:t.data().tripId,source:t.data().source,destination:t.data().destination,driverName:t.data().driverName,...t.data()})}));const n=ly(Sv(iS,"rides"),cy("driverId","==",h),cy("status","==","completed"));(await Sy(n)).forEach((t=>{const n=t.data(),r=t.id;e.push({id:t.id,role:"passenger",tripId:r,source:n.source,destination:n.destination,driverName:n.driverName||"You",...n})})),i(e)}catch(Ky){console.error("Error fetching completed trips:",Ky)}finally{c(!1)}},f=async e=>{try{const t=[],n=ly(Sv(iS,"userRide"),cy("userId","==",e));return(await Sy(n)).forEach((e=>{console.log(e.data()),t.push(e.data().userId)})),console.log("Fetched passengers for trip:",e,t),t}catch(Ky){return console.error("Error fetching passenger list:",Ky),[]}};return(0,Pe.jsxs)("div",{className:"ratings-page",children:[(0,Pe.jsx)("h2",{className:"page-title",children:"Rate Your Rides"}),u?(0,Pe.jsx)("div",{className:"loading",children:"Loading trips..."}):0===r.length?(0,Pe.jsx)("p",{className:"no-trips-message",children:"No completed trips to rate."}):r.map((t=>{var n;return(0,Pe.jsxs)("div",{className:"trip-card",children:[(0,Pe.jsxs)("h3",{className:"trip-title",children:["Trip Id: ",t.tripId]}),(0,Pe.jsxs)("p",{className:"trip-detail",children:[(0,Pe.jsx)("strong",{children:"Role:"})," ",t.role]}),"passenger"===t.role?(0,Pe.jsxs)("p",{className:"trip-detail",children:[(0,Pe.jsx)("strong",{children:"Driver:"})," ",t.driverName||e.name]}):(0,Pe.jsxs)("div",{className:"passenger-list",children:[(0,Pe.jsx)("p",{children:(0,Pe.jsx)("strong",{children:"Passengers:"})}),(0,Pe.jsx)("ul",{children:null===(n=a[t.userId])||void 0===n?void 0:n.map(((e,t)=>(0,Pe.jsx)("li",{className:"passenger-item",children:e},t)))})]}),(0,Pe.jsx)("div",{className:"rating-section",children:(0,Pe.jsx)(bS.A,{count:5,value:s[t.id]||0,onChange:e=>(async(e,t,n)=>{o((n=>({...n,[e]:t})));try{if("driver"===n){const n=kv(iS,"userRide",e);await ky(n,{passengerRating:t})}else if("passenger"===n){const n=kv(iS,"rides",e);await ky(n,{driverRating:t})}alert("Rating submitted successfully!")}catch(Ky){console.error("Error submitting rating:",Ky),alert("Failed to submit rating. Please try again.")}})(t.id,e,t.role),size:30,isHalf:!0,activeColor:"#ffd700"})})]},t.id)}))]})};const CS=function(e){let{ride:n,googleMapsApiKey:r}=e;const[i,s]=(0,t.useState)(!1),o=ee(),{sendNotification:a,addRideRequest:l}=fS(),{currentUser:u}=cS(),c=u.uid;return(0,Pe.jsx)("div",{className:"ride-card",children:i?(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)("h3",{children:n.driverName}),(0,Pe.jsxs)("p",{children:["From: ",n.source]}),(0,Pe.jsxs)("p",{children:["To: ",n.destination]}),(0,Pe.jsxs)("p",{children:["Date: ",n.date]}),(0,Pe.jsxs)("p",{children:["Driver Contact: ",n.driverContact]}),(0,Pe.jsxs)("p",{children:["Car Model: ",n.carModel]}),(0,Pe.jsxs)("p",{children:["Seats Available: ",n.seats]}),(0,Pe.jsxs)("p",{children:["Price: ",n.price]}),(0,Pe.jsxs)("p",{children:["Approval Type: ",n.approvaltype]}),(0,Pe.jsx)("button",{onClick:async()=>{if(c)if("instant"===n.approvaltype)a({message:"Ride Booking Request",rideId:n.id,userId:c,timestamp:Date.now()}),alert("Booking request sent to driver!"),o("/notifications");else{const e={tripId:n.id,userId:c,status:"pending",timestamp:Date.now()};await l(e),alert("Booking request submitted for approval!")}else alert("Please log in to book a ride.")},children:"Request to Book"}),(0,Pe.jsx)(Wr,{googleMapsApiKey:r,sourceLat:n.sourceLat,sourceLng:n.sourceLng,destinationLat:n.destinationLat,destinationLng:n.destinationLng}),(0,Pe.jsx)("button",{onClick:()=>s(!1),children:"Hide Details"})]}):(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)("h3",{children:n.driverName}),(0,Pe.jsxs)("p",{children:["From: ",n.source]}),(0,Pe.jsxs)("p",{children:["To: ",n.destination]}),(0,Pe.jsxs)("p",{children:["Date: ",n.date]}),(0,Pe.jsx)("button",{onClick:()=>s(!0),children:"More Details"})]})})};var SS;class kS{}SS=kS,kS.calculateDistance=(e,t,n,r)=>{const i=SS.toRadians(e),s=SS.toRadians(n),o=s-i,a=SS.toRadians(t),l=SS.toRadians(r)-a,u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(i)*Math.cos(s)*Math.sin(l/2)*Math.sin(l/2),c=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u));return Math.round(6371e3*c)},kS.toRadians=e=>e*Math.PI/180;const IS=kS;const TS=function(){const e=J(),{results:n}=e.state||{results:[]},{sourceLat:r,sourceLng:i,destinationLat:s,destinationLng:o}=e.state||{sourceLat:0,sourceLng:0,destinationLat:0,destinationLng:0},[a,l]=(0,t.useState)(n),[u,c]=(0,t.useState)({max2InTheBack:!1,smokingAllowed:!1,petsAllowed:!1}),[h,d]=(0,t.useState)(!1),[p,f]=(0,t.useState)(""),g=(0,t.useCallback)((()=>{const e=n.filter((e=>{const t=!u.max2InTheBack||e.max2InTheBack,n=!u.smokingAllowed||e.smokingAllowed,r=!u.petsAllowed||e.petsAllowed;return t&&n&&r}));l(e)}),[u,n]);(0,t.useEffect)((()=>{g()}),[g]);const m=e=>{const{name:t,checked:n}=e.target;c((e=>({...e,[t]:n})))};return(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("h2",{children:"Available Rides"}),(0,Pe.jsxs)("div",{className:"filter-sort-section",children:[(0,Pe.jsx)("div",{className:"sort-options",children:(0,Pe.jsxs)("label",{children:["Sort By:",(0,Pe.jsxs)("select",{value:p,onChange:e=>(e=>{const t=[...a].sort(((t,n)=>{if("seats"===e)return parseInt(n.seats)-parseInt(t.seats);if("price"===e)return parseFloat(t.price)-parseFloat(n.price);if("date"===e)return new Date(t.date)-new Date(n.date);if("departure"===e){const e=IS.calculateDistance(r,i,n.sourceLat,n.sourceLng),s=IS.calculateDistance(r,i,t.sourceLat,t.sourceLng);return console.log(t.carModel,n.carModel,e,s,n.sourceLat,n.sourceLng,t.sourceLat,t.sourceLng),s-e}if("arrival"===e){const e=IS.calculateDistance(s,o,n.destinationLat,n.destinationLng),r=IS.calculateDistance(s,o,t.destinationLat,t.destinationLng);return console.log(t.carModel,n.carModel,e,r,n.sourceLat,n.sourceLng,t.sourceLat,t.sourceLng),r-e}return 0}));l(t),f(e)})(e.target.value),children:[(0,Pe.jsx)("option",{value:"",children:"None"}),(0,Pe.jsx)("option",{value:"departure",children:"Close to departure"}),(0,Pe.jsx)("option",{value:"arrival",children:"Close to Arrival"}),(0,Pe.jsx)("option",{value:"seats",children:"Seats high to low"}),(0,Pe.jsx)("option",{value:"price",children:"Price low to high"}),(0,Pe.jsx)("option",{value:"date",children:"Date"})]})]})}),(0,Pe.jsx)("button",{className:"filter-button",onClick:()=>{d((e=>!e))},children:h?"Hide Filters":"Show Filters"})]}),h&&(0,Pe.jsxs)("div",{className:"filters",children:[(0,Pe.jsxs)("label",{children:[(0,Pe.jsx)("input",{type:"checkbox",name:"max2InTheBack",checked:u.max2InTheBack,onChange:m}),"Max 2 in the Back"]}),(0,Pe.jsxs)("label",{children:[(0,Pe.jsx)("input",{type:"checkbox",name:"smokingAllowed",checked:u.smokingAllowed,onChange:m}),"Smoking Allowed"]}),(0,Pe.jsxs)("label",{children:[(0,Pe.jsx)("input",{type:"checkbox",name:"petsAllowed",checked:u.petsAllowed,onChange:m}),"Pets Allowed"]})]}),a.length>0?a.map((e=>(0,Pe.jsx)(CS,{ride:e},e.id))):(0,Pe.jsx)("p",{children:"No rides found."})]})};const xS=function(){return(0,Pe.jsxs)("div",{className:"dashboard-container",children:[(0,Pe.jsx)("img",{src:"/BlaBlaCar.png",alt:"Logo",className:"logo"}),(0,Pe.jsx)("h1",{children:"Welcome to the Ride Sharing App"}),(0,Pe.jsxs)("div",{className:"button-container",children:[(0,Pe.jsx)(ke,{to:"/login",className:"button",children:"Login"}),(0,Pe.jsx)(ke,{to:"/signup",className:"button",children:"Signup"})]})]})};const LS=function(){const{state:e}=J(),n=ee(),{tripId:r,passengerId:i}=e||{},[s,o]=(0,t.useState)(0),[a,l]=(0,t.useState)(""),[u,c]=(0,t.useState)(!0);(0,t.useEffect)((()=>{if(!r)return void console.error("No tripId available.");(async()=>{try{const e=kv(iS,"rides",r),t=await Ey(e);if(t.exists()){const e=t.data();l(e.driverName||"Driver name not available")}else console.error("No such trip!")}catch(Ky){console.error("Error fetching driver name:",Ky)}finally{c(!1)}})()}),[r]);const h=async e=>{o(e);try{const t=kv(iS,"rides",r);await ky(t,{driverRating:e}),alert("Rating submitted successfully!"),n("/your-rides")}catch(Ky){console.error("Error submitting rating:",Ky),alert("Failed to submit rating. Please try again.")}};return u?(0,Pe.jsxs)("div",{className:"loading-container",children:[(0,Pe.jsx)("div",{className:"spinner"})," ",(0,Pe.jsx)("p",{children:"Loading driver details..."})]}):(0,Pe.jsxs)("div",{className:"rate-driver-container",children:[(0,Pe.jsx)("h2",{className:"rate-driver-title",children:"Rate Your Driver"}),(0,Pe.jsxs)("div",{className:"rate-driver-card",children:[(0,Pe.jsxs)("p",{className:"driver-name",children:[(0,Pe.jsx)("strong",{children:"Driver:"})," ",a]}),(0,Pe.jsxs)("p",{className:"trip-info",children:["Rate the driver for trip ",r]}),(0,Pe.jsx)("div",{className:"rating-container",children:(0,Pe.jsx)(bS.A,{count:5,value:s,onChange:h,size:30,isHalf:!0,activeColor:"#ffd700"})}),(0,Pe.jsx)("div",{className:"submit-rating",children:(0,Pe.jsx)("button",{className:"submit-button",onClick:()=>h(s),children:"Submit Rating"})})]})]})};const PS=function(){const[e,n]=(0,t.useState)({lat:null,lng:null,address:""}),[r,i]=(0,t.useState)({lat:null,lng:null,address:""}),s="AlzaSyCfIZ_pMopID6nYkLALRIaWoXGuKb8esJq";return(0,Pe.jsx)(rt,{googleMapsApiKey:s,libraries:["places"],children:(0,Pe.jsx)(pS,{children:(0,Pe.jsx)(Ee,{children:(0,Pe.jsxs)(me,{children:[(0,Pe.jsx)(fe,{path:"/",element:(0,Pe.jsx)(xS,{})}),(0,Pe.jsx)(fe,{path:"/login",element:(0,Pe.jsx)(oS,{})}),(0,Pe.jsx)(fe,{path:"/signup",element:(0,Pe.jsx)(aS,{})}),(0,Pe.jsx)(fe,{path:"/home",element:(0,Pe.jsx)($r,{})}),(0,Pe.jsx)(fe,{path:"/profile",element:(0,Pe.jsx)(lS,{})}),(0,Pe.jsx)(fe,{path:"/search-ride",element:(0,Pe.jsx)("div",{children:(0,Pe.jsx)(gS,{googleMapsApiKey:s,source:e,destination:r})})}),(0,Pe.jsx)(fe,{path:"/publish-ride",element:(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)(mS,{setSource:n,setDestination:i,googleMapsApiKey:s}),e.lat&&r.lat&&(0,Pe.jsx)(Hr,{googleMapsApiKey:s,source:e,destination:r})]})}),(0,Pe.jsx)(fe,{path:"/ride-booking/:rideId",element:(0,Pe.jsx)(vS,{})}),(0,Pe.jsx)(fe,{path:"/notifications",element:(0,Pe.jsx)(yS,{})}),(0,Pe.jsx)(fe,{path:"/payment/:rideId",element:(0,Pe.jsx)(_S,{})}),(0,Pe.jsx)(fe,{path:"/your-rides",element:(0,Pe.jsx)(wS,{})}),(0,Pe.jsx)(fe,{path:"/ratings",element:(0,Pe.jsx)(ES,{})}),(0,Pe.jsx)(fe,{path:"/rate-driver",element:(0,Pe.jsx)(LS,{})}),(0,Pe.jsx)(fe,{path:"/available-rides",element:(0,Pe.jsx)(TS,{})}),(0,Pe.jsx)(fe,{path:"/map-view/:sourceLat/:sourceLng/:destinationLat/:destinationLng",element:(0,Pe.jsx)(Wr,{})})]})})})})};i.createRoot(document.getElementById("root")).render((0,Pe.jsx)(hS,{children:(0,Pe.jsx)(PS,{})}))})()})();
//# sourceMappingURL=main.cb29fa6f.js.map